<!-- 工具栏 -->
<div id="panel-tools" on="on|rise;off|lose" class="___Panel Tools" on="on|rise;off|lose">
    <div data-id="tools" class="_xbox" tpl-load="tools:inputs">
        <!-- [...] -->
    </div>
    <i id="x-help" class="_help" title="{帮助}" on="click|folds,flag('helping')"></i>
    <div id="help-docs" class="_docs" data-pb="fold"
        on="help|fire('@','open');
            open|rise,flag('helping',true);
            close|lose,flag('helping',false)"
        by="Help.index('#help-label')"
        to="#box-man|fill">
        <span class="_nav _back">
            <i id="x-man-back" title="{后退}" on="click" by="Help.nav(-1,'#box-man')"></i>
            <i id="x-man-frwd" title="{前进}" on="click" by="Help.nav(1,'#box-man')"></i>
        </span>
        <h6><i id="l-home"></i><span><b>帮助</b> &gt; <b id="help-label">样式版</b></span></h6>
        <hr>
        <div id="box-man" class="_xbox">
            <!-- dl/dt/dd -->
            <p>[动态内容-当前条目的man]</p>
        </div>
    </div>
</div>

<!-- 内容区 -->
<div class="___Content">
    <!-- 视觉反馈层 -->
    <div id="g-gleam" class="_gleam" on="stir|gleam"></div>
    <!--滚动盒子
        注记：tabindex若设置在可滚动容器上，获取焦点时内容可能移位（浏览器行为）
        flag(['meding','browse']),end(true)
    -->
    <div id="scrollbox" class="___Scroll" tabindex="0"
        on="keydown|pass('editing'),go(67,'#g-temp','on','copy'),go(77,'#g-temp','on','move'),cmdline('#g-cmdline');
            keydown|xkey('ctrl'),keys(46);
            keydown|pass('browse');
            scroll|menu(null),end('meding'),pins('#g-pins','#g-pinned'),focus"
        by="Ed.main('#g-temp');
            -;
            Art.navigate">
        <!-- 正文区 -->
        <div id="app-text" tpl-name="art:text" class="Main"
            on="click|end('meding'),etmp(true);
                mouseup|end(['meding','tmping']),pins('#g-pins','#g-pinned');
                contextmenu|end(['meding','tmping']),pins('#g-pins','#g-pinned'),void,stop;
                browse|conto('art:browse'),flag('browse',1);
                dblclick medin|menu(null),void,end('meding'),medpass,flag('meding',1),fire('#g-minied','click','',true);
                medok medoff|flag('meding',null);
                click(._inMed) keydown('._inMed')|pass('meding');
                paste(._inMed)|pass('meding'),void;
                cut(._inMed)|pass('meding');
                mouseover(*)|end('meding'),etmp(true),clss('_msCur',null),etip,stop;
                mouseout(*)|end('meding'),etmp,clsrm('_msCur',null),stip,stop;
                click(a)|void;
                clean|clean"
            by="Ed.mouse('#g-temp');
                Ed.imenu('#menu-cells');
                Ed.pedit('#menu-edits');
                Ed.browse;
                Ed.medin;
                Ed.medout;
                Ed.minied; Ed.tpaste; Ed.cut"></div>
        <!-- 底部留白 -->
        <div class="_bspace"></div>
    </div>
    <!-- 临时态标示 -->
    <div id="g-temp" class="_tmps" data-pb="lose"
        on="on|vels,rise,tmps(true,'div@'),flag('tmping',1);
            off|lose,tmps(false,'div@'),flag('tmping',null)">
        <span><!-- copy|move --></span>
    </div>
    <!-- 元素路径 -->
    <div id="g-paths" class="_paths" data-pb="lose"
        on="click('b')|work; on|rise; off|lose"
        by="Ed.pathto">
        <b class="_root" title="all">&nbsp;</b><span id="box-path"
            on="mouseover('b')|clss('_msCur','','_pathfrom_');
                mouseout('b')|clsrm('_msCur','','_pathfrom_')">
            <!-- [逆向路径节点集] -->
        </span>
    </div>
</div>

<!-- 功能区 -->
<div id="panel-misc" on="on|rise;off|lose" class="___Panel Misc" data-pb="rise">
    <span id="g-pins" class="_pin _pinned"
        on="click|cls2s('_pinned'),swap('#g-pinned',1,0);
            on|clss('_pinned'),stop;
            off|clsrm('_pinned'),stop">
        <i id="x-pin"></i>
    </span>
    <!-- 主功能区 -->
    <div data-id="utility" class="_xbox" tpl-load="misc:inputs"
        on="mouseup|mpsize(false,'@tabbar')"><!-- [...] --></div>
</div>

<!-- 扩展区 -->
<div id="panel-extra" class="___Panel Extra">
    <!-- 编辑模式 -->
    <div id="panel-meds" class="Meds" data-pb="lose" on="on|rise;off|lose">
        <b class="_button" title="Ctrl+Enter"
            on="click|fire('#app-text','medok')"><i id="l-ok"></i>&nbsp;{确定}</b>
    </div>
    <!-- 插件页表 -->
    <div id="panel-plugs" class="Plugs" data-pb="lose" on="on|rise;off|lose">
        <i id="x-plug-prev" class="_prev" title="{上一页}"></i>
        <!--plugs：构造当前版页的插件页表 -->
        <div id="box-plugs" class="_list"
            on="_init;
                load|one('@','_init',true),stop;
                click('img')|man('','-val'),end('helping')"
            by="Sys.plugs;
                Art.plugs('plug:list');
                Art.plugo('data-val')"
            to="@|-|plugs('@','load'));
                @|fill">
            <span tpl-name="plug:list" tpl-for>
                <!--data-val="Sample" src="/jced/plugins/Sample/icon.png" title="[显示名\n作者\n(版本)]" -->
                <img width="32" tpl-out="data-val=$name; src=$icon; title=$tips" />
            </span>
        </div>
        <i id="x-plug-next" class="_next" title="{下一页}"></i>
    </div>
</div>

<!-- 状态栏 -->
<div id="panel-status" class="___Panel Status">
    <table border="0" width="100%" cellspacing="3" cellpadding="0">
        <tr>
            <td class="_info" width="180">
                <b id="g-selected" class="_cnts">0</b>
                <b id="g-current" class="_text"></b>
            </td>
            <td id="g-plugs" width="28" class="_plug" title="{插件集}&lt;F4&gt;"
                on="click|folds('#panel-plugs'),go(true,'@','on','',0),go(false,'@','off','',0);
                    plugs|plugs('#box-plugs','load');
                    on|unfold('#panel-plugs'),clss('_fixed'),fire('@','plugs'),attr('-pgs','#g-sheet b._current','on');
                    off|fold('#panel-plugs'),clsrm('_fixed'),attr('-pgs','#g-sheet b._current','off')">
                <i id="x-plugs"></i>
            </td>
            <td class="_cmds">
                <!--历史清单：
                    - 上下箭头移动当前条目，Tab/Enter或单击选取
                    - 按ESC键取消弹出框，停止冒泡避免上层esc事件
                -->
                <div class="_xbox">
                    <div id="box-cmdlist" tabindex="0" class="_list" data-pb="hide"
                        on="click('code')|cmdset('#g-cmdline'),fire('@','off');
                            keydown|keys(9,13),void,cmdset('#g-cmdline','._fixed'),fire('@','off');
                            keydown|keys(38,40),void,cmdir('code','_fixed');
                            keydown|keys(27),stop,fire('@','off');
                            check|cmdact('#g-cmdline','_fixed','code'),fire('@','on');
                            on|cmds('code','_fixed'),show,focus;
                            off|hide,focus('#g-cmdline'),stop;
                            blur|hide">
                        <span data-id="cmdlist" on="clean|clsrm('_fixed'),stop">
                            <!-- <code>...</code> -->
                        </span>
                    </div>
                </div>
                <!--绑定功能：
                    1. 回车执行命令行，自动选取结果
                    2. Tab键展开当前键入内容匹配清单
                    3. 上下箭头和翻页键匹配当前键入词导航
                    4. Ctrl+U 清空命令行内容
                    5. 手动键入内容成为搜索匹配词
                    6. Tab和箭头翻页导航支持+Shift模糊匹配
                -->
                <input id="g-cmdline" type="text" class="_code"
                    on="keydown|keys(13);
                        keydown|keys(9),void,env('cmding'),cmdtab('1@cmdlist'),clsrm('_fixed','1@cmdlist ._fixed'),fire('#box-cmdlist','check');
                        keydown|keys(38,40,33,34),void,env('cmding'),cmdnav;
                        keydown|xkey('ctrl'),keys(85),prop('value',''),flag('cmding',''),void;
                        input|get('value'),flag('cmding')"
                    by="Art.cmdline"
                    to="@|value|flag('cmding',''),select" />
            </td>
        </tr>
    </table>
</div>


<!-- [菜单集] -->

<!-- 内联创建|转换 -->
<menu id="menu-cells" class="_cells" data-pb="hide"
        on="click('label')|void; popup|show,menu; off|hide"
        by="Mk.imake('data-val')">
        <li><label data-val="a" title="{链接}"><a href="javascript:return false;">&lt;a&gt;</a></label></li>
        <li><label data-val="code" title="{代码}"><code>&lt;code&gt;</code></label></li>
        <li class="_blk"><hr></li>
        <li><label data-val="strong" title="{重点}"><strong>&lt;strong&gt;</strong></label></li>
        <li><label data-val="b" title="{粗体}"><strong>&lt;b&gt;</strong></label></li>
        <li class="_blk"><hr></li>
        <li><label data-val="em" title="{强调}"><em>&lt;em&gt;</em></label></li>
        <li><label data-val="i" title="{斜体}"><em>&lt;i&gt;</em></label></li>
        <li class="_blk"><hr></li>
        <li><label data-val="sub" title="{下标}">X<sub>&lt;sub&gt;</sub></label></li>
        <li><label data-val="sup" title="{上标}">X<sup>&lt;sup&gt;</sup></label></li>
        <li class="_blk"><hr></li>
        <li><label data-val="q" title="{引用}"><q>&lt;q&gt;</q></label></li>
        <li><label data-val="time" title="{时间}"><time>&lt;time&gt;</time></label></li>
        <li class="_blk"><hr></li>
        <li><label data-val="ins" title="{插入}"><ins>&lt;ins&gt;</ins></label></li>
        <li><label data-val="del" title="{删除}"><del>&lt;del&gt;</del></label></li>
        <li class="_blk"><hr></li>
        <li><label data-val="abbr" title="{缩写}"><abbr>&lt;abbr&gt;</abbr></label></li>
        <li><label data-val="small" title="{注脚}"><small>&lt;small&gt;</small></label></li>
        <li class="_blk"><hr></li>
        <li><label data-val="cite" title="{来源}"><cite>&lt;cite&gt;</cite></label></li>
        <li><label data-val="mark" title="{标记}"><mark>&lt;mark&gt;</mark></label></li>
        <li class="_blk"><hr></li>
        <li><label data-val="ruby" title="{注音}"><ruby>&lt;ruby&gt;</ruby></label></li>
</menu>

<!-- 基本上下文 -->
<menu id="menu-edits" class="_edits" data-pb="hide" on="popup|show,menu; off|hide">
        <li on="click|fire('#app-text','medin')">
            <label data-val="edit"><b>&lt;F2&gt;,&lt;I&gt;</b><i id="l-edit"></i>{编辑}</label>
        </li>
        <li class="_blk"><hr></li>
        <li on="click|fire('#g-temp','on','copy'),work">
            <label data-val="copy"><b>&lt;C&gt;</b><i id="l-copy"></i>{复制}</label>
        </li>
        <li on="click|fire('#g-temp','on','move'),work">
            <label data-val="move"><b>&lt;M&gt;</b><i id="l-move"></i>{移动}</label>
        </li>
        <li class="_blk"><hr></li>
        <li id="g-strip" data-pb="disabled"
            on="click|enabled,work; on|enable,valid; off|disable,invalid"
            by="Ed.unlayer">
            <label on="click|man('unlayer')"><i id="l-strip"></i>{解封装}</label>
        </li>
        <li class="_blk"><hr></li>
        <li on="click|work" by="Ed.delels('#app-text')">
            <label><b>&lt;Del&gt;</b><i id="l-delete"></i>{删除}</label>
        </li>
        <li class="_blk"><hr></li>
        <li id="g-prop" data-pb="disabled"
            on="click|enabled; on|enable,valid; off|disable,invalid"
            by="Ed.props">
            <label on="click|man('props')"><b>&lt;P&gt;</b><i id="l-prop"></i>{属性}</label>
        </li>
</menu>

