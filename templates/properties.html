<!--单元属性：（property:xx）
    - 由上下文菜单中的“属性”条目激发。
    - data-label 用于模态框标题栏文本。
    vinit   初始从首个选取的元素上取属性值填充。注：交由具体的<li>:value自行负责。
    bulid   构建属性[值集, 名集]，发送到表单应用（apply）。
----------------------------------------------------------------------------->

<ul class="_prop" tpl-name="property:audio" data-label="音频属性"
    on="vinit|v.sel0;
        reset;
        build|('src autoplay loop controls') dup $('form/') pop value(_1) $('/pre._code') text arr v.mediasubs pack(3)"
    to="(/>li)|trigger('value');
        (/>li)[-2:]|trigger('reset');
        form/|trigger('apply')">
    <li tpl-node="prop:src"></li>
    <li tpl-node="prop:upload, prop:preview"></li>
    <li tpl-node="prop:mediaopts"></li>
    <li tpl-node="prop:sources1"></li>
</ul>

<ul class="_prop" tpl-name="property:video" data-label="视频属性"
    on="vinit|v.sel0;
        reset;
        build|('src poster autoplay loop controls width height') dup $('form/') pop value(_1) $$('/pre._code') text v.mediasubs pack(3)"
    to="(/>li)|trigger('value');
        (/>li)[-2:]|trigger('reset');
        form/|trigger('apply')">
    <li tpl-node="prop:src, prop:poster"></li>
    <li tpl-node="prop:upload, prop:preview"></li>
    <li tpl-node="prop:wh, prop:mediaopts"></li>
    <li tpl-node="prop:sources1, prop:tracks"></li>
</ul>

<ul class="_prop" tpl-name="property:picture" data-label="自适应图片属性"
    on="vinit|v.sel0 pop $('/img');
        vinit|v.sel0;
        reset;
        build|"
    to="(/>li)(:last-child)|trigger('value');
        /li:last-child|trigger('value');
        /li:last-child|trigger('reset')">
    <li tpl-node="prop:src, prop:alt"></li>
    <li tpl-node="prop:upload, prop:preview, prop:wh"></li>
    <li tpl-node="prop:sources2"></li>
</ul>

<ul class="_prop" tpl-name="property:img" data-label="图片属性"
    on="vinit|v.sel0;
        build|"
    to="(/>li)|trigger('value')">
    <li tpl-node="prop:src, prop:alt"></li>
    <li tpl-node="prop:upload, prop:preview, prop:wh"></li>
</ul>

<ul class="_prop" tpl-name="property:svg" data-label="SVG属性"
    on="vinit|v.sel0;
        build|"
    to="(/>li)|trigger('value')">
    <li tpl-node="prop:width, prop:height"></li>
</ul>

<ul class="_prop" tpl-name="property:ruby" data-label="注音拼音"
    on="vinit|v.sel0 pop $$('/rt');
        build|"
    to="/>li|trigger('value')">
    <li tpl-node="prop:rt, prop:rp"></li>
</ul>

<ul class="_prop" tpl-name="property:times" data-label="时间设定"
    on="vinit|v.sel0;
        build|"
    to="(/>li)|trigger('value')">
    <li tpl-node="prop:date, prop:time"></li>
</ul>

<ul class="_prop" tpl-name="property:meter" data-label="度量属性"
    on="vinit|v.sel0;
        build|"
    to="(/>li)|trigger('value')">
    <li tpl-node="prop:number, prop:maxmin, prop:highlow, prop:optimum"></li>
</ul>

<ul class="_prop" tpl-name="property:space" data-label="空白属性"
    on="vinit|v.sel0;
        build|"
    to="/>li|trigger('value')">
    <li tpl-node="prop:spwidth"></li>
</ul>

<ul class="_prop" tpl-name="property:a" data-label="链接属性"
    on="vinit|v.sel0;
        build|"
    to="(/>li)|trigger('value')">
    <li tpl-node="prop:href, prop:target, prop:title"></li>
</ul>

<ul class="_prop" tpl-name="property:q" data-label="短引用属性"
    on="vinit|v.sel0;
        build|"
    to="/>li|trigger('value')">
    <li tpl-node="prop:cite"></li>
</ul>

<ul class="_prop" tpl-name="property:abbr" data-label="缩写属性"
    on="vinit|v.sel0;
        build|"
    to="/>li|trigger('value')">
    <li tpl-node="prop:title"></li>
</ul>

<ul class="_prop" tpl-name="property:del" data-label="删除属性"
    on="vinit|v.sel0;
        build|"
    to="(/>li)|trigger('value')">
    <li tpl-node="prop:date, prop:time"></li>
    <li tpl-node="prop:cite2"></li>
</ul>

<ul class="_prop" tpl-name="property:ins" data-label="插入属性"
    on="vinit|v.sel0;
        build|"
    to="(/>li)|trigger('value')">
    <li tpl-node="prop:date, prop:time"></li>
    <li tpl-node="prop:cite2"></li>
</ul>

<ul class="_prop" tpl-name="property:code" data-label="代码属性"
    on="vinit|v.sel0;
        build|"
    to="(/>li)|trigger('value')">
    <li tpl-node="prop:tab, prop:lang"></li>
</ul>

<ul class="_prop" tpl-name="property:dfn" data-label="定义词属性"
    on="vinit|v.sel0;
        build|"
    to="/>li|trigger('value')">
    <li tpl-node="prop:title"></li>
</ul>

<ul class="_prop" tpl-name="property:bdo" data-label="方向定义"
    on="vinit|v.sel0;
        build|"
    to="/>li|trigger('value')">
    <li tpl-node="prop:dir"></li>
</ul>

<ul class="_prop" tpl-name="property:blockquote" data-label="引用块属性"
    on="vinit|v.sel0;
        build|"
    to="/>li|trigger('value')">
    <li tpl-node="prop:cite"></li>
</ul>

<ul class="_prop" tpl-name="property:codelist" data-label="代码表属性"
    on="vinit|v.sel0;
        build|"
    to="(/>li)|trigger('value')">
    <li tpl-node="prop:tab, prop:lang, prop:start"></li>
</ul>

<ul class="_prop" tpl-name="property:ol" data-label="有序列表属性"
    on="vinit|v.sel0;
        build|"
    to="(/>li)|trigger('value')">
    <li tpl-node="prop:start, prop:sntype, prop:reversed"></li>
</ul>

<ul class="_prop" tpl-name="property:olx" data-label="有序级联表属性"
    on="vinit|v.sel0;
        build|"
    to="(/>li)|trigger('value')">
    <li tpl-node="prop:start, prop:sntype, prop:reversed"></li>
</ul>

<!--添加一个提示
    delay 跳过当前事件流程以便解绑，避免after后激发nodeok无限循环。-->
<ul class="_prop" tpl-name="property:li" data-label="列表项属性"
    on="vinit|v.sel0;
        build|;
        ^nodeok(~li)|({class:'_tips', text:'（不常用）'}) Element('i')"
    to="(/>li)|trigger('value');
        form/|trigger('apply');
        /[name=type]|after">
    <li tpl-node="prop:value, prop:sntype"></li>
</ul>

<ul class="_prop" tpl-name="property:table" data-label="表格属性"
    on="vinit|v.sel0;
        build|"
    to="(/>li)|trigger('value')">
    <li tpl-node="prop:tborder, prop:vth"></li>
</ul>

<ul class="_prop" tpl-name="property:hr" data-label="分隔线属性"
    on="vinit|v.sel0;
        reset;
        build|"
    to="(/>li)|trigger('value');
        /li:last-child|trigger('reset')">
    <li tpl-node="prop:thick, prop:length, prop:space, prop:hrstyle"></li>
</ul>

<ul class="_prop" tpl-name="property:blank" data-label="白板属性"
    on="vinit|v.sel0;
        build|"
    to="(/>li)|trigger('value')">
    <li tpl-node="prop:width, prop:height"></li>
</ul>

<ul class="_prop" tpl-name="property:explain" data-label="插图讲解属性"
    on="vinit|v.sel0;
        build|"
    to="/>li|trigger('value')">
    <li obt-src="obts/prop2select.json">
        <b>定位</b>
        <span><select data-attr="-pba" name="position" tpl-name="explain:position">
                <option value=""> ------ </option>
                <option value="fix-lt">左上角</option>
                <option value="fix-rt">右上角</option>
                <option value="fix-rb">右下角</option>
                <option value="fix-lb">左下角</option>
            </select>
        </span>
    </li>
</ul>

<ul class="_prop" tpl-name="property:h1" data-label="主标题属性"
    on="vinit|v.sel0;
        build|"
    to="(/>li)|trigger('value')">
    <li tpl-node="prop:id"></li>
</ul>

<ul class="_prop" tpl-name="property:h2" data-label="标题属性"
    on="vinit|v.sel0;
        build|"
    to="/>li|trigger('value')">
    <li tpl-node="prop:id"></li>
</ul>

<ul class="_prop" tpl-name="property:h3" data-label="标题属性"
    on="vinit|v.sel0;
        build|"
    to="/>li|trigger('value')">
    <li tpl-node="prop:id"></li>
</ul>

<ul class="_prop" tpl-name="property:h4" data-label="标题属性"
    on="vinit|v.sel0;
        build|"
    to="/>li|trigger('value')">
    <li tpl-node="prop:id"></li>
</ul>

<ul class="_prop" tpl-name="property:h5" data-label="标题属性"
    on="vinit|v.sel0;
        build|"
    to="/>li|trigger('value')">
    <li tpl-node="prop:id"></li>
</ul>

<ul class="_prop" tpl-name="property:h6" data-label="标题属性"
    on="vinit|v.sel0;
        build|"
    to="/>li|trigger('value')">
    <li tpl-node="prop:id"></li>
</ul>



<!--内联单元：
    微编辑直接插入。
    普通模式下内联单元插入的嵌入引用（部分）。
----------------------------------------------------------------------------->

<!--分项文本：
    内联普通插入引用。 -->
<div class="_prop" tpl-name="inlines:text">
    <hr tpl-node="prop:content" />
</div>


<!-- 音频 -->
<ul class="_prop" data-new="audio" tpl-name="inlines:audio"
    on="create|$('/pre._code') text arr v.mediasubs $('form/') valo('src autoplay loop controls') (true)"
    by="New.audio(_2)"
    to="form/|trigger('insert')">
    <li tpl-node="prop:src"></li>
    <li tpl-node="prop:upload, prop:preview"></li>
    <li tpl-node="prop:mediaopts"></li>
    <li tpl-node="prop:sources1"></li>
</ul>

<!--视频：
    valo(..., null) 避免宽高未设置时空串添加空特性。 -->
<ul class="_prop" tpl-name="inlines:video"
    on="create|$$('/pre._code') text v.mediasubs $('form/') valo('src poster autoplay loop controls width height', null) (true)"
    by="New.video(_2)"
    to="form/|trigger('insert')">
    <li tpl-node="prop:src, prop:poster"></li>
    <li tpl-node="prop:upload, prop:preview"></li>
    <li tpl-node="prop:wh, prop:mediaopts"></li>
    <li tpl-node="prop:sources1, prop:tracks"></li>
</ul>

<!-- 自适应图片 -->
<ul class="_prop" tpl-name="inlines:picture"
    on="create|$('/pre._code') text v.picsubs nil $('form/') valo('src alt width height', null)"
    by="New.img(_1) concat(_1) (null, true) New.picture(_2)"
    to="form/|trigger('insert')">
    <li tpl-node="prop:src, prop:alt"></li>
    <li tpl-node="prop:upload, prop:preview, prop:wh"></li>
    <li tpl-node="prop:sources2"></li>
</ul>

<!-- 轨道 -->
<ul class="_prop" tpl-name="inlines:track">
    <li tpl-node="prop:kind, prop:src, prop:srclang, prop:label"></li>
    <li tpl-node="prop:default"></li>
</ul>

<!-- 媒体资源 -->
<ul class="_prop" tpl-name="inlines:source1">
    <li tpl-node="prop:src, prop:srctype"></li>
</ul>

<!-- 图片资源 -->
<ul class="_prop" tpl-name="inlines:source2">
    <li tpl-node="prop:srcset, prop:media"></li>
</ul>

<!-- 图片 -->
<ul class="_prop" tpl-name="inlines:img"
    on="create|$('form/') valo('src alt width height', null)"
    by="New.img(_1)"
    to="form/|trigger('insert')">
    <li tpl-node="prop:src, prop:alt"></li>
    <li tpl-node="prop:upload, prop:preview, prop:wh"></li>
</ul>

<!--图形：微编辑
    不可用<pre._code>，插入点易转移到<pre>内。 -->
<div class="_prop" tpl-name="inlines:svg"
    on="create|$('/textarea') val dup pass fragment('svg') children(0)"
    to="form/|trigger('insert')">
    <textarea name="content" class="_code" spellcheck="false" placeholder="<svg>...</svg>"></textarea>
</div>

<!-- 链接 -->
<ul class="_prop" obt-src="obts/alink.json" tpl-name="inlines:a"
    on="node|ev('detail')"
    to="form/|trigger('insert')">
    <li tpl-node="prop:text1"></li>
    <li tpl-node="prop:href, prop:target"></li>
    <li tpl-node="prop:title"></li>
</ul>

<!-- 短引用 -->
<ul class="_prop" tpl-name="inlines:q"
    on="create|$('/[name=text]') val dup pass $('form/') valo('cite', null)"
    by="New.q(_1)"
    to="form/|trigger('insert')">
    <hr tpl-node="prop:text1, prop:cite" />
</ul>

<!-- 日期/时间 -->
<ul class="_prop" tpl-name="inlines:times"
    on="create|$('/[name=text]') val $('form/') valo('date time')"
    by="New.time(_1)"
    to="form/|trigger('insert')">
    <li tpl-node="prop:datetext, prop:date, prop:time"></li>
</ul>

<!-- 插入性 -->
<ul class="_prop" tpl-name="inlines:ins"
    on="create|$('/[name=content]') val dup pass $('form/') valo('date time cite')"
    by="New.ins(_1)"
    to="form/|trigger('insert')">
    <li tpl-node="prop:text2"></li>
    <li tpl-node="prop:date, prop:time"></li>
    <li tpl-node="prop:cite2"></li>
</ul>

<!-- 已删除 -->
<ul class="_prop" tpl-name="inlines:del"
    on="create|$('/[name=content]') val dup pass $('form/') valo('date time cite')"
    by="New.del(_1)"
    to="form/|trigger('insert')">
    <li tpl-node="prop:text2"></li>
    <li tpl-node="prop:date, prop:time"></li>
    <li tpl-node="prop:cite2"></li>
</ul>

<!-- 缩写 -->
<ul class="_prop" tpl-name="inlines:abbr"
    on="create|$('/[name=text]') val dup pass $('form/') valo('title', null)"
    by="New.abbr(_1)"
    to="form/|trigger('insert')">
    <li tpl-node="prop:text1, prop:title"></li>
</ul>

<!-- 定义条目 -->
<ul class="_prop" tpl-name="inlines:dfn"
    on="create|$('/[name=text]') val dup pass $('form/') valo('title', null)"
    by="New.dfn(_1)"
    to="form/|trigger('insert')">
    <hr tpl-node="prop:text1, prop:title" />
</ul>

<!-- 量度标示 -->
<ul class="_prop" tpl-name="inlines:meter"
    on="create|$('form/') valo('value max min high low optimum', null)"
    by="New.meter(_1)"
    to="form/|trigger('insert')">
    <li tpl-node="prop:number"></li>
    <li tpl-node="prop:maxmin"></li>
    <li tpl-node="prop:highlow"></li>
    <li tpl-node="prop:optimum"></li>
</ul>

<!-- 有向文本 -->
<ul class="_prop" tpl-name="inlines:bdo"
    on="create|$('/[name=text]') val dup pass $('/[name=dir]') val obj('dir')"
    by="New.bdo(_1)"
    to="form/|trigger('insert')">
    <li tpl-node="prop:text, prop:dir"></li>
</ul>

<!-- 注音单元 -->
<ul class="_prop" tpl-name="inlines:ruby"
    on="create|$('/[name=rb]') val dup pass $('form/') valo('rt rpl rpr')"
    by="New.ruby(_1)"
    to="form/|trigger('insert')">
    <li tpl-node="prop:rb"></li>
    <li tpl-node="prop:rt"></li>
    <li tpl-node="prop:rp"></li>
</ul>

<!--注音单元组：
    内联普通插入，create逻辑不同故单独定义。 -->
<ul class="_prop" tpl-name="item:rbpt">
    <li tpl-node="prop:rb"></li>
    <li tpl-node="prop:rt"></li>
    <li tpl-node="prop:rp"></li>
</ul>

<!-- 空白 -->
<ul class="_prop" tpl-name="inlines:space"
    on="create|$('/[name=width]') val obj('width')"
    by="New.space(_1)"
    to="form/|trigger('insert')">
    <li tpl-node="prop:spwidth"></li>
</ul>

<!-- 换行：未使用New.br -->
<ul class="_prop" tpl-name="inlines:br"
    on="create|elem('br')"
    to="form/|trigger('insert')">
    <li tpl-node="prop:amount"></li>
</ul>

<!-- 软换行：未使用New.wbr -->
<ul class="_prop" tpl-name="inlines:wbr"
    on="create|elem('wbr')"
    to="form/|trigger('insert')">
    <li tpl-node="prop:amount"></li>
</ul>


<!--纯文本单元：不含属性，不采用 New.xxx 创建。-->

<!-- 重点 -->
<div class="_prop" obt-src="obts/etext.json" tpl-name="inlines:strong">
    <textarea name="strong"></textarea>
</div>

<!-- 强调 -->
<div class="_prop" obt-src="obts/etext.json" tpl-name="inlines:em">
    <textarea name="em"></textarea>
</div>

<!-- 下标 -->
<div class="_prop" obt-src="obts/etext.json" tpl-name="inlines:sub">
    <textarea name="sub"></textarea>
</div>

<!-- 上标 -->
<div class="_prop" obt-src="obts/etext.json" tpl-name="inlines:sup">
    <textarea name="sup"></textarea>
</div>

<!-- 注脚 -->
<div class="_prop" obt-src="obts/etext.json" tpl-name="inlines:small">
    <textarea name="small"></textarea>
</div>

<!-- 来源 -->
<div class="_prop" obt-src="obts/etext.json" tpl-name="inlines:cite">
    <textarea name="cite"></textarea>
</div>

<!-- 标记 -->
<div class="_prop" obt-src="obts/etext.json" tpl-name="inlines:mark">
    <textarea name="mark"></textarea>
</div>

<!-- 样本 -->
<div class="_prop" obt-src="obts/etext.json" tpl-name="inlines:samp">
    <textarea name="samp"></textarea>
</div>

<!-- 键盘字 -->
<div class="_prop" obt-src="obts/etext.json" tpl-name="inlines:kbd">
    <textarea name="kbd"></textarea>
</div>

<!-- 失效 -->
<div class="_prop" obt-src="obts/etext.json" tpl-name="inlines:s">
    <textarea name="s"></textarea>
</div>

<!-- 注记 -->
<div class="_prop" obt-src="obts/etext.json" tpl-name="inlines:u">
    <textarea name="u"></textarea>
</div>

<!-- 变量 -->
<div class="_prop" obt-src="obts/etext.json" tpl-name="inlines:var">
    <textarea name="var"></textarea>
</div>

<!-- 代码 -->
<div class="_prop" obt-src="obts/etext.json" tpl-name="inlines:code">
    <textarea name="code" class="_code"></textarea>
</div>

<!-- 表情 -->
<div class="_prop" tpl-name="inlines:orz"
    on="create|$('/textarea') val dup pass"
    by="New.orz"
    to="form/|trigger('insert')">
    <textarea name="code" class="_code"></textarea>
</div>



<!--属性条目：（prop:xxx）
    用于内联单元的普通插入和微编辑，以及属性修改（模态框）。
    注记：
    取值事件（value）仅用到属性编辑框取初始值，
    内容插入面板中不会激发该事件，绑定被克隆但无害。
----------------------------------------------------------------------------->

<li tpl-name="prop:thick"
    on="value|ev('detail') style('borderWidth')"
    to="/input|@value">
    <b title="CSS: border-width">厚度</b>
    <span><input type="text" name="thick" class="_words" /></span>
</li>

<li tpl-name="prop:length"
    on="value|ev('detail') style('width')"
    to="/input|@value">
    <b title="CSS: width">长度</b>
    <span><input type="text" name="length" class="_chars" /></span>
</li>

<li tpl-name="prop:space"
    on="value|ev('detail') style('height')"
    to="/input|@value">
    <b title="CSS: height">空白</b>
    <span><input type="text" name="height" class="_chars" /></span>
</li>

<!--定制处理：
    value 设置当前值，暂存初始值。nil占位click发送用数据。
    reset 手工重置。 -->
<li data-iv="" tpl-name="prop:hrstyle"
    on="value|ev('detail') attr('role') dup slr('/hr', 'role', _1) $(_1) nil pick(-2);
        reset|evo(3) attr('-iv') slr('/hr', 'role', _1) $(_1) pop;
        _ival|ev('detail')"
    to="-|trigger('click')|goto('_ival', _1);
        -|trigger('click');
        |@-iv">
    <b>线型</b>
    <hr tpl-node="hr:border">
</li>

<li obt-src="obts/prop2select.json" tpl-name="prop:sntype">
    <b title="type">类型</b>
    <span><select name="type">
            <option value=""> ------ </option>
            <option>1</option>
            <option>a</option>
            <option>A</option>
            <option>i</option>
            <option>I</option>
        </select>
    </span>
</li>

<li obt-src="obts/prop1.json" tpl-name="prop:start">
    <b>起始行</b>
    <span><input type="text" name="start" class="_chars" placeholder="1" /></span>
</li>

<!-- 适用：<li> -->
<li obt-src="obts/prop1.json" tpl-name="prop:value">
    <b>行编号</b>
    <span><input type="text" name="value" class="_chars" placeholder="1" /></span>
</li>

<li tpl-name="prop:reversed"
    on="value|ev('detail') prop('reversed')"
    to="/input|$defaultChecked">
    <b>编号</b>
    <span><label><input type="checkbox" name="reversed" />逆序</label></span>
</li>

<li obt-src="obts/prop2select.json" tpl-name="prop:tborder">
    <b>边框</b>
    <span><select name="border" tpl-node="table:border"></select></span>
</li>

<li tpl-name="prop:vth"
    on="value|ev('detail') table dup pop(2) call('hasVth') call('hasVth', true) pack(2)"
    to="(/input)|$defaultChecked">
    <b>列表头</b>
    <span>
        <label><input type="checkbox" name="th0" />列首</label>
        <label><input type="checkbox" name="th1" />列尾</label>
    </span>
</li>

<li tpl-name="prop:capwhere">
    <b>标题位置</b>
    <span><label><input type="checkbox" name="capbelow" />在表格下部</label></span>
</li>

<li obt-src="obts/prop1.json" tpl-name="prop:href">
    <b title="href">链接目标</b>
    <span><input type="text" name="href" /></span>
</li>

<li obt-src="obts/prop2select.json" tpl-name="prop:target">
    <b title="target">目标</b>
    <span><select name="target">
            <option value=""> ------ </option>
            <option value="_blank">_blank</option>
            <option value="_parent">_parent</option>
            <option value="_top">_top</option>
            <option value="_self">_self</option>
        </select>
    </span>
</li>

<li obt-src="obts/prop1.json" tpl-name="prop:src">
    <b title="src">源路径</b>
    <span><input type="text" name="src" /></span>
</li>

<li obt-src="obts/prop1.json" tpl-name="prop:alt">
    <b title="alt">说明</b>
    <span><input type="text" name="alt" /></span>
</li>

<li tpl-name="prop:wh"
    on="value|ev('detail') attrs('width height')"
    to="(/input)|@value">
    <b>宽/高度</b>
    <span>
        <input type="text" name="width" placeholder="width" class="_nums" />
        x
        <input type="text" name="height" placeholder="height" class="_nums" />
        像素
    </span>
</li>

<!--音频/视频用
    data-iv 缓存当前的初始值（供表单reset用）。
    注记：
    资源和字幕轨元素不可视，不能通过属性编辑方式修改。故提供文本对象方式设置。-->
<li tpl-name="prop:sources1"
    on="value|ev('detail') children('source') attribute('src type') json(4) dup;
        reset|$('/pre') attr('-iv')"
    to="/pre|@-iv text;
        /pre|text">
    <b title="<source>">候选资源</b>
    <span
        on="^nodeok|(`[ {src: '...', type: '...'}, ... ]`)"
        to="/pre|@-tip">
        <pre tpl-node="prop:codes"></pre>
    </span>
</li>

<!-- 值为null的特性忽略 -->
<li tpl-name="prop:tracks"
    on="value|ev('detail') children('track') attribute('kind srclang src label default') clean(null) json(4) dup;
        reset|$('/pre') attr('-iv')"
    to="/pre|@-iv text;
        /pre|text">
    <b title="<track>">字幕轨</b>
    <span
        on="^nodeok|(`[ {kind, srclang, src, label, default?: ''}, ... ]`)"
        to="/pre|@-tip">
        <pre tpl-node="prop:codes"></pre>
    </span>
</li>

<!-- 自适应图片用 -->
<li tpl-name="prop:sources2"
    on="value|ev('detail') children('source') attribute('srcset media') json(4) dup;
        reset|$('/pre') attr('-iv')"
    to="/pre|@-iv text;
        /pre|text">
    <b title="<source>">候选图片</b>
    <span
        on="^nodeok|(`[ {srcset: '...', media: '...'}, ... ]`)"
        to="/pre|@-tip">
        <pre tpl-node="prop:codes"></pre>
    </span>
</li>

<!--宽度：
    从特性或内联样式上取值。适用图片<img>和白板<div> -->
<li obt-src="obts/prop2.json" tpl-name="prop:width">
    <b title="width">宽度</b>
    <span><input type="text" name="width" placeholder="90%" class="_chars"></span>
</li>

<!-- 高度：（同上） -->
<li obt-src="obts/prop2.json" tpl-name="prop:height">
    <b title="height">高度</b>
    <span><input type="text" name="height" placeholder="90%" class="_chars"></span>
</li>

<li obt-src="obts/prop1.json" tpl-name="prop:id">
    <b>ID定义</b>
    <span><input type="text" name="id" class="_phrase"></span>
</li>

<li obt-src="obts/prop1.json" tpl-name="prop:poster">
    <b title="poster">视频画面</b>
    <span><input type="text" name="poster" placeholder="(poster)" /></span>
</li>

<li tpl-name="prop:mediaopts"
    on="value|ev('detail') props('autoplay loop controls')"
    to="(/input)|$defaultChecked">
    <b>设置</b>
    <span>
        <label><input type="checkbox" name="autoplay" />自动播放</label>
        <label><input type="checkbox" name="loop" />循环播放</label>
        <label><input type="checkbox" name="controls" checked />显示控件</label>
    </span>
</li>

<li tpl-name="prop:open"
    on="value|ev('detail') prop('open')"
    to="/input|$defaultChecked">
    <b><!-- 占位 --></b>
    <span><label><input type="checkbox" name="open" />详细展开</label></span>
</li>

<li class="_upload" tpl-name="prop:upload">
    <b>上传</b>
    <span><input type="file" name="upload" value=""
            @on="change|evo(3) val"
            @by="x.Upload.go" />
    </span>
</li>

<li tpl-name="prop:preview">
    <b>预览</b>
    <span class="_preview"><!-- img|video|audio --></span>
</li>

<li tpl-name="prop:kind">
    <b title="kind">种类</b>
    <span><select name="kind">
            <option title="subtitles" value="subtitles">字幕</option>
            <option title="captions" value="captions">隐式信息</option>
            <option title="descriptions" value="descriptions">内容描述</option>
            <option title="chapters" value="chapters">章节</option>
            <option title="metadata" value="metadata">源数据</option>
        </select>
    </span>
</li>

<li tpl-name="prop:srclang">
    <b title="srclang">源语言</b>
    <span><input type="text" name="srclang" class="_chars" /></span>
</li>

<li tpl-name="prop:label">
    <b title="label">标签</b>
    <span><input type="text" name="label" class="_phrase" /></span>
</li>

<li tpl-name="prop:default">
    <b><!-- [track] --></b>
    <span>
        <label><input type="checkbox" name="default" value="" />设为默认</label>
    </span>
</li>

<li tpl-name="prop:srctype">
    <b title="MIME-Type">类型</b>
    <span><input type="text" name="type" class="_phrase" /></span>
</li>

<li tpl-name="prop:srcset">
    <b title="srcset">资源定义</b>
    <span><input type="text" name="srcset" /></span>
</li>

<!-- <source media> -->
<li tpl-name="prop:media">
    <b title="media">媒体查询</b>
    <span><input type="text" name="media" class="_phrase" /></span>
</li>

<li tpl-name="prop:heading">
    <b>标题</b>
    <span><input type="text" name="heading" placeholder="无标题请置空"></span>
</li>

<!-- 单行文本 -->
<li tpl-name="prop:text">
    <b>文本</b>
    <span><input type="text" name="text" /></span>
</li>

<!-- 单行文本：定宽 -->
<li tpl-name="prop:text1">
    <b>文本</b>
    <span><input type="text" name="text" class="_phrase" /></span>
</li>

<li obt-src="obts/prop1.json" tpl-name="prop:cite">
    <b title="cite">引用来源</b>
    <span><input type="url" name="cite"  placeholder="https://" /></span>
</li>

<li obt-src="obts/prop1.json" tpl-name="prop:cite2">
    <b title="cite">解释源</b>
    <span><input type="url" name="cite"  placeholder="https:// (可选)" /></span>
</li>

<li tpl-name="prop:figcapwhere">
    <b>标题位于</b>
    <span><label><input type="checkbox" name="figcapbelow" value="below" />在图画之下</label></span>
</li>

<li tpl-name="prop:rb">
    <b>文本</b>
    <span><input type="text" name="rb" placeholder="<rb>" class="_phrase" /></span>
</li>

<li tpl-name="prop:rt"
    on="value|ev('detail') text join(' ')"
    to="/input|@value">
    <b>拼音</b>
    <span><input type="text" name="rt" placeholder="<rt>" /></span>
</li>

<!--仅友好提示：
    由程序配置以支持<ruby>的格式化解析创建。-->
<li tpl-name="prop:rp">
    <b>&lt;rp&gt;</b>
    <span data-pbo="disabled"
        on="^obted|([Sys.rpLeft, Sys.rpRight])"
        to="(/input)|@value">
        <label><input type="text" name="rpl" class="_char" disabled /></label>
        <label><input type="text" name="rpr" class="_char" disabled /></label>
    </span>
</li>

<!-- 日期/时间文本 -->
<li tpl-name="prop:datetext">
    <b>文本</b>
    <span><input type="text" name="text" placeholder="（可选）" /></span>
</li>

<li tpl-name="prop:date"
    on="value|ev('detail') attr('datetime') dup vnot jump(2) Date datetime('yyyy-MM-dd')"
    to="/input|@value">
    <b>日期</b>
    <span><input type="date" name="date" placeholder="yyyy-MM-dd"></span>
</li>

<li tpl-name="prop:time"
    on="value|ev('detail') attr('datetime') dup vnot jump(2) Date time"
    to="/input|@value">
    <b>时间</b>
    <span><input type="time" name="time" placeholder="hh:mm:ss"></span>
</li>

<li obt-src="obts/prop1.json" tpl-name="prop:number">
    <b title="value">数值</b>
    <span><input type="text" name="value" class="_chars" /></span>
</li>

<li tpl-name="prop:maxmin"
    on="value|ev('detail') attrs('max min')"
    to="(/input)|@value">
    <b>最大/最小值</b>
    <span>
        <input type="text" name="max" placeholder="max" class="_nums" />
        <input type="text" name="min" placeholder="min" class="_nums" />
    </span>
</li>

<li tpl-name="prop:highlow"
    on="value|ev('detail') attrs('high low')"
    to="(/input)|@value">
    <b>高/低值</b>
    <span>
        <input type="text" name="high" placeholder="high" class="_nums" />
        <input type="text" name="low" placeholder="low" class="_nums" />
    </span>
</li>

<li obt-src="obts/prop1.json" tpl-name="prop:optimum">
    <b title="optimum">最佳值</b>
    <span><input type="text" name="optimum" class="_nums" /></span>
</li>

<!--三步：
    1. 初始设置。or(null) 容错空值特性。
    2. 清理默认。
    3. 设置值设置为默认（重置正确）。 -->
<li tpl-name="prop:dir"
    on="value|ev('detail') attr('dir') or(null);
        _clear|(false);
        _defchk|(true) $('/input') prop('checkedNode') dup pass pop"
    to="/input|val|goto('_clear');
        (/input)|$defaultChecked|goto('_defchk');
        -|$defaultChecked">
    <b title="dir">方向</b>
    <span>
        <label title="ltr"><input type="radio" name="dir" value="ltr">从左到右</label>
        <label title="rtl"><input type="radio" name="dir" value="rtl">从右到左</label>
    </span>
</li>

<li data-pbo="disabled" tpl-name="prop:amount">
    <b>数量</b>
    <span><input type="text" class="_nums" value="1" disabled /></span>
</li>

<li obt-src="obts/prop1.json" tpl-name="prop:title">
    <b title="title">信息提示</b>
    <span><input type="text" name="title" /></span>
</li>

<li tpl-name="prop:spwidth"
    on="value|ev('detail') style('width')"
    to="/input|@value">
    <b>空白宽</b>
    <span><input type="text" name="width" class="_chars" placeholder="2.45em" /></span>
</li>

<li tpl-name="prop:tab"
    on="value|ev('detail') attr('-tab')"
    to="/input|@value">
    <b>制表符</b>
    <span><input type="text" name="tabs" class="_char" value="4" title="空格数"></span>
</li>

<!--三步：
    1. 清理默认<option>。
    2. 设置选单条目。
    3. 设置默认<option>。 -->
<li obt-src="obts/prop2select.json" tpl-name="prop:lang">
    <b>语言</b>
    <span><select data-attr="-lang" tpl-node="prop:languages"></select></span>
</li>

<li class="_text2" tpl-name="prop:text2">
    <b>文本</b>
    <span><textarea name="content" rows="3"></textarea></span>
</li>

<!-- 纯文本录入 -->
<textarea name="content" placeholder="空行分项（多选对应）" tpl-name="prop:content"></textarea>

<!--源码录入：
    初始为空时粘贴自动清除多余缩进，加按Shift取消此功能。
    适用：代码类/颜文字/预排版。
    keydown 插入真实换行或Tab空格序列（需要处理换行后的光标兼容性）。
    paste   粘贴内容，转换后按HTML方式插入，避免浏览器智能行为（不兼容）。
    keydown 设置Shift键标记，决定是否清除多余缩进。
    keydown SCAM...禁止3个浏览器编辑快捷键（创建<b><i><u>）。兼容性：windows, MacOS。
    keyup   清除Shift标记，注意应当是false（非null）。
    codes   由外部发送消息填充代码内容到光标处。注：需先点击，否则可能插入其它活动位置。
    mouseup keyup... 当前光标点记忆，否则codes递送只能插入前端。
    另：
    data-tip 初始录入提示（CSS:content:attr）。
-->
<pre spellcheck="false" class="_code" contenteditable="true" tpl-name="prop:codes"
    data-tip="粘贴时自动清除多余缩进"
    on="keydown|ev('key') pass('Enter', 'Tab', 'Backspace') stop evo(3) ev('key') sRange $('form/[name=tabs]') scam(KM.backspaceMore) v.k3edit(_4) dup pass avoid exeCmd('insertHTML', _1);
        paste|avoid clipboard env('paste.shift') v.indentcut(_1) html exeCmd('insertHTML', _1);
        keydown|ev('shiftKey') pass stop env('paste.shift', true);
        keydown|SCAM('ctrl', 'meta') pass iskey(6) pass avoid;
        keyup|env('paste.shift', false);
        codes|ev('detail') html xRange addRange edbox pop exeCmd('insertHTML', _1);
        mouseup input keyup focus|sRange pop xRange"
    by="evo(3) iskey('Enter') sRange Kit.blankline(_2)"></pre>


<!--代码语言清单
    data-id     用于$$统一检索。
    data-attr   用于属性修改中，统一取目标特性。
    normal      普通代码，仅标记字符串和注释（//）。-->
<select id="g-languages" data-id="code" data-attr="-lang" name="language" tpl-name="prop:languages">
    <option value=""> ------ </option>
    <option value="normal">Normal</option>
    <option value="golang">Golang</option>
    <option value="cplus">C/C++</option>
    <option value="javascript">JavaScript</option>
    <option value="css">CSS</option>
    <option value="html">HTML</option>
</select>


<!-- 两个定制结构 -->

<ul class="_prop" tpl-name="prop:xolah4li">
    <li tpl-node="prop:text1"></li>
    <li tpl-node="prop:href, prop:target, prop:title"></li>
    <li><b>子列表</b>
        <span>
            <textarea name="sublist" rows="5" placeholder="（空行分项）"></textarea>
        </span>
    </li>
</ul>

<!--插图内容块：图形/图片切换
    svg 显示SVG源码录入框。
    img 显示普通图片录入条目清单。
    to:
    见 input:figimgbox 模板定义。
-->
<ul class="_prop" tpl-name="prop:figimgbox"
    on="svg|evo(3) children not(':last-child') lose(true) $('/li') lose(false) ('svg');
        img|evo(3) children not(':last-child') lose(false) $('/li') lose(true) ('img')"
    to="._body/[name=type]|val;
        ._body/[name=type]|val">
    <li data-pbo="lost">
        <b>源码</b>
        <!-- 录入提示类别 -->
        <span on="^nodeok|('<svg>...</svg>')" to="/pre|@-tip">
            <pre tpl-node="prop:codes"></pre>
        </span>
    </li>
    <li tpl-node="prop:src, prop:alt"></li>
    <li tpl-node="prop:upload, prop:preview, prop:wh"></li>
    <li><b>讲解</b>
        <span><textarea name="explain" rows="4" placeholder="（可选）"></textarea></span>
    </li>
</ul>
