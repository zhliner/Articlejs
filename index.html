<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta http-equiv="no-cache">
<title>Coolj-ED编辑器在线版</title>
<link rel="shortcut icon" href="favicon.ico">
<link rel="stylesheet" href="styles.css">
<script src="base/tquery/tquery.min.js"></script>
<style>
/* 编辑器最大化 */
#editorBox._full > iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100% !important;
    height: 100% !important;
}
</style>
<script type="module">
    import { Tpb } from "./base/tpb/tpb.esm.js";
    import coolj from "./editor.js";

    let _ebox = $.get( '#editorBox' ),
        _fmax = [
            () => $.removeClass( _ebox, '_full' ),
            () => $.addClass( _ebox, '_full' )
        ],
        _opts = {
            onsaved: html => window.console.info(html),
            onmaximize: num => _fmax[num](),
        },
        _edor = null;

    coolj.create( _opts )
        .init( _ebox )
        .then( ed => _edor = ed )
        .then( ed => ed.frame().contentWindow.focus() );

    // Tpb支持。
    Tpb.init()
        .build( document.body )
        .then( tr => window.console.info('build done!', tr) );
</script>
</head>
<body>
    <form onsubmit="return false" action="">
        <textarea name="content" style="display: none;"></textarea>
        <main>
            <h1>◡酷几◡编辑器在线版</h1>
            <nav
                on="click(>b)|evo(1) attr('-url')"
                by="GET('text', _1) fragment pop $('/main.content') children not('nav')"
                to="1/iframe|trigger('cimport')">
                <b title="单击导入" data-url="docs/intro.html">简介</b>
                <b title="单击导入" data-url="docs/manual.html">操作手册</b>
                <b title="单击导入" data-url="docs/article.html">文章结构规范</b>
                <span>
                    <label>主题</label>
                    <select name="themes">
                        <option value="Dark-less">蓝调的传说</option>
                        <option value="classic-gray">经典50度灰</option>
                        <option value="Dark-less">光明之夜</option>
                    </select>
                    <a title="制作包">?</a>
                </span>
                <span>
                    <label>内容样式</label>
                    <select name="styles">
                        <option value="">乡愁</option>
                        <option value="">平庸的白暮</option>
                        <option value="">旷野无垠</option>
                    </select>
                    <a title="制作包">?</a>
                </span>
            </nav>
            <span id="editorBox"><!-- 编辑器容器 --></span>
        </main>
    </form>
</body>
</html>
