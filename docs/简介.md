# 快速入门

- `F4`：大纲面板*隐显*切换。
- `F3`：下方功能区主面板*隐显*切换。
- `F2`：**焦取独立**：内部暂存当前已选取成员，单选焦点元素。再次*按键*则恢复暂存的选取。
- `F1`：右侧帮助面板*隐显*切换。

- `F6`：内容区底部焦点元素DOM路径提示栏*隐显*切换。
- `F7`：打开插件对话框（按 `ESC` 键可取消）。
- `F8`：内容区聚焦。
- `F9`：当前在显主面板（大纲、功能区、帮助）状态切换，方便用户充分预览内容区。
- `F10`：当前窗口最大化切换。

- `单击`：鼠标**单击**选取目标元素，如果单击的同时按住 `Ctrl` 键则为*多选/切换*选取。
- `M`：进入**修订**（Modify）模式，修改目标元素内的内容。按回车（`Enter`）键确认。
- `U` / `R`：各种撤销（`Undo`）与重做（`Redo`）。
- `Ctrl+S`：保存文章内容到浏览器本地，重新打开或*刷新*页面即会自动载入。
- `ESC`：各种*取消*。支持 `选取集`、`上下文菜单`、`内联创建菜单`、`模态框`、`修订模式`、`前置数字`、`录入框平铺` 等。


## 内容区和功能区

除了左右两侧的辅助面板（左：大纲视图；右：在线帮助），中间区域由上下两个部分构成。

上方是包含顶部**工具栏**和底部**路径**提示的文章内容区，文章内容会按真实的样式渲染（真正的所见即所得）。单击任意目标（段落、文本、图片、媒体等）可选取该目标，然后用特定的热键执行各种操作，如删除、转换、移动、复制、属性修改、在目标前后插入新的内容等等。

下方是编辑器的功能区，包含了**内容**录入、内联**样式**设置、目标元素**特性**管理（添加、删除）、目标元素**源码**显示、修改，以及高级的**脚本**执行等5个子面板。


### 内容区录入

本编辑器中的文章内容并不是任意结构的HTML源码。在HTML中，文章的段落由一个 `<p>` 标签封装，有序列表由一个 `<ol>` 加无数个 `<li>` 子元素封装，子章节由一个 `<section>` 和一个 `<h2>` 标题以及任意数量的多种内容单元构成……由此可知，不同的内容单元需要遵循特定的结构逻辑。

因此，在一个内容单元前后或内部**可以插入什么**，是存在**结构约束**的。

选取目标单元后，可以在其前后插入的内容单元会在录入面板的左侧罗列出来。如果需要向内插入，切换列表框顶部的选单即可，这样系统会根据目标单元的类型罗列出可以向内插入的内容单元。

单击清单中的条目，右侧的区域就会显示插入需要使用的文本框或各种控件（就像普通的表单提交）。

> #### 设计理由：
>
> 用额外的文本框（和表单控件）而不是在内容区直接编辑来录入内容，是一种必要的复杂化设计。
>
> 它增加的复杂性并不太多，但却可提供严格的结构逻辑，让内容区的源码结构规范，因此也避免了浏览器兼容性和浏览器自身编辑设计带来的不完美。
>
> 通过这样严格结构化的内容录入，实际上会让文章的源码最大幅度精简，甚至做到了没有冗余。
>
> 另外，基于严格结构的源码，还做到了让外部样式可以共享而不会有任何问题。


### 划选创建

在内容区中，除了已选取元素的上下文菜单之外，我们可以通过鼠标划选目标文本来创建内联单元（如重点 `<strong>`、强调 `<em>`、代码 `<code>`、标记 `<mark>` 等等）。鼠标划选之后会自动弹出一个小创建面板（类似于上下文菜单），单击其中条目或键入快捷键（部分可用）即可。**注意**：划选的内容必须完整嵌套，否则不会弹出创建面板。


### 普通模式

编辑器自然呈现的状态，就是普通模式。单击内容区任意目标即可选中目标，此时通常会有UI上的表现（依主题的样式设计不同而不同）。之后即可执行各种操作。

> #### 提示：
>
> 单击编辑器上方左侧的操作手册链接即可导入该文章到内容区，在此基础上可尝试任意编辑操作，包括撤销和重做。
>
> 文章内容的导入也在编辑的历史栈中，因此也可以通过撤销恢复导入之前的内容区状态。


#### 焦点移动

可以用4个箭头键移动当前的**选取焦点**（非DOM节点焦点），默认箭头键采用Vim编辑习惯中的 `hjkl` 表达箭头方向。

- `K`：向上箭头。平级移动，定位到前一个（`prev`）兄弟元素。
- `J`：向下箭头。平级移动，定位到下一个（`next`）兄弟元素。
- `H`：向左箭头。纵向移动，定位到父元素（*父级方向*）。
- `L`：向右箭头。纵向移动，定位到首个子元素（*子级方向*）。

> #### 注意：
>
> 需要在编辑器或内容区拥有浏览器DOM节点焦点时，热键才有效（可激发 `keydown` 事件）。单击编辑器任意位置可以聚焦到编辑器，单击顶部工具栏或热键 `F8` 可聚焦到主内容区。


#### 单选与多选

鼠标简单点击目标会单选目标元素，如果点击的同时按住 `Ctrl` 键则为多选/切换逻辑。

- **单选**：选取目标元素的同时，取消其它已选取元素。
- **切换**：针对目标元素，已选取则为取消选取，未选取则为选取。不影响其它已选取元素。

在内容区拥有浏览器焦点时，按 `Enter` 键为单选当前焦点元素，按空格键（`Space`）键则为多选/切换。

更详细的选取操作和编辑操作请参考上方的操作手册……此略。



## 修订模式

如果需要对已经录入的内容（内容区）进行修改，可键入 `M` 热键进入修订状态，此时就是浏览器自身的编辑功能支持。但在此模式下，浏览器自身实现的编辑功能被严格限制，以避免不同浏览器带来的兼容性问题。比如回车键（`Enter`）的换行功能就被屏蔽，修改为确认键（即确认修改的内容并退出修订模式）。

浏览器编辑功能中 `Shift+Enter` 的 `<br>` 插入依然被保留，因为大部分浏览器都是这一行为。但粘贴的内容会被转化为纯文本，以消除原始HTML带来的影响。

另外，回车键可以通过加按辅助键 `Ctrl` 和 `Alt` 获得两种智能换行功能：前者是新建一个同类新行（比如在 `<p>` 中修订时，`Ctrl+Enter` 会新建一个 `<p>` 元素），后者则是新建一个逻辑新行（比如在 `<dt>` 中修订时，`Alt+Enter` 会新建一个 `<dd>` 新行）。两种新建方式中，原来编辑的行都会被自动确认。

修订内容确认之后，其改变会作为一个整体撤销（`U` 键）或重做（`R` 键）。

如果在修订模式下想取消修改并退出修订，可简单的按 `ESC` 键即可。这也是取消大部分临时状态的热键，比如模态框、当前选取、前置数量（对某一操作的前置计数）等。



## 内容源码导出

HTML是一个开放的标准，因此结构精简、版式美观的文章可以轻易地导出。Chrome浏览器的DevTools工具可以查看页面的源码并复制节点，但编辑器本身也提供导出源码的能力，并且可以格式化为良好的缩进。

- `Alt+P`：导出选取单元或全文内容源码，会自动打开导出对话框。
- `Alt+Shift+P`：导出全文内容源码，同时会在适当的位置插入文章目录（大纲）。

前一个导出是针对选取集成员的，如果内容区无选取（可按 `ESC`）则导出全部内容。后一种增强导出仅针对全部内容，无论当前是否已有选取。
