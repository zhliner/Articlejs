<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>编辑器操作手册</title>
<link rel="stylesheet" href="../styles/example/main.css" />
<link rel="stylesheet" href="../styles/example/codes.css" />
<link rel="stylesheet" href="../base/tpb/default.css" />
<style>
    body {
        margin: 0;
    }
    main {
        width: 800px;
        margin-left: 21em;
    }
</style>
</head>
<body>
    <main class="content">
        <h1>快速入门</h1>
        <nav role="toc">
            <h3>目录</h3>
            <ol role="cascade">
                <li>
                    <h4><a>内容区和功能区</a></h4>
                    <ol>
                        <li><a>内容区录入</a></li>
                        <li><a>划选创建</a></li>
                        <li>
                            <h4><a>普通模式</a></h4>
                            <ol>
                                <li><a>焦点移动</a></li>
                                <li><a>选取切换</a></li>
                            </ol></li>
                    </ol></li>
                <li><a>修订模式</a></li>
                <li><a>内容源码导出</a></li>
            </ol>
        </nav>
        <article>
            <section role="s1">
                <h2>内容区和功能区</h2>
                <header>
                    <p>除了左右两侧的辅助面板（左：大纲视图；右：在线帮助），中间区域由上下两个部分构成。</p>
                    <p>上方是包含顶部工具栏和底部路径提示的文章内容区，文章内容会按真实的样式渲染（真正的所见即所得）。单击任意目标（段落、文本、图片、媒体等）可选取该目标，然后用特定的热键执行各种操作，如删除、转换、移动、复制、属性修改、在目标前后插入新的内容等等。</p>
                    <p>下方是编辑器的功能区，包含了内容录入、内联样式设置、目标元素特性管理（添加、删除）、目标元素源码显示、修改，以及高级的脚本执行等5个子面板。</p>
                </header>
                <section role="s2">
                    <h2>内容区录入</h2>
                    <p>本编辑器中的文章内容并不是任意结构的HTML源码。在HTML中，文章的段落由一个<code>&lt;p&gt;</code>标签封装，有序列表由一个<code>&lt;ol&gt;</code>加无数个<code>&lt;li&gt;</code>子元素封装，子章节由一个<code>&lt;section&gt;</code>和一个<code>&lt;h2&gt;</code>标题以及任意数量的多种内容单元构成……由此可知，不同的内容单元需要遵循特定的结构逻辑。</p>
                    <p>因此，在一个内容单元前后或内部<strong>可以插入什么</strong>，是存在<strong>结构约束</strong>的。</p>
                    <p>选取目标单元后，可以在其前后插入的内容单元会在录入面板的左侧罗列出来。如果需要向内插入，切换列表框顶部的选单即可，这样系统会根据目标单元的类型罗列出可以向内插入的内容单元。</p>
                    <p>单击清单中的条目，右侧的区域就会显示插入需要使用的文本框或各种控件（就像普通的表单提交）。</p>
                    <aside>
                        <h3>设计理由：</h3>
                        <p>用额外的文本框（和表单控件）而不是在内容区直接编辑来录入内容，是一种必要的复杂化设计。</p>
                        <p>它增加的复杂性并不太多，但却可提供严格的结构逻辑，让内容区的源码结构规范，因此也避免了浏览器兼容性和浏览器自身编辑设计带来的不完美。</p>
                        <p>通过这样严格结构化的内容录入，实际上会让文章的源码最大幅度地精简，甚至做到了没有任何冗余。</p>
                        <p>另外，基于严格结构的源码，我们做到了让外部样式可以共享而不会有任何问题。</p>
                    </aside>
                </section>
                <section role="s2">
                    <h2>划选创建</h2>
                    <p>在内容区中，除了已选取元素的上下文菜单之外，我们可以通过鼠标划选目标文本来创建内联单元（如重点<code>&lt;strong&gt;</code>、强调<code>&lt;em&gt;</code>、代码<code>&lt;code&gt;</code>、标记<code>&lt;mark&gt;</code>等等）。鼠标划选之后会自动弹出一个小创建面板（类似于上下文菜单），单击其中条目或键入快捷键（部分可用）即可。<strong>注意</strong>：划选的内容必须完整嵌套，否则不会弹出创建面板。</p>
                </section>
                <section role="s2">
                    <h2>普通模式</h2>
                    <header>
                        <p>编辑器自然呈现的状态，就是普通模式。单击内容区任意目标即可选中目标，此时通常会有UI上的表现（依主题的样式设计不同而不同）。之后即可执行各种操作。</p>
                        <aside>
                            <h3>提示：</h3>
                            <p>单击编辑器上方左侧的操作手册链接即可导入该文章到内容区，在此基础上可尝试任意编辑操作，包括撤销和重做。</p>
                            <p>文章内容的导入也在编辑的历史栈中，因此也可以通过撤销恢复导入之前的内容区状态。</p>
                        </aside>
                    </header>
                    <section role="s3">
                        <h2>焦点移动</h2>
                        <p>可以用4个箭头键移动当前的<strong>选取焦点</strong>（非DOM节点焦点），默认箭头键采用Vim编辑习惯中的<code style="font-weight: bold; color: rgb(204, 0, 102);">hjkl</code>表达箭头方向。</p>
                        <ul>
                            <li><kbd>k</kbd>向上箭头。平级移动，定位到前一个（<code>prev</code>）兄弟元素。</li>
                            <li><kbd>j</kbd>向下箭头。平级移动，定位到下一个（<code>next</code>）兄弟元素。</li>
                            <li><kbd>h</kbd>向左箭头。纵向移动，定位到父元素（<strong>父级方向</strong>）。</li>
                            <li><kbd>l</kbd>向右箭头。纵向移动，定位到首个子元素（<strong>子级方向</strong>）。</li>
                        </ul>
                        <aside>
                            <h3>注意：</h3>
                            <p>需要在编辑器或内容区拥有浏览器DOM节点焦点时，热键才有效（可激发<code>keydown</code>事件）。
        单击编辑器任意位置可以聚焦到编辑器，单击顶部工具栏或热键<kbd>F8</kbd>可聚焦到主内容区。</p>
                        </aside>
                    </section>
                    <section role="s3">
                        <h2>选取切换</h2>
                        <p>空格键（<code>Space</code>）和回车键（<code>Enter</code>）对当前焦点元素进行选取切换。如果需要多选，可按住<code>Ctrl</code>键后单击目标元素，再次单击也为取消选取（切换）。</p>
                        <p>更详细的选取操作和编辑操作请参考上方的操作手册……此略。</p>
                    </section>
                </section>
            </section>
            <section role="s1">
                <h2>修订模式</h2>
                <p>如果需要对已经录入的内容（内容区）进行修改，可键入<code>m</code>热键进入修订状态，此时就是浏览器自身的编辑功能支持。但在此模式下，浏览器自身实现的编辑功能被严格限制，以避免不同浏览器带来的兼容性问题。比如回车键（<code>Enter</code>）的换行功能就被屏蔽，修改为确认键（即确认修改的内容并退出修订模式）。</p>
                <p>浏览器编辑功能中<code>Shift+Enter</code>的<code>&lt;br&gt;</code>插入依然被保留，因为大部分浏览器都是这一行为。但粘贴的内容会被转化为纯文本，以消除原始HTML带来的影响。</p>
                <p>另外，回车键可以通过加按辅助键<code>Ctrl</code>和<code>Alt</code>获得两种智能换行功能：前者是新建一个同类新行（比如在<code>&lt;p&gt;</code>中修订时，<code>Ctrl+Enter</code>会新建一个<code>&lt;p&gt;</code>元素），后者则是新建一个逻辑新行（比如在<code>&lt;dt&gt;</code>中修订时，<code>Alt+Enter</code>会新建一个<code>&lt;dd&gt;</code>新行）。两种新建方式中，原来编辑的行都会被自动确认。</p>
                <p>修订内容确认之后，其改变会作为一个整体撤销（<code>u</code>键）或重做（<code>r</code>键）。</p>
                <p>如果在修订模式下想取消修改并退出修订，可简单的按<code>ESC</code>键即可。这也是取消大部分临时状态的热键，比如模态框、当前选取、前置数量（对某一操作的前置计数）等。</p>
            </section>
            <section role="s1">
                <h2>内容源码导出</h2>
                <p>HTML是一个开放的标准，因此虽然文章版式美观，结构精简，它不是封闭的专有技术。你可以将文章的内容源码简单地导出（虽然用浏览器的<em>DevTools</em>也可以做到这一点），并格式化为缩进良好的最终源码。</p>
                <ul>
                    <li><code>Alt+p</code>导出内容区源码。</li>
                    <li><code>Alt+Shift+p</code>导出内容区源码，同时会自动将文章的大纲（目录）插入到适当的位置。</li>
                </ul>
                <p>前一个普通导出是针对选取的目标的，如果要导出全部内容，需要在无选取的状态（按<code style="font-weight: bold; color: rgb(204, 0, 102);">ESC</code>即可）下执行。后一种增强导出仅针针对全部内容，无论当前是否已有选取。</p>
            </section>
        </article>
    </main>
</body>
</html>