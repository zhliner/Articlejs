# $.replace( node, cons, clone, event, eventdeep ): Node | [Node]

用数据源节点（集）替换 `node` 元素或文本节点。数据源节点集支持数组、`Set` 集合、`Collector` 实例、或是一个返回节点的迭代器，也可以是一个返回节点（集）的取值回调。不支持 `html` 字符串形式（请使用 `.html` 接口）。


## 参数

### node: {Node}

替换节点（集）的目标节点。


### cons: {Node|[Node]|Collector|Set|Iterator|Function}

替换的节点（集）数据源。后续的克隆参数针对整个节点集。也可以是一个返回节点（集）的取值回调，接口为：`function( node ): Node | [Node]`，实参为目标节点。


### clone: {Boolean}

数据源节点（集）是否为克隆方式，适用于文本节点和元素，元素为深层克隆。


### event: {Boolean}

是否同时克隆集合中元素上注册的事件处理器。


### eventdeep: {Boolean}

是否深层克隆集合中元素内子孙元素上注册的事件处理器。


## 示例

```html
<section id="s0"">
    <p>首个段落。</p>
    <p>第二个段落。</p>
</section>

<section id="s1"">
    <p>The first paragraph.</p>
    <p>The second paragraph.</p>
</section>
```


### 单元素版

```js
let ref = $.get('#s0 p'),   // <p>首个段落。</p>
    con = $.get('#s1 p');   // <p>The first paragraph.</p>

$.replace(ref, con, true);
// <section id="s0"">
//     <p>The first paragraph.</p>
//     <p>第二个段落。</p>
// </section>
// <section id="s1"">
//     <p>The first paragraph.</p>
//     <p>The second paragraph.</p>
// </section>
```


### 集合版

> **注：**<br>
> 集合版不是单元素版简单的重复执行，而是将集合自身作为数据源使用，替换首个实参节点。<br>
> 接口定义：`.replaceAll( node: Node, clone: boolean, event: boolean, eventdeep: boolean ): Collector`，返回克隆并替换的节点集或集合自身。<br>

```js
let ref = $.get('#s0 p');  // <p>首个段落。</p>

$('#s1 p').replaceAll(ref);
// <section id="s0"">
//     <p>The first paragraph.</p>
//     <p>The second paragraph.</p>
//     <p>第二个段落。</p>
// </section>
// <section id="s1"">
// </section>
```

内容为文本节点。

```js
let ref = $.get('#s0 p').childNodes[0];
// Text: {首个段落。}

$('#s1 p').contents().replaceAll(ref, true);
// <section id="s0"">
//     <p>The first paragraph.The second paragraph.</p>
//     <p>第二个段落。</p>
// </section>
// 注：目标<p>内实际上是2个文本节点，可在<p>上执行normalize合并。
```
