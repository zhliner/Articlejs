# $.html( el, code, where?, sep? ): string | [Node]

提取或设置 `el` 元素的HTML源码，如果传递 `el` 为字符串，则为源码转换（如 `<` 到 `&lt;`）。设置源码时，数据源支持字符串、节点元素或其数组形式，也支持取值回调。

- 数据源为字符串时，禁止脚本元素 `<script>`、样式元素 `<style>`、以及链接元素 `<link>` 的源码文本，它们会被自动滤除。
- 源数据为节点/元素时，取其 `textContent/outerHTML` 值作为赋值源码（因此是一种简单的克隆方式）。
- 数据源也可是字符串/节点/元素的数组或集合（需支持 `.values` 接口），取值成员之间以指定的分隔符串连（默认空格）。集合成员也可以是多种类型值的混合。

与 jQuery 中同名接口不同，这里可以指定内容插入的位置（相对于 `el` 元素）：`before|after|begin|end|prepend|append|fill|replace` 等。另外，如果数据源为元素或节点，不会对原节点造成影响（文本逻辑）。

> **注：**<br>
> 实际上 `el` 也可以是一个文本节点，这样就可以把新的内容插入到更详细的位置。<br>
> 如果不是转换源码，返回值是一个新插入节点的数组。<br>


## 参数

### el: {Element|String}

操作的目标元素或待转换为HTML源码的文本。转换如：`<` 到 `&lt;`（HTML实体）。


### code: {String|[String]|Node|[Node]|Function|.values}

用于设置的数据源或取值函数。数据源的类型较为丰富，所有支持 `.values` 接口的都行（如 `Set`、`Map`），即便是一个对象 `Object` 也可以（取值的部分为一个集合）。

取值函数的回调接口为：`function(el): Any`。

> **注：**<br>
> 这种多样性在集合版中**数组实参会与集合成员一一对应**的规则下有了灵活性：可以用如 `Set` 实例而非数组作为单一实参。


### where: {String|Number}

新内容插入的位置，支持字符串名称和简单数字。可选，默认为 `fill`（填充）。

```js
{
    'before':   1,  // 目标之前
    'after':   -1,  // 目标之后
    'begin':    2,  // 目标内前端
    'prepend':  2,  // 同上
    'end':     -2,  // 目标内末尾
    'append':  -2,  // 同上
    'fill':     0,  // 目标内填充，同 jQuery 版
    'replace':  '', // 替换目标

    // 也可以使用数字简化表达。
    '1':        1,  // 之前
    '-1':      -1,  // 之后
    '2':        2,  //    内前端
    '-2':      -2,  //    内末尾
    '0':        0,  //    内填充（清零）
    '':         '', // 替换（位置）
}
```


### sep: {String}

如果数据源为数组或集合，串连各成员值的分隔符。可选，默认为一个空格。


## 返回值

返回新创建的节点集（数组）或转换后的HTML源码。


## 示例

```html
<section id="sect">
    <p>第一个段落。</p>
    <p>第二个段落。<em>the second.</em></p>
</section>
```


### 单元素版

```js
let p = $.get('#sect p');  // <p>第一个段落。</p>

$.html(p);
// "<p>第一个段落。</p>"

$.html(p, '纯文本内容。');
// <p>纯文本内容。</p>

$.html(p, '<em>附加内容</em>', 'end');
// <p>纯文本内容。<em>附加内容</em></p>

$.html(p, '<p>一个并列的段落。</p>', 'after');
// <section id="sect">
//     <p>纯文本内容。<em>附加内容</em></p>
//     <p>一个并列的段落。</p>
//     <p>第二个段落。<em>the second.</em></p>
// </section>
// 注：
// 首个段落内容已由前面的调用修改。

$.html(p, ['文本1', 'Text2'], 0, '--');
// <p>文本1--Text2</p>


let em = $.get('#sect em');  // <em>the second.</em>
$.html(p, em, 'append');
// <p>第一个段落。<em>the second.</em></p>
// <p>第二个段落。<em>the second.</em></p>
// 注：
// 第二个段落中的<em>元素并不会被移动。


$.html('纯文本内容。<em>附加内容</em>');
// "纯文本内容。&lt;em&gt;附加内容&lt;/em&gt;"
// 注：返回一个字符串。
```


### 集合版

```js
let els = $('#sect p');
// Collector [
//     <p>第一个段落。</p>,
//     <p>第二个段落。<em>the second.</em></p>
// ]

els.html(['The first line.', 'The second line.']);
// <section id="sect">
//     <p>The first line.</p>
//     <p>The second line.</p>
// </section>

let set = new Set(['The first,', 'The second.']);
els.html(set);
// <section id="sect">
//     <p>The first, The second.</p>
//     <p>The first, The second.</p>
// </section>
// 注：非数组的集合被视为一个单体。
```
