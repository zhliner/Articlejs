# $.val( el, value ): Value | [Value] | this

表单控件的取值或状态设置：部分控件设置为选中或取消选中（`input:radio`, `input:checkbox`, `<section>`），部分控件为设置 `value` 值本身（`input:text`, `input:password`, `<textarea>` 等）。取值和设置都遵循严格的表单提交（`submit`）逻辑：

- 未选中的的控件（如单个复选框）不会被提交，因此取值时返回 `null`。
- `disabled` 的控件值也不会被提交，因此取值时返回 `null`，设置会被忽略。
- 无名称（`name` 属性）定义的控件不会被提交，取值时返回 `undefined`。


## 两种类型的控件

### 选取型（状态）

- `input:radio`（单选控件）
    - `get`: 检索同组元素，返回选中控件的 `value` 值。
    - `set`: 检索同组元素，选中控件 `value` 值与目标值相等的控件（`checked = true`）。

- `input:checkbox`（复选控件）
    - `get`: 检索同组元素，返回选中项的值或值数组（**注**：复选框可以重名）。
    - `set`: 检索同组元素，与目标值匹配（或与数组中某值匹配）的控件，设置为选中（`checked = true`），若无匹配则取消选中。

- `<select>`（选单控件）
    - `get`: 获取选中的 `<option>` 子元素控件的 `value` 值，多选时返回一个选中值的数组（**注**：没有选中时返回一个空数组）。
    - `set`: 检查测试 `<option>` 子元素控件的值，如果匹配则设置为 `selected`，多选时与一个数组对比，存在于数组之中即为匹配。
}

**注意：**

- 对于单选控件，只要是同属一组，可以从其中任一控件上获取选中控件的 `value` 值。
- 重名的复选控件也被视为同一组，可以从其中任一控件上获取同组中全部选中控件的值。


### 普通型（赋值）

- `get`: 获取目标控件的 `value` 属性值，如果控件 `disabled` 则返回 `null`。
- `set`: 如果目标控件没有被 `disabled`，则设置控件的 `value` 属性值为目标值。

> **注：**<br>
> 该接口应当仅用于表单内的控件，如 `<option>` 元素其实也可以在表单之外（作为 `<datalist>` 的子元素）。<br>
> 如果需要无条件获取或设置控件的 `value` 属性值，应当使用 `.attr/.prop` 接口。<br>


## 参数

### el: Element

取值或设置状态的表单控件元素


### value: Value | [Value] | Function

需要设置或用于对比匹配的目标值或值数组。实参可以是一个取值函数，接口：`function( old-value ): Value | [Value]`。


## 示例

```html
<fieldset id="fset">
    <label><input type="checkbox" name="browser" value="chrome">Chrome</label>
    <label><input type="checkbox" name="browser" value="edge" checked>Edge</label>
    <label><input type="checkbox" name="browser" value="firefox">Firefox</label>
</fieldset>
<input name="chk" id="chk1" type="checkbox" value="Hello">
```


### 单元素版

```js
let cb = $.get('#fset input');
// <input ... value="chrome">

$.val(cb);
// [edge]
// 注：重名的组复选框返回一个数组。

$.prop(cb, 'checked', true);
$.val(cb);  // ["chrome", "edge"]


cb = $.get('#chk1');
// <input ... value="Hello">
$.val(cb);
// null
// 注：非选中状态。

$.prop(cb, 'checked', true);
$.val(cb);
// "Hello"
// 注：单个复选框（非组）返回一个值。
```


### 集合版

```js
let cbs = $('#fset [name=browser]');
// Collector [
//     <input ... value="chrome">,
//     <input ... value="edge" checked>,
//     <input ... value="firefox">
// ]

$.prop(cb, 'checked', true);

cbs.val();
// [
//     ['chrome', 'edge'],
//     ['chrome', 'edge'],
//     ['chrome', 'edge'],
// ]
// 注：从browser组的每一个控件上获取到一个选中值数组。


cbs.val('firefox'); // 其它项不匹配，会被取消选中
$.val( cbs[0] );    // [firefox]


cbs.val(['chrome', 'firefox']);
$.val( cbs[0] );    // ["chrome", "firefox"]
```
