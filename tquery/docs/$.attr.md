# $.attr( el, name, value ): Value | Object | this

获取或修改 `el` 元素的特性（Attribute）值。`value` 未定义且 `name` 为字符串（支持空格分隔的多个名称）时为取值，否则为设置操作。

支持两个特别的特性名：`html` 和 `text` 用于表达元素内的源码（`innerHTML`）和文本（`textContent`）。

> **注：**<br>
> 与 jQuery 的区别：如果元素没有指定的特性值返回 `null`（同 `.getAttribute()`），而 jQuery.attr() 返回 `undefined`。<br>


## 参数

### el: Element

操作的目标元素。


### name: String | [String] | Object | Map

特性名称（序列）或 **名/值对** 配置对象。字符串名称支持空格分隔的多个名称序列，支持 `data-` 系的简写形式（如：`-xx` 表示 `data-xx`）。

- 取值时：为字符串，单个名称或空格分隔的多个名称序列。单个名称时返回单个值，多个名称时返回一个**名/值对**对象。
- 设置时：字符串名称（序列）或 `名/值对` 配置对象（`Object | Map`），名值对中的值支持下面 `value` 参数的约定。


### value: String | Number | Boolean | Function | null | [Value]

将要设置的特性值（或值集），支持常见的各种标量类型，也可以是返回标量值的取值函数。取值函数接口：`function( old-value, el )`。

如果上面 `name` 是空格分隔的多个名称序列，值集的成员会设置到相应的目标特性上，或者简单值设置到多个目标特性上。如果传递实参值为 `null`，目标特性会被删除。


### 返回值

取值时返回一个值（单个特性时）或一个名值对 `Object`（多个特性时）。设置时返回调用者自身（this）。


## 示例

```html
<label>
    <input id="chk1" type="checkbox" checked="checked">Click me
</label>
```


### 单元素版

```js
let el = $.get('#chk1');
// <input id="chk1" type="checkbox" checked="checked">

$.attr(el, 'checked');
// 取值："checked"

$.attr(el, 'checked', false);
// <input id="chk1" type="checkbox">
// 设置：
// 移除 checked 特性，传递 null 效果相同。

$.attr(el, 'checked', 'hai');
// <input id="chk1" type="checkbox" checked="checked">
// 设置：
// 非 false|null 值被视为真，设置为标准的 checked 值。

$.attr(el, 'checked', '');
// 设置：同上。


$.attr(el, 'id checked');
// 取多个值：
// {
//     id: "chk1",
//     checked: "checked"
// }


$.attr(el, {
    value: 'hello',
    checked: null
});
// 设置多个值：
// <input id="chk1" type="checkbox" value="hello">


$.attr(el, '-pb value', 'double');
// <input id="chk1" type="checkbox" value="double" data-pb="double">
// 设置：
// 多个特性设置为同一个值，支持data-系简写名称。
```


### 集合版

名称 `name` 和值 `value` 两个参数都支持数组形式，分别与集合中的元素一一对应，无对应项的元素简单忽略。

```html
<fieldset id="fset">
    <label><input type="checkbox" value="chrome" checked>Chrome</label>
    <label><input type="checkbox" value="edge">Edge</label>
    <label><input type="checkbox" value="firefox">Firefox</label>
</fieldset>
```

```js
let els = $('#fset input');
// Collector [
//     <input type="checkbox" value="chrome">,
//     <input type="checkbox" value="edge">,
//     <input type="checkbox" value="firefox">
// ]
```


#### 取值时

```js
els.attr('value');
// [ "chrome", "edge", "firefox" ]

els.attr('checked value');
// [
//     { checked: "checked", value: "chrome" },
//     { checked: null, value: "edge" },
//     { checked: null, value: "firefox" },
// ]

els.attr(['checked', 'value']);
// [ "checked", "edge" ]
// 注：
// 数组成员一一对应，没有对应的简单忽略，因此只返回2个成员的值。


// 复杂的混合取值

els.attr(['checked value', 'value', 'checked']);
// [
//     { checked: "checked", value: "chrome" },
//     "edge",
//     "checked",
// ]
// 注：数组成员一一对应，每个成员的取值名称或数量都不一样。
```


#### 设置时

如果 `name` 为空格分隔的多个特性名，`value` 数组优先对应集合元素，然后才是 `value` 数组的**成员数组**对应到目标元素的多个特性。

```js
els.attr('checked', true);
// Collector [
//     <input type="checkbox" value="chrome" checked="checked">,
//     <input type="checkbox" value="edge" checked="checked">,
//     <input type="checkbox" value="firefox" checked="checked">
// ]
// 非数组形式，统一设置为目标值。


els.attr('checked', [true, null]);
// Collector [
//     <input type="checkbox" value="chrome" checked="checked">,
//     <input type="checkbox" value="edge">,
//     <input type="checkbox" value="firefox" checked="checked">
// ]
// 修改了前两个元素的特性值，最后一个被忽略。


els.attr([
    { checked: null, value: 'Chromium' },
    { checked: true, value: 'Internet Explorer' }
]);
// Collector [
//     <input type="checkbox" value="Chromium">,
//     <input type="checkbox" value="Internet Explorer" checked="checked">,
//     <input type="checkbox" value="firefox" checked="checked">
// ]
// 配置对象数组一一对应，没有配置对应的成员被忽略。
// 注意：
// 首个实参为数组时，成员只能为配置对象类型，第二个参数（value）无意义。

els.attr(['checked', 'value'], [true, false]);
// [ "checked", "edge" ]
// 注意：这里实际上是取值而非设置（第二个参数被忽略）。


els.attr('value -val', ['hello', 'the', 'world']);
// Collector [
//     <input type="checkbox" value="hello" data-val="hello">,
//     <input type="checkbox" value="the" data-val="the">,
//     <input type="checkbox" value="world" data-val="world">
// ]
// 值数组成员优先对应元素集成员，各元素多个特性被赋值为相同的成员值。


els.attr('value -val', [['AA', 'BB'], ['CC'], 'world']);
// Collector [
//     <input type="checkbox" value="AA" data-val="BB">,
//     <input type="checkbox" value="CC" data-val="the">,
//     <input type="checkbox" value="world" data-val="world">
// ]
// 元素集成员优先与值成员一一对应，之后单个元素的多个特性对应值的子数组成员。
```
