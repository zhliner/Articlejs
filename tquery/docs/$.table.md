# $.table( rows, cols, caption, th0, doc? ): Table

创建一个指定行列数的空表格（`Table` 实例），或封装一个规范的表格元素（无单元格合并或拆分）为 `Table` 实例。

`Table` 仅提供最简单的表格操作，除了表标题的设置或删除，主要是对表头（`<thead>`）、表脚（`<tfoot>`）和表主体（`<tbody>`）内表格行的添加、删除等，并且自动保持列数不变（也不能修改）。

> **注：**<br>
> 表格的完全可修改较为复杂，需要一个单独的库或插件来支持。<br>
> Table 的接口中不涉及单元格操作，对单元格赋值交由外部的 `tQuery` 接口如 `.text()`、`.html()` 等负责。<br>


## 参数

### rows: Number | Element

表格行数或待封装的表格元素。


### cols: Number

表格的列数。表格一旦创建，列数就不可修改（`Table` 不提供修改的接口）。


### caption: String

表格标题（`<caption>` 元素）的内容，以文本方式插入，HTML源码原样显示。


### th0: Boolean

表格是否包含一个列表头（首列为 `<th>` 单元格）。


### doc: Document

元素所属文档对象，可选。


## 示例

```js
let tbl = $.table(2, 3, "表格的标题", true);
tbl.elem();  // 原生<table>元素
```

上面创建的表格元素结构为两行三列，包含列表头（`<th>`），如下：

```html
<table>
    <caption>表格的标题</caption>
    <tbody>
        <tr>
            <th></th>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <th></th>
            <td></td>
            <td></td>
        </tr>
    </tbody>
</table>
```

向单元格中插入内容需要进一步的操作，如提取某行的单元格后赋值一个文本数组。

```js
let body = tbl.body()[0];
let ths = $.find('th', body);
// [<th>, <th>]

$(ths).text(['第一行', '第二行']);
// <tr>
//     <th>第一行</th>
//     <td></td>
//     <td></td>
// </tr>
//     <th>第二行</th>
//     <td></td>
//     <td></td>
// </tr>

$(body).find('th').text(['第一行', '第二行']);
// （结果同上）


let tds = $.find('td', body);
$(tds).text(['单元格11', '单元格12', '单元格21', '单元格22']);
// <tr>
//     <th>第一行</th>
//     <td>单元格11</td>
//     <td>单元格12</td>
// </tr>
// <tr>
//     <th>第二行</th>
//     <td>单元格21</td>
//     <td>单元格22</td>
// </tr>

$(body).find('td').text(['单元格11', '单元格12', '单元格21', '单元格22']);
// （结果同上）
```


## Table 接口

### Table( rows, cols, th0, doc?: Document ): Table

构造函数，创建 `Table` 类的实例。创建的 `<table>` 元素不包含表头（`<thead>`）和表脚（`<tfoot>`）部分，因此行计数注意去除表头/表脚的部分。


#### 参数

- `rows: Number` 表格的行数。
- `cols: Number` 表格的列数。
- `th0: Boolean` 首列是否为 `<th>` 单元格。
- `doc: Document` 所属文档对象，可选

```js
let tbl = new Table(2, 3, true);
tbl.elem();
// <table>
//     <tbody>
//         <tr>
//             <th></th>
//             <td></td>
//             <td></td>
//         </tr>
//         <tr>
//             <th></th>
//             <td></td>
//             <td></td>
//         </tr>
//     </tbody>
// </table>
```


#### 返回值

一个 `Table` 实例。包含了一些简单的处理表格的接口。


### .caption( text, ishtml ): Element | null

设置表标题 `<caption>` 元素内容，不存在时则新建一个 `<caption>` 元素。


#### 参数

- `text: String | null` 表标题的内容。无参数调用返回表标题元素（不存在时为null），传递 `null` 删除表标题。
- `ishtml: Boolean` 标题内容是否以 `html` 源码方式插入。


#### 返回值

修改、新建或删除的表标题元素（`<caption>`）。


### .body( idx, rows, sect ): [Element] | Collector

在 `sect` 内添加表格行，`sect` 仅为 `<tbody>` 元素。新的表格行内为空单元格，保持规范的列数。无参数调用返回 `<tbody>` 元素的集合（数组）。


#### 参数

- `idx: Number` 新行插入的位置。值为 `-1` 表示插入到 `sect` 内末尾。
- `rows: Number` 新插入的行数。
- `sect: Element` 插入到的目标表体元素（`<tbody>`）。可选，默认为表格内首个 `<tbody>`。


#### 返回值

表主体 `<tbody>` 元素集或新添加的行 `<tr>` 元素集的 `Collector` 封装。


### .newBody(): Element

创建一个新的 `<tbody>` 元素插入到所有 `<tbody>` 元素之后（末尾）。**注**：多个 `<tbody>` 可模拟表格的分区效果。

> **注**：需配合 `.body()` 使用。


### .delBody( idx ): Element

删除 `idx` 位置的 `<tbody>` 元素。`idx` 指 `<tbody>` 在 `table:tBodies` 中的位置。一个表格中通常只有一个 `<tbody>`。这通常仅在表格中有多个 `<tbody>` 的时候才需要。


#### 参数

- `idx: Number` 位置下标（从 `0` 开始）。


#### 返回值

删除的 `<tbody>` 元素。


### .head( idx, rows? ): Element | Collector

添加 `<thead>` 内的表格行，全部为空单元格（`<th>` 元素）。会保持列数合法。无参数调用返回 `<thead>` 元素自身，无表头元素时返回 `null`。创建新行时，如果不存在 `<thead>` 会自动新建一个。


#### 参数

- `idx: Number` 插入位置，`-1` 表示末尾之后。传递 `null` 时删除表头元素。
- `rows: Number` 新插入的行数，默认为 `1` 行。可选。


#### 返回值

表头 `<thead>` 元素或新添加的行元素集的 `Collector` 封装。


### .foot( idx, rows? ): Element | Collector

添加 `<tfoot>` 内的表格行，会保持列数合法。无参数调用返回 `<tfoot>` 元素，无表脚元素时返回 `null`。创建新行时，如果不存在 `<tfoot>` 会自动新建一个。


#### 参数

- `idx: Number` 插入位置，`-1` 表示末尾之后。传递 `null` 时删除表脚元素。
- `rows: Number` 新插入的行数，默认为 `1` 行。可选。


#### 返回值

表脚 `<tfoot>` 元素或新添加的行元素集的 `Collector` 封装。


### .removes( idx, size ): Collector

删除目标位置及之后多个表格行，行计数指整个表格，包含 `<thead>`、`<tbody>`、`<tfoot>` 几个部分。


#### 参数

- `idx: Number` 起始位置（从 `0` 开始）计数，支持负值从末尾算起。
- `size: Number` 删除行的数量，超出剩余行数时取剩余行数。值为 `undefined` 表示起始位置之后全部的行。


#### 返回值

删除的行元素集的 `Collector` 封装，无效的位置指定返回 `null`。


### .remove( idx ): Element

删除目标位置的表格行 `<tr>` 元素。


#### 参数

- `idx: Number` 目标位置（从 `0` 开始），支持负值从末尾算起。


#### 返回值

删除的目标行 `<tr>` 元素，无效的位置指定返回 `null`。


### .gets( idx, size ): Collector

获取目标位置及之后的行元素集，表格行计数针对整个表格，包含 `<thead>`、`<tbody>`、`<tfoot>` 三个部分。


#### 参数

- `idx: Number` 起始位置（从 `0` 开始），支持负值从末尾算起。
- `size: Number` 获取行数，`undefined` 表示目标位置之后全部。


#### 返回值

目标行元素集的 `Collector` 封装，无效的位置指定返回 `null`。


### .get( idx ): Element

获取目标位置的行元素，表格行计数针对整个表格（同 `.gets()`）。


#### 参数

- `idx: Number` 目标位置（从 `0` 开始），支持负值从末尾算起。


#### 返回值

目标位置的行元素，无效的位置指定返回 `null`。


### .$(): Collector

包装原始的 `<table>` 表格元素为 `Collector` 对象，以便于可能需要的链式调用。


### .elem(): Element

返回原始的 `<table>` 表格元素。


## 示例

```js
let tbl = $.table(2, 3, "表格的标题", true);

tbl.head();  // null

// 插入表头，默认仅1行<tr>。
tbl.head(0);
// <tr>
//     <th></th>
//     <th></th>
//     <th></th>
// </tr>

// 简单的调用 .head() 返回<thead>而非表格行集。
// 因此获取孙级<th>元素需要用find。
$(tbl.head()).find('*').text(['TH', 'TH']);
// <tr>
//     <th>TH</th>
//     <th>TH</th>
//     <th></th>
// </tr>

// 新插入表脚时，返回插入的表格行集。
// .text() 接受非数组实参时为相同填充。
tbl.foot(0, 1).children().text('FOOT');
// <tr>
//     <th>FOOT</th>
//     <td>FOOT</td>
//     <td>FOOT</td>
// </tr>
```
