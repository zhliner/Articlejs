# $.table( rows, cols, caption, th0, doc? ): Table

创建一个指定行列数的空表格（`Table` 实例），或封装一个规范的表格元素（无单元格合并或拆分）为 `Table` 实例。

`Table` 仅提供最简单的表格操作，除了表标题的设置或删除，主要是对表头（`<thead>`）、表脚（`<tfoot>`）和表主体（`<tbody>`）内表格行的添加、删除等，并且自动保持列数不变（也不能修改）。

> **注：**<br>
> 表格的完全可修改较为复杂，需要一个单独的库或插件来支持。<br>
> Table 的接口中不涉及单元格操作，对单元格赋值交由外部的 `tQuery` 接口如 `.text()`、`.html()` 等负责。<br>


## 参数

### rows: {Number|Element}

表格行数或待封装的表格元素。


### cols: {Number}

表格的列数。表格一旦创建，列数就不可修改（`Table` 不提供修改的接口）。


### caption: {String}

表格标题（`<caption>` 元素）的内容，以文本方式插入，HTML源码原样显示。


### th0: {Boolean}

表格是否包含一个列表头（首列为 `<th>` 单元格）。


### doc: {Document}

元素所属文档对象，可选。


## 示例

```js
let tbl = $.table(2, 3, "表格的标题", true);
tbl.elem();  // 原生<table>元素
```

上面创建的表格元素结构为两行三列，包含列表头（`<th>`），如下：

```html
<table>
    <caption>表格的标题</caption>
    <tbody>
        <tr>
            <th></th>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <th></th>
            <td></td>
            <td></td>
        </tr>
    </tbody>
</table>
```

向单元格中插入内容需要进一步的操作，如提取某行的单元格后赋值一个文本数组。

```js
let body = tbl.body()[0];
let ths = $.find('th', body);
// [<th>, <th>]

$(ths).text(['第一行', '第二行']);
// <tr>
//     <th>第一行</th>
//     <td></td>
//     <td></td>
// </tr>
//     <th>第二行</th>
//     <td></td>
//     <td></td>
// </tr>

$(body).find('th').text(['第一行', '第二行']);
// （结果同上）


let tds = $.find('td', body);
$(tds).text(['单元格11', '单元格12', '单元格21', '单元格22']);
// <tr>
//     <th>第一行</th>
//     <td>单元格11</td>
//     <td>单元格12</td>
// </tr>
// <tr>
//     <th>第二行</th>
//     <td>单元格21</td>
//     <td>单元格22</td>
// </tr>

$(body).find('td').text(['单元格11', '单元格12', '单元格21', '单元格22']);
// （结果同上）
```


## Table 接口

### Table( rows: number, cols: number, th0: boolean, doc?: Document ): Table

构造函数，创建 `Table` 类的实例。

创建的 `<table>` 元素不包含表头（`<thead>`）和表脚（`<tfoot>`）部分，因此行计数注意去除表头/表脚的部分。

**参数** `rows`：表格的行数。

**参数** `cols`：表格的列数。

**参数** `th0`：首列是否为 `<th>` 单元格。

```js
let tbl = new Table(2, 3, true);
tbl.elem();
// <table>
//     <tbody>
//         <tr>
//             <th></th>
//             <td></td>
//             <td></td>
//         </tr>
//         <tr>
//             <th></th>
//             <td></td>
//             <td></td>
//         </tr>
//     </tbody>
// </table>
```


### .caption( text: string, ishtml: boolean ): Element | null

添加或设置表标题内容，`text` 传递 `null` 删除表标题元素。

**参数** `text`：

- `undefined` 返回表标题，不存在则返回null。
- `null`      删除表标题。
- `{String}`  设置并返回表标题（不存在则新建）。

**参数** `ishtml`：是否为html方式插入。

**返回值**：表标题元素 `<caption>`。


### .body( idx: number, rows: number, sect: Element ): [Element] | Collector

在 `sect` 内添加表格行，`sect` 仅为 `<tbody>` 元素。新的表格行内为空单元格，保持规范的列数。简单的无参数调用返回 `<tbody>` 元素的集合（数组）。

**参数** `idx`：新行插入位置。值为-1表示插入到 `sect` 内末尾。

**参数** `rows`：新插入的行数。

**参数** `sect`：操作的目标 `<tbody>` 元素。可选，默认为表格内首个 `<tbody>`。

**返回值**：`<tbody>` 元素集或新添加的行元素集的 Collector 封装。


### .newBody(): Element

创建一个新的 `<tbody>`元素插入到所有 `<tbody>` 元素最后，多个 `<tbody>` 可模拟表格的分区效果。

> **注**：需配合 `.body()` 使用。


### .delBody( idx: number ): Element

删除 `idx` 位置的 `<tbody>` 元素。`idx` 指 `<tbody>` 在 `table:tBodies` 中的位置。一个表格中通常只有一个 `<tbody>`，此时其 `idx` 的值为0。

> **注**：该接口通常仅在表格中有多个 `<tbody>` 的场景下使用。

**参数** `idx`：位置下标（从0开始）。

**返回值**：删除的 `<tbody>` 元素。


### .head( idx: number, rows?: number ): Element | Collector

添加 `<thead>` 内的表格行，全部为空单元格（`<th>` 元素）。会保持列数合法。简单的无参数调用返回 `<thead>` 元素自身，无表头元素时返回 null。

> **注**：传递参数创建新行时，如果不存在 `<thead>` 元素会自动新建一个。

**参数** `idx`：插入位置。传递null时删除表头元素。

**参数** `rows`：新插入的行数，表头内通常只有1行，但实际上没有限制。

**返回值**：`<thead>` 元素或新添加的行元素集的 Collector 封装。


### .foot( idx: number, rows?: number ): Element | Collector

添加 `<tfoot>` 内的表格行，会保持列数合法。简单的无参数调用返回 `<tfoot>` 元素，无表脚元素时返回 null。

> **注**：传递参数创建新行时，如果不存在 `<tfoot>` 元素会自动新建一个。

**参数** `idx`：插入位置。传递null时删除表脚元素。

**参数** `rows`：新插入的行数。

**返回值**：新添加的行元素集的 Collector 封装。


### .removes( idx: number, size: number ): Collector

删除目标位置及之后多个表格行，行计数指整个表格，包含 `<thead>`、`<tbody>`、`<tfoot>` 几个部分。

**参数** `idx`：起始位置（从0开始）计数。

**参数** `size`：删除行的数量。值为undefined表示起始位置之后全部的行，数量超出剩余行数时取剩余行数。

**返回值**：删除的行元素集的 Collector 封装。


### .remove( idx: number ): Element

删除目标位置的表格行。

**参数** `idx`：目标位置（从0开始）。

**返回值**：删除的目标行元素。


### .gets( idx: number, size: number ): Collector

获取目标位置及之后的行元素集，表格行计数针对整个表格，包含 `<thead>`、`<tbody>`、`<tfoot>` 三个部分。

**参数** `idx`：起始位置（从0开始）。

**参数** `size`：获取行数，undefined 表示目标位置之后全部。

**返回值**：行元素集的 Collector 封装。


### .get( idx: number ): Element

获取目标位置的行元素，表格行计数针对整个表格（同 `.gets()`）。

**参数** `idx`：目标位置（从0开始）。


### .$(): Collector

包装原始的表格 `<table>` 元素为 Collector 对象，以便于可能需要的链式调用。


### .elem(): Element

返回原始的表格元素（`<table>`）。


## 示例

```js
let tbl = $.table(2, 3, "表格的标题", true);

tbl.head();  // null

// 插入表头，默认仅1行<tr>。
tbl.head(0);
// <tr>
//     <th></th>
//     <th></th>
//     <th></th>
// </tr>

// 简单的调用 .head() 返回<thead>而非表格行集。
// 因此获取孙级<th>元素需要用find。
$(tbl.head()).find('*').text(['TH', 'TH']);
// <tr>
//     <th>TH</th>
//     <th>TH</th>
//     <th></th>
// </tr>

// 新插入表脚时，返回插入的表格行集。
// .text() 接受非数组实参时为相同填充。
tbl.foot(0, 1).children().text('FOOT');
// <tr>
//     <th>FOOT</th>
//     <td>FOOT</td>
//     <td>FOOT</td>
// </tr>
```
