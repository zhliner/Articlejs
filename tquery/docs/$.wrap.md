# $.wrap( node, box, doc? ): Element | false

在 `node` 之外包裹一个元素（容器），该容器元素替换 `node` 原来的位置（如果 `node` 是一个节点的话）。容器元素可以是一个现有的元素、一个html字符串、或一个返回容器元素或html字符串的函数。

如果容器元素还包含子元素，`node` 会插入容器元素内的前端（注：与jQuery不同）。如果包裹采用结构化的html字符串，则会递进至首个最深层子元素为包裹容器。


## 参数

### node: Node | String

被包裹的节点或文本内容，可以是元素（`Element`）、文本节点（`Text`）或内容文本（会被创建为文本节点）。


### box: html | Element | Function

包裹节点数据的元素，或元素的html表达，或一个返回元素或html的取值函数。

取值函数：`function(Node): Element | String`


### doc: Document

如果 `node` 为字符串，可以传递该参数指定创建节点所属的文档。可选。


## 示例

```html
<p id="test">
    <em>Hello</em> The <strong>World</strong>!
</p>
```


### 单元素版

```js
let em = $.get('#test em');
// <em>Hello</em>

$.wrap(em, '<span></span>');
// <p id="test">
//     <span>
//         <em>Hello</em>
//     </span> The <strong>World</strong>!
// </p>
```

容器HTML为复杂的结构，递进至首个最深层。

```js
let em = $.get('#test em');
// <em>Hello</em>

$.wrap(em, '<span><b></b><i>Italic</i>.</span>');
// <p id="test">
//     <span>
//         <b><em>Hello</em></b>
//         <i>Italic</i>.
//     </span> The <strong>World</strong>!
// </p>
```

也可用于文本节点。

```js
let tnd = $.get('#test em').childNodes[0],  // Text: Hello
    box = $.get('#test strong');            // <strong>World</strong>

$.wrap(tnd, box);
// <p id="test">
//     <em>
//         <strong>HelloWorld</strong>
//     </em> The !
// </p>
// 注：
// - 被包裹数据支持文本节点。
// - 容器替换文本节点位置，并把文本节点插入到容器内前端。
```


### 集合版

支持 `box` 实参值数组与集合内成员一一对应。与其它接口的对应策略不同，这里会暂存前一个对应，如果值数组成员为未定义，则采用前一个对应的值。这是一个专门优化（仅用于 `wrap/wrapInner` 接口），使得对不同标签的支持更容易（无需重复相同的标签）。

如果需要中止值成员的对应（像其它接口中对未定义的忽略一样），可以在中止位置明确设置为一个 `null` 值（或非 `undefined` 假值）。

```html
<p id="webs">
    <b>搜索引擎</b> |
    <b>维基百科</b> |
    <b>科技新闻</b> |
</p>
```

```js
let links = [
    'www.google.com',
    'en.wikipedia.org',
    'www.guokr.com',
];

let tags = $(links).map( url => `<a href="${url}">`);
// Collector [
//     `<a href="www.google.com">`,
//     `<a href="en.wikipedia.org">`,
//     `<a href="www.guokr.com">`,
// ]

let els = $('#webs b').wrap( tags );
// <p id="webs">
//     <a href="www.google.com"><b>搜索引擎</b></a> |
//     <a href="en.wikipedia.org"><b>维基百科</b></a> |
//     <a href="www.guokr.com"><b>科技新闻</b></a> |
// </p>
// 注：<a>标签数组成员一一对应<b>元素集成员。


els = els.unwrap();
// 卸除链接包裹。

els.wrap([ tags[0], null ]);
// <p id="webs">
//     <a href="www.google.com"><b>搜索引擎</b></a> |
//     <b>维基百科</b> |
//     <b>科技新闻</b> |
// </p>
// 注：数组成员会与集合成员一一对应，但仅首个有效。
```

集合成员本身可以是文本内容（`text` 模式）。

```js
let cons = ['单元格1', '单元格2'];

$(cons).wrap('<td>').wrapAll('<tr>');
// Collector [
//     <tr><td>单元格1</td><td>单元格2</td></tr>
// ]
// 支持普通的文本内容（cons）。
// 返回值是容器元素的Collector封装，可以链式调用.appendTo()之类的接口。


cons = [
    '表头TH',
    '单元格1', '单元格2', '单元格3',
];

$(cons).wrap(['<th>', '<td>']).wrapAll('<tr>');
// Collector [
// <tr>
//     <th>表头TH</th>
//     <td>单元格1</td>
//     <td>单元格2</td>
//     <td>单元格3</td>
// </tr>
// ]
// 注：无需对应单元格数据重复指定全部<td>标签。

$(cons).wrap(['<th>', '<td>', '<td>', '<td>']).wrapAll('<tr>');
// 效果同上。
// 注：如无前值引用优化，则需采用完整配置方式。


cons = [
    'dt标题',
    'dd内容AAA',
    'dd内容BBB',
    'dd内容CCC',
    '额外的数据行...',
];

$(cons).wrap(['<dt>', '<dd>',,, null]).wrapAll('<dl>');
// Collector [
// <dl>
//     <dt>dt标题</dt>
//     <dd>dd内容AAA</dd>
//     <dd>dd内容BBB</dd>
//     <dd>dd内容CCC</dd>
// </dl>
// ]
// 注：最后一个额外行被排除掉了。
```
