## Tpb: By

对 `On` 采集的流程数据进行处理。

系统有一个简单的默认处理集（X.[meth]），处理器同样可以串连（逗号分隔）使用。通常来说，此阶段的定制扩展比较多，因为 `On` 的种类和方式有限，`To` 的规格也基本确定。

> **注：**<br>
> 譬如动画或特效，`On` 负责初始数据收集，`By` 则负责后续迭代循环的画面行为。


### 系统方法集

可能采用 `X` 或 `x` 名称空间（综合的意思），或没有名称空间（顶层暴漏）。

```js
// 简单操作
// 该部分操作对象就是流程元素自身，无to目标。
//===============================================

unwrap()        // 流程元素（集）解包裹
remove()        // 移除流程元素
empty()         // 流程元素清空（同 to:fill 空数据）
normalize()     // 流程元素规范化
clone( event )  // 流程元素（集）克隆。


// 集合处理
//===============================================
// $code为函数体代码，参数名固定：（v, i, o）。
// 注：
// $code的执行结果自动返回，无需return语句。
// $code支持首字符指引，引用一个自定义函数库里的函数（此时$code为名称）。

filter( flag, $code )
// 实参空间值集过滤，匹配者构建一个新集合入栈。
// flag为集合入栈模式：
// 0    整体入栈
// 1    一维展开
// n    n 维展开

map( flag, $code )
// 实参空间值集映射，返回值构建一个新集合入栈。
// flag为集合入栈模式，含义同上。

every( $code )
// 实参空间条目全部为真测试，返回结果入栈。

some( $code )
// 实参空间条目部分为真测试，返回值入栈。

each( $code )
// 迭代处理。没有返回值入栈。

put( $val )
// 简单传值入栈。
// 如果$val为特殊指引，对实参空间数据取值。


// Promise特例
// code为函数体代码，参数名称固定。
//===============================================

then( $code )
// 实参空间Promise对象then执行，代码参数名'd'。

catch( $code )
// 实参空间Promise对象catch执行，代码参数名'e'。

finally( $code )
// 实参空间Promise对象finally执行，代码无参数。



// 通用处理
//===============================================

func( $code ): Function
// 创建函数：new Function() 入栈。
// 函数的首个参数名为 $，表示流程数据。

call( ...rest ): Value
// 视实参空间数据为函数，传递实参并调用。
// 通常在 func 之后使用。
```
