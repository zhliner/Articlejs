/*! Coolj/Tpb@tQuery v0.2.0 | (c) zhliner@gmail.com 2021.10.27 |  */
import e,{XLoader as t,TplsPool as n,OBTA as r,TplrName as l,Web as o,DEBUG as i}from"./tpb/config.js";import{processProxy as s,processExtend as a,customGetter as u,obtBuilder as c,BaseOn as f,BaseBy as d,Tpb as p}from"./tpb/tpb.esm.js";import{HotKey as h,ObjKey as m}from"./tpb/tools/hotkey.js";import{Scripter as g,By as _,Sys as w,Limit as y,On as v,Local as b,Cmdx as x,Tips as E,Help as T}from"../config.js";import S from"./shortcuts.js";import{Render as C}from"./tpb/tools/render.js";import{setupRoot as N}from"../index.js";import{Hicolor as A}from"./highlight/main.js";import{Spliter as $,UmpCaller as k,UmpChars as O,UmpString as R}from"./tpb/tools/spliter.js";import{Util as I}from"./tpb/tools/util.js";import{Templater as L}from"./tpb/tools/templater.js";
//! $ID: types.js 2020.05.09 Cooljed.Libs $
const z=1,U=2,D=3,H=6,F=8,M=100,P=101,B=102,j=103,K=104,V=105,W=106,G=200,X=201,q=202,J=203,Y=204,Q=205,Z=206,ee=207,te=208,ne=209,re=210,le=211,oe=212,ie=213,se=214,ae=215,ue=216,ce=217,fe=218,de=219,pe=220,he=221,me=300,ge=301,_e=302,we=303,ye=304,ve=400,be=401,xe=402,Ee=403,Te=404,Se=405,Ce=406,Ne=407,Ae=408,$e=409,ke=410,Oe=411,Re=412,Ie=413,Le=414,ze=415,Ue=419,De=420,He=421,Fe=422,Me=423,Pe=424,Be=501,je=502,Ke=503,Ve=504,We=505,Ge=506,Xe=510,qe=511,Je=513,Ye=514,Qe=515,Ze=516,et=517,tt=518,nt=519,rt=520,lt=523,ot=524,it=525,st=527,at=-1,ut=-2,ct={0:0,[z]:18,[U]:18,[D]:18,4:18,5:530,[H]:528,7:528,[F]:144,9:400,10:400,107:6,[M]:390,[P]:390,[B]:390,[j]:134,[W]:14,104:3082,[V]:3842,[G]:24,[X]:24,[q]:24,[J]:24,[Y]:24,[Q]:24,[Z]:24,[ee]:24,[te]:24,[ne]:24,[re]:24,[le]:24,[oe]:24,[ie]:24,[se]:24,[ae]:24,[ue]:24,[ce]:24,[fe]:24,[de]:24,[pe]:24,[he]:24,[me]:40,[ge]:40,[_e]:40,[ye]:40,[we]:40,[ve]:1098,[be]:1098,[xe]:1038,[Ee]:14,[Te]:3146,[Se]:14,[Ce]:14,[Ne]:1098,[Ae]:78,[$e]:1102,[ke]:14,[Oe]:14,[Re]:14,[Ie]:10,[Le]:10,[ze]:6,417:2,416:70,418:70,[Ue]:518,[De]:14,[He]:3146,[Fe]:518,[Me]:518,[Pe]:518,425:3586,426:6,500:1122,[Ge]:1122,507:1634,509:34,508:34,[Xe]:1122,[qe]:2146,512:98,[Be]:34,[je]:34,[Ke]:34,[Ve]:34,[We]:34,[Je]:34,[Ye]:34,[Qe]:34,[Ze]:34,[et]:34,[tt]:34,[nt]:34,[rt]:34,521:34,522:34,[lt]:34,[ot]:34,[it]:34,526:34,[st]:160,528:544,[at]:13,[ut]:13},ft=[X,q,Q,Z,ee,te,5,ne,re,le,oe,ie,se,ae,ue,ce,fe,he],dt=[J,Y,de,pe],pt=[9,10,7],ht=[...[z,U,D,4,H,F],...ft,...dt,...pt],mt=[...ft,...dt,...pt],gt=[...dt,...pt],_t=[lt,Ye,Qe],wt=[me,ge,_e,we,Ye,Qe,Ze,et,tt,nt,rt,521,522,lt,ot,it,526,528],yt={0:null,[z]:[0,P,M],[U]:[0,P,M],[D]:[B,j],4:[107],5:[0,104,V],[H]:[0],7:null,[F]:null,9:null,10:null,107:[107],[M]:null,[P]:null,[B]:null,[j]:null,104:[0],[V]:[0],[W]:[0,G,...mt],[G]:[0,...ht],[X]:[0,G,...ht,4,F],[q]:[0,...dt],[J]:[0,G,...ft,...pt],[Y]:[0,G,...ft,...pt],[Q]:[0,q,...gt],[Z]:[0,...ft,...dt],[ee]:[0,...dt],[te]:[0,at,ut],[ne]:[0,...gt],[re]:[0,...gt],[le]:[0,...gt],[oe]:[0,...gt],[ie]:[0,...gt],[se]:[0,...gt],[ae]:[0,...mt],[ue]:[0],[ce]:[0,...dt],[fe]:[0,...dt],[de]:[0,...mt],[pe]:[0,...mt],[he]:[0,...dt],[me]:[0,G,...ht],[ge]:[0,G,...ht],[_e]:[0,G,...ht],[we]:[0,G,...mt],[ye]:[0,G,...ht],[ve]:[0,G,...mt,4,F,ut],[be]:[0,G,...mt,4,F,ut],[xe]:[0,G,...mt,4,F,ut],[Ee]:[0,G,...mt,4,F,ut],[Te]:[0,G,...mt,4,F,ut],[Se]:[0,G,...mt,4,F,ut],[Ce]:[0,G,...mt,4,F,ut],[Ne]:[0,G,...mt],[Ae]:[0,G,...mt],[$e]:[0,G,...mt],[Oe]:[0,G,...mt,4,F,ut],[ke]:[0,G,...ht],[Re]:[0,G,...ht],[Ie]:[0,G,...ht],[Le]:[0,G,...ht],[ze]:[Ie,Le],416:[ze],417:[ze],418:[ze],[Ue]:[te],[De]:[G],[He]:[G],[Fe]:[Te,Ye],[Me]:[Te,Qe],[Pe]:[He,Qe],425:[De,Pe],426:[F,4,W],500:[ve,Ee],[Ge]:[xe,me,..._t],507:[xe,425],508:[xe,Qe],509:[xe,Ye],[Xe]:[xe,me,..._t,et,tt],[qe]:[xe,me,..._t,ye],[Ye]:[ke,De],[Qe]:[ke,De],[Ze]:[Ue],[et]:[ke,De,Fe,Me],[tt]:[ke,De,Fe,Me],[nt]:[ke,De,Me,Pe],[rt]:[Oe,Re],521:[$e,416,417,418],522:[Ae,426],[lt]:[xe,me,..._t,521],[ot]:[xe,me,..._t,521],[it]:[Ne,me,..._t,521],526:[te],[st]:null,528:null,[at]:[0],[ut]:[0,G],[-10]:[ve,500,Ge,507,512,508,509,qe]};e.each(yt,((e,t,n)=>n[t]=e&&new Set(e)));const vt={512:[Xe,qe,st,Be],[Be]:[be,Xe,qe,st,je],[je]:[be,Xe,qe,st,Ke],[Ke]:[be,Xe,qe,st,Ve],[Ve]:[be,Xe,qe,st,We],[We]:[be,Xe,qe,st,Je],[Je]:[be,Xe,qe,st,Je]};function bt(e){return!!(128&ct[e])}function xt(e){return!!(64&ct[e])}function Et(e){return!!(256&ct[e])}function Tt(e){return!!(1024&ct[e])}function St(e){return!!(2048&ct[e])}function Ct(e){return!!(1024&ct[e]&&2048&ct[e])}function Nt(e){return!!(512&ct[e])}function At(e){return!!(32&ct[e])}function $t(e){return!!(16&ct[e])}function kt(e){return!!(8&ct[e])}function Ot(e){return!!(4&ct[e])}function Rt(e){let t=yt[e];return!!t&&1===t.size&&t.has(0)}function It(t){let n=e.not(e.children(t),"h2,header,footer,hr"),r=e.filter(n,"section");return n.length?r.length?n.length===r.length?2:3:1:0}function Lt(e,t){switch(It(e)){case 1:return t.slice(0,-1).concat(wt);case 2:return t}return t.concat(wt)}var zt=Object.freeze({__proto__:null,$TEXT:0,AUDIO:z,VIDEO:U,PICTURE:D,SVG:4,RUBY:5,METER:H,SPACE:7,IMG:F,BR:9,WBR:10,TRACK:M,SOURCE1:P,SOURCE2:B,PIMG:j,RT:104,RP:V,EXPLAIN:W,SVGITEM:107,A:G,Q:X,ABBR:q,DEL:J,INS:Y,DFN:Q,BDO:Z,TIME:ee,CODE:te,STRONG:ne,EM:re,CITE:le,SMALL:oe,SUB:ie,SUP:se,MARK:ae,ORZ:ue,SAMP:ce,KBD:fe,S:de,U:pe,VAR:he,P:me,NOTE:ge,TIPS:_e,PRE:we,ADDRESS:ye,H1:ve,H2:be,H3:xe,H3X:Ee,H4:Te,H5:Se,H6:Ce,SUMMARY:Ne,FIGCAPTION:Ae,CAPTION:$e,LI:ke,DT:Oe,DD:Re,TH:Ie,TD:Le,TR:ze,THEAD:416,TBODY:417,TFOOT:418,CODELI:Ue,ALI:De,AH4:He,XH4LI:Fe,XOLH4LI:Me,XOLAH4LI:Pe,TOCCASCADE:425,FIGIMGBOX:426,HGROUP:500,S1:Be,S2:je,S3:Ke,S4:Ve,S5:We,ABSTRACT:Ge,TOC:507,REFERENCE:508,SEEALSO:509,HEADER:Xe,FOOTER:qe,ARTICLE:512,SECTION:Je,UL:Ye,OL:Qe,CODELIST:Ze,ULX:et,OLX:tt,CASCADE:nt,DL:rt,TABLE:521,FIGURE:522,BLOCKQUOTE:lt,ASIDE:ot,DETAILS:it,CODEBLOCK:526,HR:st,BLANK:528,B:at,I:ut,MAIN:-10,ChildTypes:yt,ChildTypesX:vt,isEmpty:bt,isSingle:xt,isCovert:Et,isFixed1:Tt,isFixed2:St,isFixed:Ct,isFixedAny:function(e){return!!(1024&ct[e]||2048&ct[e])},isSealed:Nt,isBlocks:At,isInlines:$t,isContent:kt,isStruct:function(e){return!!(2&ct[e])},isStructX:Ot,isSpecial:function(e){return!!(1&ct[e])},onlyText:Rt,sectionState:It,sectionSubs:Lt});
//! $ID: base.js 2020.05.10 Cooljed.Libs $
const Ut=Symbol("type-value"),Dt=new WeakMap,Ht=new Set(["abstract","toc","seealso","reference","s1","s2","s3","s4","s5","codelist","ulx","olx","cascade","codeblock","note","tips","blank","orz","space","explain"]),Ft=new Set([416,418,ve,Ne,Ge,507,425,508,512,W,j]),Mt={LI(t){let n=t.firstElementChild;return t.childElementCount<=1?function(t,n){if(!t||e.siblingNodes(t).length)return;if("A"===t.tagName)return De;return"CODE"===t.tagName&&"OL"===n.tagName&&Zt(n)===Ze&&Ue}(n,t.parentElement)||ke:2===t.childElementCount&&"H4"===n.tagName?Yt(n):ke},H3:e=>"HGROUP"===e.parentElement.tagName?Ee:xe,H4:e=>Qt(e,"A")?He:Te,SPAN:e=>"FIGURE"===e.parentElement.tagName?426:7,IMG:e=>"PICTURE"===e.parentElement.tagName?j:F,SOURCE:e=>"PICTURE"===e.parentElement.tagName?B:P},Pt={LI:[{type:Ue,check:e=>Qt(e,"CODE")},{type:De,check:e=>Qt(e,"A")},{type:Pe,check:function(e){let t=e.firstElementChild;return 2===e.childElementCount&&"H4"===t.tagName&&Yt(t)===Pe}},{type:Me,check:function(e){let t=e.firstElementChild;return 2===e.childElementCount&&"H4"===t.tagName&&Yt(t)===Me}},{type:Fe,check:function(e){let t=e.firstElementChild;return 2===e.childElementCount&&"H4"===t.tagName&&Yt(t)===Fe}},{type:ke,check:()=>!0}],H3:[{type:Ee,check:()=>!0},{type:xe,check:()=>!0}],SPAN:[{type:7,check:e=>0===e.childNodes.length},{type:426,check:()=>!0}],IMG:[{type:j,check:()=>!0},{type:F,check:()=>!0}]},Bt=Symbol("normal-list"),jt=Symbol("small-block"),Kt=Symbol("blockcode-item"),Vt={[Xe]:jt,[qe]:jt,[lt]:jt,[ot]:jt,[it]:jt,[Ue]:Kt,526:Kt,[Ye]:Bt,[Qe]:Bt,[et]:Bt,[tt]:Bt,[nt]:Bt};function Wt(e){if(3===e.nodeType)return 0;if("http://www.w3.org/2000/svg"===e.namespaceURI)return"svg"===e.tagName?4:107;let t=Mt[e.tagName];return t?t(e):function(e){let t=+zt[e];return isNaN(t)?null:t}(function(e){let t=e.getAttribute("role");return(Ht.has(t)?t:e.tagName).toUpperCase()}(e))}function Gt(e,t){if(e===t)return null;let n=Zt(e);return $t(n)?Gt(e.parentElement):kt(n)?e:Xt(e,t)}function Xt(e,t){return e===t?null:function(e){let t=Zt(e);return At(t)||$t(t)}(e)?e:Xt(e.parentElement)}function qt(t,n){return 3===t.nodeType||e.find("*",t,!0).every((e=>n.has(Zt(e))))}function Jt(t){return 3==t.nodeType?null:an(t)?t:e.children(t).map((e=>Jt(e))).flat()}function Yt(e){switch(e.nextElementSibling.tagName){case"UL":return Fe;case"OL":return Qt(e,"A")?Pe:Me}return ke}function Qt(t,n){let r=t.firstElementChild;return 1===t.childElementCount&&!e.siblingNodes(r).length&&r.tagName===n}function Zt(e){if(3===e.nodeType)return 0;let t=e[Ut];return void 0===t&&en(e,t=Wt(e)),t}function en(e,t){return Reflect.defineProperty(e,Ut,{value:t,enumerable:!1,configurable:!0}),e}function tn(e,t){let n=nn(e);return!!n&&n.has(t)}function nn(e){if("number"==typeof e)return yt[e];let t=Zt(e),n=vt[t];return n?new Set(Lt(e,n)):yt[t]||""}function rn(t){let n=e.clone(t,!0,!0,!0),r=e.find("*",t);return e.find("*",n).forEach(((e,t)=>en(e,Zt(r[t])))),en(n,Zt(t))}function ln(t){return sn(t)?[t]:e.contents(t).map((e=>1===e.nodeType?ln(e):e)).flat()}function on(e){return Et(Zt(e))}function sn(e){return $t(Zt(e))}function an(e){return kt(Zt(e))||0===e.childElementCount&&e.innerText.trim()}function un(e){return Tt(Zt(e))}function cn(e){return St(Zt(e))}function fn(e){return Ct(Zt(e))}function dn(e){let t=Zt(e);return t>=Be&&t<=We}function pn(e){return Ft.has(Zt(e))}function hn(t,n){return n?Dt.set(t,n)&&null:(n=Dt.get(t)||Dt.set(t,new e.Table(t)).get(t)).checkCols()}function mn(t){let n=Jt(t);return n?e.isArray(n)?n:[n]:[]}function gn(e,t){return sn(e)?Gt(e.parentElement,t):Xt(e.parentElement,t)}function _n(t){let n=e.attr(t,"role");return n?+n.substring(1):t.parentElement?e.parentsUntil(t,"section[role=s5]").length+6:6}function wn(t,n){let r=(n+=_n(t))<6?`s${n}`:null;if(0===n)return!1;Reflect.deleteProperty(e.attr(t,"role",r),Ut)}function yn(e,t){let n=Vt[Zt(e)];if(void 0===n)return function(e,t){let n=Zt(e);for(const e of t)if(n!==Zt(e))return e;return null}(e,t);for(const e of t)if(n!==Vt[Zt(e)])return e;return null}function vn(e,t){let n=Pt[e.tagName];return n?n.some((n=>function(e,t,n){return t.has(n.type)&&n.check(e)&&!!en(e,n.type)}(e,t,n))):t.has(Zt(e))}
//! $ID: common.js 2019.09.07 Cooljed.Libs $
class bn extends Set{constructor(e){super(),this._cls=e}add(t){return super.add(e.addClass(t,this._cls)),t}delete(t){return super.delete(e.removeClass(t,this._cls)),t}clear(){for(const t of this)e.removeClass(t,this._cls);return super.clear(),this}first(){for(const e of this)return e}pushes(e){return e.forEach((e=>this.add(e))),this}removes(e){return e.forEach((e=>this.delete(e))),this}}class xn extends Map{add(e,t){super.set(t,e)}top(){let e;for(e of this);return e?e[1]:null}}class En{constructor(e=""){this._fix=e}get(e){return window.localStorage.getItem(this._fix+e)}set(e,t){return window.localStorage.setItem(this._fix+e,t),this}del(e){window.localStorage.removeItem(this._fix+e)}has(e){return!!window.localStorage.getItem(this._fix+e)}clear(){window.localStorage.clear()}keys(){let e=Object.keys(window.localStorage),t=this._fix.length;return e.filter((e=>e.startsWith(this._fix))).map((e=>e.substring(t)))}}class Tn{constructor(e,t){this._max=e,this._buf=[],this._idx=-1,this._hist=t}push(...e){if(!e.length)return;return this._buf.length=++this._idx,this._buf.push(e)-this._max>0&&this._shift()}pop(){let e=this._buf.pop();this._idx--,e.slice().reverse().forEach((e=>e.undo()))}undo(){if(this._idx<0)return $n("[undo] overflow.");let e=this._buf[this._idx];this._confirm(e)&&(this._idx--,e.slice().reverse().forEach((e=>e.undo())))}redo(){if(this._idx>=this._buf.length-1)return $n("[redo] overflow.");this._buf[++this._idx].forEach((e=>e.redo()))}clear(){this._buf.length=0,this._idx=-1,this._hist.clear()}canUndo(){return this._idx>=0}canRedo(){return this._idx<this._buf.length-1}_confirm(e){let t=!0;for(const n of e)if(n.warn&&(t=window.confirm(n.warn()),!t))break;return t}_shift(){let e=this._buf.shift();this._idx--,e.forEach((e=>e.count&&this._hist.prune(e.count)))}}class Sn{constructor(e,t){this._data=e,this._size=t,this._idx=0}next(){let e=this.pages()-1;return this._idx<e?this.page(this._idx+1):null}prev(){return this._idx>0?this.page(this._idx-1):null}first(){return this.page(0)}last(){return this.page(this.pages()-1)}page(e){let t=e*this._size;return this._idx=e,this._data.slice(t,t+this._size)}index(e){if(void 0===e)return this._idx;this._idx=e}reset(e){return this._idx=0,this._data=e,this}pages(){return Math.ceil(this._data.length/this._size)}}class Cn{constructor(e){this._tpl=e,this._pool=[]}page(e,t){return this._pool[e]||this._render(e,this._clone(this._tpl),t)}reset(){return this._pool.length=0,this}_render(e,t,n){return this._pool[e]=C.update(t,n)}_clone(t){return C.clone(t,e.clone(t,!0,!0,!0))}}class Nn extends Set{constructor(e){super(),this._make=e}pick(...e){return this._pick()||this._make(...e)}_pick(){let e;for(e of this)break;return void 0!==e&&this.delete(e),e}}const An=new Nn(g);function $n(e,t){window.console.warn(e,t||"")}function kn(e){let t=An.pick();return new Promise((n=>{t.onmessage=e=>{if(t.onmessage=null,An.add(t),e.data.error)throw e.data.error;n(e.data.result)},t.postMessage(`return ${e}`)}))}function On(t,n=1){let r=e.prevNodes(t,!1,!0),l=0;for(;l<r.length;l++){let e=r[l];if(--n<0||un(e))break}return r[l-1]||null}function Rn(t,n=1){let r=e.nextNodes(t,!1,!0),l=0;for(;l<r.length;l++){let e=r[l];if(--n<0||cn(e))break}return r[l-1]||null}function In(t,n){let r=n.parentNode,l=n.previousSibling;return e.replace(t,n),l?e.after(l,t):e.prepend(r,t)}
//! $ID: coding.js 2020.02.07 Cooljed.Libs $
const Ln=new Set("ೠൕ൘൙൚൛൜൝൞ൟൠ൧൨൩൪൫൬൭൮൯൰൱൲൳൴൵൶൷൸൹ൺൻർൽൾൿᳩᳪᳫ⁇※‱℃".split(""));function zn(e){let t=e.indexOf("\t");return t<0?[e]:[e.substring(0,t),e.substring(t+1)||!0]}function Un(e,t,n){let r=e.innerText||e.textContent,l=r.lastIndexOf(n,t-1);return l<0?[r.substring(0,t)]:[r.substring(l+1,t),!0]}function Dn(e,t,n){let r=e.innerText||e.textContent,l=r.indexOf(n,t);return l<0?[r]:[r.substring(t,l),!0]}function Hn(e,t,n){let r=[];for(;e;){let[l,o]=Un(e,t,n);if(r.push(l),t=1/0,o)break;e=e.previousSibling}return[r.reverse().join(""),!!e]}function Fn(e,t,n){let r=[];for(;e;){let[l,o]=Dn(e,t,n);if(r.push(l),t=0,o)break;e=e.nextSibling}return[r.join(""),!!e]}function Mn(e,t){let n=0;for(;n<t&&/[ \t]/.test(e[n]);n++);return n}function Pn(e){let t=0;for(const n of e)t+="\t"!==n?n.codePointAt(0)>=8527||Ln.has(n)?2:1:8-t%8;return t}function Bn(t,n,r){let l=t.startContainer,o=t.startOffset;return l===r&&(l=e.contents(l,o)),n?Hn(l,o,"\n")[0]:!1===n?Fn(l,o,"\n")[0]:Hn(l,o,"\n")[0]+Fn(l,o,"\n")[0]}function jn(t,n,r){return r>0&&(t=t.map((e=>function(e,t=4){let n=[],r="",l=e;for(;l;)[r,l]=zn(l),l&&(r+=" ".repeat(t-Pn(r)%t),!0===l&&(l=null)),n.push(r);return n.join("")}(e,r)))),t=t.join("\n"),n?new A(t,n).effect():[{text:e.html(t)}]}
//! $ID: create.js 2019.09.07 Cooljed.Libs $
const Kn={[z]:"audio",[U]:"video",[D]:"picture",4:"svg",5:"ruby",[H]:"meter",7:"span\\space",[F]:"img",[j]:"img",9:"br",10:"wbr",107:null,[M]:"track",[P]:"source",[B]:"source",[W]:"i\\explain",104:"rt",[V]:"rp",[G]:"a",[ne]:"strong",[re]:"em",[X]:"q",[q]:"abbr",[le]:"cite",[ee]:"time",[oe]:"small",[J]:"del",[Y]:"ins",[ie]:"sub",[se]:"sup",[ae]:"mark",[te]:"code",[ue]:"code\\orz",[Q]:"dfn",[ce]:"samp",[fe]:"kbd",[de]:"s",[pe]:"u",[he]:"var",[Z]:"bdo",[me]:"p",[ge]:"p\\note",[_e]:"p\\tips",[ye]:"address",[we]:"pre",[ve]:"h1",[be]:"h2",[xe]:"h3",[Ee]:"h3",[Te]:"h4",[Se]:"h5",[Ce]:"h6",[Ne]:"summary",[Ae]:"figcaption",[$e]:"caption",[ke]:"li",[Oe]:"dt",[Re]:"dd",[ze]:"tr",[Ie]:"th",[Le]:"td",417:"tbody",416:"thead",418:"tfoot",[Ue]:"li",[De]:"li",[He]:"h4",[Fe]:"li",[Me]:"li",[Pe]:"li",425:"ol\\cascade",426:"span",500:"hgroup",[Ge]:"header\\abstract",507:"nav\\toc",508:"nav\\reference",509:"aside\\seealso",[Xe]:"header",[qe]:"footer",512:"article",[Be]:"section\\s1",[je]:"section\\s2",[Ke]:"section\\s3",[Ve]:"section\\s4",[We]:"section\\s5",[Je]:"section",[Ye]:"ul",[Qe]:"ol",[Ze]:"ol\\codelist",[et]:"ul\\ulx",[tt]:"ol\\olx",[nt]:"ol\\cascade",[rt]:"dl",521:"table",522:"figure",[lt]:"blockquote",[ot]:"aside",[it]:"details",526:"pre\\codeblock",[st]:"hr",528:"div\\blank",[at]:"b",[ut]:"i"},Vn={[z]:function(){return e.elem("audio","Sorry, your browser doesn't support embedded audios.")},[U]:function(){return e.elem("video","Sorry, your browser doesn't support embedded videos.")},4:function(){return e.svg()},107:function(){return e.fragment("","svg")}},Wn={4:function(e,t,n,r){return hr(null,ar(e,t,r),!0)},107:function(e,t,n,r){return hr(null,ar(e,t,r),!0)},5:function(t,n,{rt:r,rpl:l,rpr:o},i){return e.append(n,function(t,n,r,l){let o=[e.Text(l)];n&&o.push(gr(V,t||w.rpLeft),gr(K,n),gr(V,r||w.rpRight));return o}(l,r,o,function(t){if(e.isArray(t))return t.map((e=>e.textContent)).join("");return t.nodeType?t.textContent:t+""}(i))),hr(null,n,!0)},[te]:function(t,n,r,l){return l&&(l="string"==typeof l?e.fragment(l,!1):function(t){let n=nn(te);return e.isArray(t)?t.every((e=>qt(e,n))):qt(t,n)}(l)&&l,e.append(n,l)),hr(null,n,!0)},[ze]:function(t,n,{tsec:r},l){let o=e(n.cells);return 0===o.length&&(o=e(function(t,n){let r=hn((n=n||t.parentElement).parentElement);return e.append(t,r.newTR("THEAD"===n.tagName).children)}(n,r))),l&&l.nodeType?(o.append(mn(l).map((t=>e.contents(t)))),hr(null,o,!0)):hr(null,o)},417:function(e,t,n,r){let{th0:l,head:o,foot:i}=n,s=hn(t.parentElement||n.table),[a,u]=rr(e,s,t,r);return l&&s.rows()>0&&s.insertColumn(s.newColumn(!0),0),o&&function(e,t,n){Zn(e,er(e,t,!0),n)}(s,o,s.head()),i&&function(e,t,n){Zn(e,er(e,t),n)}(s,i,s.foot()),cr(n,"th0","head","foot"),hr(null,a,u)},416:function(e,t,n,r){let[l,o]=rr(e,hn(t.parentElement||n.table),t,r,!0);return hr(null,l,o)},418:function(e,t,n,r){let[l,o]=rr(e,hn(t.parentElement||n.table),t,r);return hr(null,l,o)},[Fe]:function(t,n,{h4:r},l){if(!l)return hr(null,l,!0);let o=e.empty(n),[i,s]=tr(t,n,l,(()=>gr(Ye)));return hr(Yn(n,Te,r||o),i,s)},[Me]:function(t,n,{h4:r},l){let o=e.empty(n),[i,s]=tr(t,n,l,(()=>gr(Qe)));return hr(Yn(n,Te,r||o),i,s)},[Pe]:function(e,t,{h4a:n},r){let[l,o]=tr(e,t,r,(()=>gr(Qe)));return hr(n&&Yn(t,He,n),l,o)},425:function(t,n,r){let l=e.children(r,"section");return hr(null,e.append(t,ir(l)),!0)},426:function(t,n,{explain:r},l){let[o,i]=tr(t,n,l,(()=>gr(F)));return"string"==typeof r&&(r=function(t,n){let r=n;e.isArray(n)||(r=[n]);if(r.some((e=>!tn(t,Zt(e)))))return null;return e.append(t,n)}(n,yr(W,null,r))),hr(r,o,i)},500:function(e,t,n,r){let{h1:l}=n,[o,i]=tr(e,t,r,(()=>gr(Ee)));return cr(n,"h1"),hr(l&&Yn(t,ve,l),o,i)},507:function(e,t,{h3:n},r){let[l,o]=tr(e,t,r,(()=>gr(425)));return hr(n&&Yn(t,xe,n),l,o)},508:function(e,t,{h3:n},r){let[l,o]=tr(e,t,r,(()=>gr(Qe)));return hr(n&&Yn(t,xe,n),l,o)},509:function(e,t,{h3:n},r){let[l,o]=tr(e,t,r,(()=>gr(Ye)));return hr(n&&Yn(t,xe,n),l,o)},512:function(e,t,n,r){let{header:l}=n,[o]=tr(e,t,r,or(e,t,r));return cr(n,"header"),hr(l&&Qn(t,l),o,!0)},[Ze]:function(e,t,n,r){let[l,o]=tr(e,t,r,(()=>gr(Ue)));return hr(null,l,o)},526:function(e,t,n,r){let[l,o]=tr(e,t,r,(()=>gr(te)));return hr(null,l,o)},[rt]:function(e,t,n,r){let{dt:l}=n,[o,i]=tr(e,t,r,(()=>gr(Re)));return cr(n,"dt"),hr(l&&nr(o||e,t,gr(Oe,l)),o,i)},521:function(e,t,n,r){let l,o=hn(t),i=[];return function(e,t,n){if(!t)return e.caption(null);n.push(e.caption(t))}(o,n.caption,i),function(e,t){null===t&&e.head(null);t&&e.head(!0)}(o,n.head),function(e,t){null===t&&e.foot(null);t&&e.foot(!0)}(o,n.foot),r&&"TBODY"===r.tagName&&(l=o.bodies(0,r)),cr(n,"caption"),hr(i,l||o.body(!0),!!l)},522:function(e,t,n,r){let{figcaption:l}=n,[o,i]=tr(e,t,r,(()=>gr(426)));return cr(n,"figcaption"),hr(l&&Yn(t,Ae,l),o,i)},[it]:function(e,t,n,r){let{summary:l}=n,[o,i]=tr(e,t,r,(()=>gr(me)));return cr(n,"summary"),hr(l&&Yn(t,Ne,l),o,i)}};[z,U,D].forEach((function(t){Wn[t]=function(t,n,r,l){return tn(n,l&&Zt(l))&&e.append(n,l),hr(null,n,!0)}})),[[Ue,te],[De,G],[He,G]].forEach((function(e){Wn[e[0]]=function(t,n,r,l){if(n.childElementCount>0)return hr(null,n.firstElementChild);let[o,i]=tr(null,n,l,(()=>gr(e[1])));return hr(null,o,i)}})),[Ge,Xe,qe,lt,ot].forEach((function(e){Wn[e]=function(e,t,n,r){let{h3:l}=n,[o,i]=tr(e,t,r,(()=>gr(me)));return cr(n,"h3"),hr(l&&Yn(t,xe,l),o,i)}})),[Ye,Qe,et,tt,nt].forEach((function(e){Wn[e]=function(e,t,n,r){let[l,o]=tr(e,t,r,(()=>gr(ke)));return hr(null,l,o)}})),[Be,je,Ke,Ve,We,Je].forEach((function(e){Wn[e]=function(e,t,n,r){let{h2:l,header:o}=n,i=[l&&Yn(t,be,l),o&&Qn(t,o)],[s]=tr(e,t,r,or(e,t,r));return cr(n,"h2","header"),hr(i.filter((e=>e)),s,!0)}})),[H,W,G,X,q,J,Y,Q,Z,ee,ne,re,le,oe,ie,se,ae,ue,ce,fe,de,pe,he,at,ut,me,ge,_e,we,ye,ve,be,xe,Ee,Te,Se,Ce,Ne,Ae,$e,ke,Oe,Re,Ie,Le].forEach((function(t){Wn[t]=function(t,n,r,l){return l=e.isArray(l)?e.map(l,(e=>ur(n,e))).flat():ur(n,l),nr(t,n,l),hr(null,l,!0)}}));const Gn={4:function(t,n){return e.attribute(t,n)},[ee]:function(t,{date:n,time:r}){return e.attr(t,"datetime",sr(n,r))},[J]:function(t,{date:n,time:r,cite:l}){return e.attribute(t,"datetime cite",[sr(n,r),l||null])},[Y]:function(t,{date:n,time:r,cite:l}){return e.attribute(t,"datetime cite",[sr(n,r),l||null])},7:function(t,{width:n}){return n&&e.css(t,"width",n),t},[st]:function(t,{role:n,thick:r,length:l,space:o}){return n&&e.attr(t,"role",n),e.cssSets(t,"borderWidth width height",[r,l,o])},521:function(t,{cols:n,border:r}){let l=new e.Table(t,n);return r&&e.attr(t,"border",r),hn(t,l)||t}};[[z,["src","autoplay","loop","controls"]],[U,["src","autoplay","loop","controls","poster","width","height"]],[F,["src","alt","width","height"]],[j,["src","alt","width","height"]],[P,["src","type"]],[B,["srcset","media"]],[M,["kind","src","srclang","label","default"]],[H,["value","max","min","high","low","optimum"]],[ke,["value"]],[Ue,["value"]],[De,["value"]],[Fe,["value"]],[Me,["value"]],[Pe,["value"]],[lt,["cite"]],[it,["open"]],[G,["href","target","title"]],[X,["cite"]],[q,["title"]],[Q,["title"]],[Z,["dir"]],[Ze,["lang:-lang","start"]],[te,["lang:-lang"]],[W,["fix:-pba"]]].forEach((function(t){Gn[t[0]]=(n,r)=>e.attribute(n,function(e,t){let n={};for(const r of t){let[t,l]=r.split(":");void 0!==e[t]&&(n[l||t]=e[t])}return n}(r,t[1]))}));const Xn={[X]:function(t,n={}){return n.cite=e.attr(t,"cite"),[n,e.Text(t)]},[q]:fr,[J]:dr,[Y]:dr,[Q]:fr,[Z]:function(t,n={}){return n.dir=e.attr(t,"dir"),[n,e.Text(t)]},[ee]:dr};[G,te,ne,re,le,oe,ie,se,ae,ue,ce,fe,de,pe,he].forEach((function(t){Xn[t]=(t,n)=>[n||{},e.Text(t)]}));const qn={[lt]:pr,[ot]:pr,[it]:function(t,n={}){let r=e.get("summary",t),l=e.children(t);return r&&(n.h3=r.textContent,l.splice(l.indexOf(r),1)),n.open=!0,[n,l.map(rn)]}};[Ye,Qe,et,tt,nt,rt].forEach((function(t){qn[t]=function(t,n={}){return n.open=!0,[n,e.children(t).map(rn)]}}));const Jn={};function Yn(t,n,r){let l=t.firstElementChild;return l===r?l:(l&&Zt(l)===n||(l=e.prepend(t,gr(n))),r.nodeType&&Zt(r)===n?e.replace(l,r):(e.fill(l,r.nodeType?e.contents(r):r),l))}function Qn(t,n){let r=e.get(">header",t);if(r)return r===n?r:e.replace(r,n);let l=e.get(">h2",t);return l?e.after(l,n):e.prepend(t,n)}function Zn(e,t,n){return t.forEach((t=>e.insertTR(t,null,n))),n}function er(t,n,r){let l=[];for(const o of n)l.push(t.newTR(r)),e("th,td",l[l.length-1]).fill(o);return l}function tr(e,t,n,r){if(!n)return[null,!0];let l=n.nodeType?Zt(n):0;return tn(t,l)&&!xt(l)?[nr(e,t,n),!0]:[nr(e,t,r()),!1]}function nr(t,n,r){return t?e.before(t,r):e.append(n,r)}function rr(e,t,n,r,l){if(!r)return[null,!0];let o=e?t.trIndex(e,n):null;return"TR"!==r.tagName||!function(e,t){return function(e){return[...e.cells].reduce(((e,t)=>e+t.colSpan),0)}(e)===t.cols()}(r,t)||l&&![...r.cells].every((e=>"TH"===e.tagName))?[t.insertTR(t.newTR(l),o,n),!1]:[t.insertTR(r,o,n),!0]}function lr(t,n,r){if("SECTION"!==r.tagName)return;nr(t,n,function(t,n){return e.find("section",t,!0).forEach((e=>wn(e,n))),t}(r,("ARTICLE"===n.tagName?0:_n(n))-_n(r)+1))}function or(e,t,n){switch(It(t)){case 0:case 1:return()=>yr(me,null,n);case 2:return()=>lr(e,t,n)}return null}function ir(t){return t.map((t=>function(t){let n=e.get(">h2",t),r=e.children(t,"section");n||function(e,t){t&&window.console.info(t);throw new Error(e)}("<H2> is missed...!!",t);if(!r.length)return l=n,_r(gr(De),{href:l.id?`#${l.id}`:null},l.innerText);var l;let o=function(e){let t=_r(gr(G),{href:e.id?`#${e.id}`:null},e.innerText);return _r(gr(Pe),{h4a:[t]},gr(Qe))}(n);return e.append(o.lastElementChild,ir(r)),o}(t)))}function sr(e,t){return t&&(e=e?`${e} ${t}`:`${t}`),e||null}function ar(t,n,r){return"string"==typeof r&&(r=function(t){return e.find("*",t).forEach((e=>en(e,107))),t}(e.fragment(r,"svg"))),nr(t,n,r)}function ur(t,n){return!n||n.nodeType>1?n||null:"string"==typeof n?e.Text(n,!0):Rt(Zt(t))?e.Text(n):ln(n).map((n=>tn(t,Zt(n))?n:e.Text(n)))}function cr(e,...t){t.forEach((t=>delete e[t]))}function fr(t,n={}){return n.title=e.attr(t,"title"),[n,e.Text(t)]}function dr(t,n={}){let r=e.attr(t,"datetime");return r&&([n.date,n.time]=r.split(/\s+/)),n.cite=e.attr(t,"cite"),n.datetime=r,[n,e.Text(t)]}function pr(t,n={}){let r=e.get("h3",t),l=e.children(t);return r&&(n.h3=r.textContent,n.summary=r.textContent,l.splice(l.indexOf(r),1)),n.open=!0,[n,e(l).clone()]}function hr(e,t,n=!1){return{head:e||null,body:t,end:n}}function mr(t,n){return t?(e.isArray(t)?t:[t]).concat(n):e.isArray(n)?n:[n]}function gr(t,n){let r=Vn[t],l=r?r():function(t,n){let r=e.elem(t);return n&&r.setAttribute("role",n)||r}(...Kn[t].split("\\"));return n&&e.append(l,n),en(l,t)}function _r(e,t,n,r){let l=Zt(e),o=Gn[l];return o&&(e=o(e,t)),Wn[l]&&function(e,t,n,r){if(r)return n.forEach((n=>wr(null,e,t,n)));wr(null,e,t,n)}(e,t,n,r),e}function wr(t,n,r,l){let o=Zt(n),i=Wn[o](t,n,r,l);return i.end?mr(i.head,i.body):e.isArray(i.body)?mr(i.head,i.body.map(((t,n)=>_r(t,r,function(t,n){return e.isArray(t)?t[n]:t}(l,n))))):mr(i.head,_r(i.body,r,l))}function yr(e,t,n,r){if("string"==typeof e&&(e=zt[e.toUpperCase()]),null==e)throw new Error("invalid target name.");return _r(gr(e),t||{},n,r)}function vr(e){let t=Zt(e);return qn[t]?w.convBlocks:Jn[t]?w.convLines:Xn[t]&&!function(e){let t=Zt(e.parentElement);return 526===t||t===Ue}(e)?w.convInlines:null}function br(e){let t=Zt(e),n=Xn[t]||Jn[t]||qn[t];if(!n)throw new Error(`[${e}] convert is not supported.`);return n(e)}[me,ge,_e,we,ye].forEach((function(e){Jn[e]=(e,t={})=>[(t.open=!0,t),rn(e)]})),s(_,"New",(function(e){let t=zt[e.toUpperCase()];if(null==t)throw new Error("invalid target name.");return(e,n,r)=>_r(gr(t),n||{},e.data,r)}),1),s(_,"New2",(function(e){let t=zt[e.toUpperCase()];if(null==t)throw new Error("invalid target name.");return(e,n)=>e.data.map((e=>_r(gr(t),n||{},e)))}),1);
//! $ID: templates.js 2020.05.09 Cooljed.Config $
const xr={0:"option:text",[z]:"option:audio",[U]:"option:video",[D]:"option:picture",4:"option:svg",5:"option:ruby",[H]:"option:meter",7:"option:space",[F]:"option:img",9:"option:br",10:"option:wbr",[M]:"option:track",[P]:"option:source1",[B]:"option:source2",[j]:"option:pimg",[W]:"option:explain",107:"option:svgitem",[G]:"option:a",[X]:"option:q",[q]:"option:abbr",[J]:"option:del",[Y]:"option:ins",[Q]:"option:dfn",[Z]:"option:bdo",[ee]:"option:times",[te]:"option:code",[ne]:"option:strong",[re]:"option:em",[le]:"option:cite",[oe]:"option:small",[ie]:"option:sub",[se]:"option:sup",[ae]:"option:mark",[ue]:"option:orz",[ce]:"option:samp",[fe]:"option:kbd",[de]:"option:s",[pe]:"option:u",[he]:"option:var",[me]:"option:p",[ge]:"option:note",[_e]:"option:tips",[we]:"option:pre",[ye]:"option:address",[ve]:"option:h1",[be]:"option:h2",[xe]:"option:h3",[Ee]:"option:h3x",[Te]:"option:h4",[Se]:"option:h5",[Ce]:"option:h6",[Ne]:"option:summary",[Ae]:"option:figcaption",[$e]:"option:caption",[ke]:"option:li",[Oe]:"option:dt",[Re]:"option:dd",[ze]:"option:tr",416:"option:thead",417:"option:tbody",418:"option:tfoot",[Ue]:"option:codeli",[De]:"option:ali",[He]:"option:ah4",[Fe]:"option:xh4li",[Me]:"option:xolh4li",[Pe]:"option:xolah4li",426:"option:figimgbox",500:"option:hgroup",512:"option:article",[Be]:"option:s1",[je]:"option:s2",[Ke]:"option:s3",[Ve]:"option:s4",[We]:"option:s5",[Ge]:"option:abstract",509:"option:seealso",508:"option:reference",[Xe]:"option:header",[qe]:"option:footer",[Je]:"option:section",[Ye]:"option:ul",[Qe]:"option:ol",[Ze]:"option:codelist",[et]:"option:ulx",[tt]:"option:olx",[nt]:"option:cascade",[rt]:"option:dl",521:"option:table",522:"option:figure",[lt]:"option:blockquote",[ot]:"option:aside",[it]:"option:details",526:"option:codeblock",[st]:"option:hr",528:"option:blank"},Er={[z]:"property:audio",[U]:"property:video",[D]:"property:picture",[F]:"property:img",[j]:"property:img",4:"property:svg",5:"property:ruby",[ee]:"property:times",[H]:"property:meter",7:"property:space",[G]:"property:a",[X]:"property:q",[q]:"property:abbr",[J]:"property:del",[Y]:"property:ins",[te]:"property:code",[Q]:"property:dfn",[Z]:"property:bdo",[lt]:"property:blockquote",[Ze]:"property:codelist",[Qe]:"property:ol",[tt]:"property:olx",[ke]:"property:li",[Ue]:"property:li",[De]:"property:li",[Fe]:"property:li",[Me]:"property:li",[Pe]:"property:li",521:"property:table",[st]:"property:hr",528:"property:blank",[W]:"property:explain",[ve]:"property:h1",[be]:"property:h2",[xe]:"property:h3",[Te]:"property:h4",[Se]:"property:h5",[Ce]:"property:h6"},Tr=new Set([K,V,Ie,Le,j,10,-10]);
//! $ID: shedit.js 2021.04.08 Cooljed.Libs $
const Sr=new e.Fx.History,Cr=new En(`${w.nameEditor}_${w.scriptList}`),Nr=new Tn(y.shEdits,Sr),Ar=Symbol("sh:dpage"),$r=Symbol("sh:pager");let kr=null,Or=null,Rr=!1;class Ir{constructor(t){this.$els=e(t),this.count=null,this.redo()}undo(){this.count>0&&Sr.back(this.count)}redo(){let e=Sr.size();this.$els.remove(),this.count=Sr.size()-e}}class Lr{constructor(e){this._sid=e,this._old=Cr.get(e),this.redo()}undo(){Cr.set(this._sid,this._old)}redo(){Cr.del(this._sid)}}class zr{constructor(e,t){let n=e[Ar];this._idx=n.index();let r=Hr(n[t]()),l=n.index();this._nav=e,this._new=e[$r].page(l,r),this._pgn=l+1,this._pgs=n.pages(),this.count=null,this.redo()}undo(){this.count>0&&Sr.back(this.count),this._nav[Ar].index(this._idx)}redo(){let e=Sr.size();Fr(this._nav,"page",this._new,"state",this._pgn,this._pgs),this.count=Sr.size()-e}}function Ur(...t){e.trigger(Or,"state",!0),Nr.push(...t.filter((e=>e)))}function Dr(e){let t=Cr.get(e);return t?JSON.parse(t):null}function Hr(t){return(t=e.map(t,Dr)).edit=Rr,t.cmax=y.shCodelen,t}function Fr(t,n,r,l,o,i){var s,a;e.trigger(t,n,r),e.trigger(t,l,[[o,i],(s=o,a=i,a<=1?[!0,!0,!0,!0]:[1===s,1===s,s===a,s===a])])}function Mr(e,t){let n=e.index();return t.page(n,Hr(e.page(n)))}function Pr(e,t=0){let n=Date.now()+t;return e.has(n)?Pr(e,parseInt(240*Math.random()*3600*1e3)):n}function Br(e){if(!e||function(e){return Cr.keys().some((t=>Dr(t).code===e))}(e))return;let t=Pr(Cr),n={shid:t,code:e,time:Date.now()};Cr.set(t,JSON.stringify(n))}const jr={spinit(e){kr=e.data},__spinit:1,shUndo:()=>(Nr.undo(),!Nr.canUndo()),shRedo:()=>(Nr.redo(),!Nr.canRedo()),shinit(e,t,n,r,l){Or=e.data,r[Ar]=new Sn(null,y.shListTop),r[$r]=new Cn(t),l[Ar]=new Sn(null,y.shListAll),l[$r]=new Cn(n)},__shinit:1,delsh(e,t){Rr&&Ur(new Ir(e.data),new Lr(t))},__delsh:1,topsh(e){let t=Dr(e.data);return t&&(t.top=!0,Cr.set(e.data,JSON.stringify(t))),t&&e.data},__topsh:1,untop(e){let t=Dr(e.data);return t&&(t.top=!1,Cr.set(e.data,JSON.stringify(t))),t&&e.data},__untop:1,shlabel(e,t){let n=Dr(e.data);return n&&(n.name=t,Cr.set(e.data,JSON.stringify(n))),n&&[t,e.data]},__shlabel:1,shpage(e,t){let n=new zr(e.data,t);Rr&&Ur(n)},__shpage:1,shtops(e){let t=e.data,n=t[Ar].reset(function(){let e=[];for(const t of Cr.keys()){let n=Dr(t);n&&n.top&&n.code&&e.push({id:n.shid,tm:n.time})}return e.sort(((e,t)=>t.tm-e.tm)).map((e=>e.id))}()),r=Mr(n,t[$r].reset());Fr(t,"page",r,"state",n.index()+1,n.pages())},__shtops:1,shIndex:e=>(Rr=!0,e.data.map((e=>Mr(e[Ar],e[$r].reset())))),__shIndex:1,shEdin(t){Nr.clear(),e.on(t.data,"nodeok emptied detach",null,Sr),e.on(t.data,"attrdone","nav >b",Sr)},__shEdin:1,shEdok(t){Rr=!1,Nr.clear(),e.off(t.data,"nodeok emptied detach attrdone",!1,Sr)},__shEdok:1,sh2panel(t,n,r,l,o){let i=e.outerHeight(r,!0)+e.outerHeight(l,!0),s=e.outerHeight(o,!0)-e.height(o);return[e.height(r)+t.data,e.height(n)-(i+s+t.data)]},__sh2panel:1,shsearch(e,t){let n=t[Ar].reset(function(e){let t=function(...e){return t=>e.some((e=>e.every((e=>t.includes(e)))))}(...e.split(",").map((e=>e.trim().split(/\s+/)))),n=[];for(const e of Cr.keys().reverse()){let r=Dr(e);r&&r.code&&t(r.code)&&n.push({id:r.shid,tm:r.time})}return n.sort(((e,t)=>t.tm-e.tm)).map((e=>e.id))}(e.data)),r=Mr(n,t[$r].reset());Fr(t,"page",r,"state",n.index()+1,n.pages())},__shsearch:1,shcode(t){e.trigger(kr,"shcode",t.data)},__shcode:1,shsave(e){Br(e.data)},__shsave:1};a(_,"Kit",jr,["spinit","shUndo","shRedo","shinit","delsh","topsh","untop","shlabel","shpage","shtops","shEdin","shEdok","shIndex","sh2panel","shsearch","shcode","shsave"]);
//! $ID: coloring.js 2020.02.07 Cooljed.Libs $
const Kr={keyword:"kw",literal:"lit",number:"num",function:"fn",operator:"op",builtin:"bin",datatype:"dt",xmltag:"tag",attribute:"atn",regex:"re",selector:"slr",rgba:"rgb",unit:"un",important:"imp",doctype:"doc",error:"err",comments:null};function Vr(e,t){return null==t?e:"string"==t?`<s>${e}</s>`:"comments"==t?`<i>${e}</i>`:`<b role="${Kr[t]||"non"}">${e}</b>`}function Wr(t,n,r){return e.html(t,Vr(n,r),"append"),t}function Gr(e){return e.map((e=>"string"==typeof e?e:Vr(e.text,e.type))).join("")}function Xr(e){let t=e[0],n=e[e.length-1];return t.text&&t.text.startsWith("\n")&&(t.text=t.text.substring(1)),n.text&&n.text.endsWith("\n")&&(n.text=n.text.slice(0,-1)),e}function qr(t,n){let{text:r,type:l}=t;return e.isArray(r)&&(r=Gr(r)),[Wr(n,r,l)]}function Jr(t,n){let{text:r,type:l}=t,o=(e.isArray(r)?Gr(r):r).split("\n");return[Wr(n,o.shift(),l),...o.map((e=>Wr(n.cloneNode(),e,l)))]}function Yr(e,t,n){let r=[],l=yr(te,{lang:e});for(const o of t)void 0===o.text?(r.push(...Yr(o.lang,Xr(o.data),n)),l=yr(te,{lang:e})):(r.push(...n(o,l)),l=r[r.length-1]);return[...new Set(r)].filter((e=>!e.normalize()))}
//! $ID: property.js 2021.06.16 Cooljed.Libs $
const Qr=/\s+/g,Zr=e([w.rpLeft,w.rpRight]).elem("rp"),el={[z]:function(t,n,r,l){e.attribute(t,r),void 0!==l&&ul(t,"source",l)},[U]:function(t,n,r,l,o){e.attribute(t,r),void 0!==l&&ul(t,"source",l);void 0!==o&&ul(t,"track",o)},[D]:function(t,n,r,l){let o=e.get("img",t);void 0!==l&&(e.fill(t,l),e.append(t,o));e.attribute(o,r)},[F]:ll,[j]:ll,4:ll,5:function(t,n,r,l,o,i){let s=e("rp",t),a=e.get("rt",t);void 0!==l&&(e.fill(t,l),a&&e.append(t,[s[0],a,s[1]]));if(void 0===r)return;a?e.fill(a,r):e.append(t,[o,e.elem("rt",r),i])},[H]:ll,7:rl,[G]:ll,[J]:ll,[Y]:ll,[te]:function(t,n,r,l){void 0!==r&&e.attr(t,"-lang",function(t,n){let r=t.parentElement.parentElement;if(Zt(r)!==Ze)return n;return e.attr(r,"-lang")===n?null:n}(t,r));void 0!==l&&e.fill(t,l)},[Ze]:function(t,n,r,l){e.attribute(t,r),void 0!==l&&e.fill(t,e(l).elem("li"))},[Qe]:ll,[tt]:ll,[ke]:ll,[Ue]:ll,[De]:ll,[Fe]:ll,[Me]:ll,[Pe]:ll,521:function(t,n,r,l,o){let i=new e.Table(t);void 0!==r&&e.attr(t,"border",r);void 0!==l&&al(i,l,0);void 0!==o&&al(i,o,null)},[st]:function(t,n,r,l){e.cssSets(t,n,r),e.attr(t,"role",l)},528:rl,[W]:function(t,n,r){e.attr(t,n,r),e.cssSets(t,"top right bottom left",null)}},tl={[z]:function(e,t,n,r){return t.autoplay=n[0],t.loop=n[1],t.controls=n[2],[fl(t,"",null),r]},[U]:function(e,t,n,[r,l]){return t.autoplay=n[0],t.loop=n[1],t.controls=n[2],[fl(t,"",null),r,l]},[D]:function(e,t,n){return[fl(t,"",null),n]},5:function(t,n,r){let l=e.get("rt",t);return e([n,r]).Text().concat(l?[]:Zr.clone())},521:cl,[ee]:ol,[J]:ol,[Y]:ol,[te]:sl,[Ze]:function(t,n,r){let l={"-lang":n,start:r},o=e.attr(t,"-lang")||"";if(fl(l,"",null),n===o)return[l];return[l,hl(t,n)]}},nl={[z]:function(t,n,r,l){let o=l&&e(l);return n.autoplay=r[0],n.loop=r[1],n.controls=r[2],fl(n,"",void 0),fl(n,null,void 0),t.map((()=>[n,o?o.clone():void 0]))},[U]:function(t,n,r,[l,o]){let i=l&&e(l),s=o&&e(o);return n.autoplay=r[0],n.loop=r[1],n.controls=r[2],fl(n,"",void 0),fl(n,null,void 0),t.map((()=>[n,i?i.clone():void 0,s?s.clone():void 0]))},[D]:function(t,n,r){let l=r&&e(r);return fl(n,"",void 0),t.map((()=>[n,l?l.clone():void 0]))},5:function(t,n,r){let l=[void 0,void 0];n&&(l[0]=e.Text(n));r&&(l[1]=e.Text(r));return t.map((t=>l.concat(e.get("rt",t)?[]:Zr.clone())))},521:function(e,t,n,r){return e.map((e=>cl(e,t,n,r)))},[ee]:il,[J]:il,[Y]:il,[te]:function(e,t){return e.map((e=>sl(e,t)))},[Ze]:function(t,n,r){return t.map((t=>function(t,n,r){let l={"-lang":n,start:r},o=e.attr(t,"-lang")||"";if(fl(l,"",void 0),fl(l,null,void 0),n===o||null===n)return[l];return[l,hl(t,n)]}(t,n,r)))}};function rl(t,n,...r){e.cssSets(t,n,r)}function ll(t,n,...r){e.attribute(t,n,r)}function ol(e,t,n,r){return n&&(t=t?`${t} ${n}`:`${n}`),[t||null,r||null]}function il(e,t,n,r){return n&&(t=t?`${t} ${n}`:`${n}`),dl(e,[t||void 0,r||void 0])}function sl(t,n){let r=t.textContent;if(""===n)return[null,e.Text(r)];let l=Yr(null,jn([r],n),qr);return[n,(o=l,o.map((e=>[...e.childNodes])).flat())];var o}function al(e,t,n){let r=e.hasVth(null==n);t?r||e.insertColumn(t,n):r&&e.removeColumn(null==n?-1:n)}function ul(t,n,r){e.find(n,t).forEach((t=>e.remove(t))),e.append(t,r)}function cl(t,n,r,l){let o=new e.Table(t),i=o.hasVth(),s=o.hasVth(!0);return[n,r?i||o.newColumn(!0):null===r?void 0:null,l?s||o.newColumn(!0):null===l?void 0:null]}function fl(e,t,n){for(const r of Object.keys(e))e[r]===t&&(e[r]=n);return e}function dl(e,t){return new Array(e.length).fill(t)}function pl(e,t){let n=e.map((e=>e.hasVth(!!t)));return 1===n.length||1===new Set(n).size?[n[0],!1]:[null,!0]}function hl(t,n){let r=e.children(t).map((e=>e.textContent));return""===n?e(r).elem("code"):Yr(null,jn(r,n),Jr)}const ml={vals1:e=>1===e.data.length||1===new Set(e.data).size?e.data[0]||"":null,__vals1:1,vals2:e=>1===e.data.length||1===new Set(e.data).size?[e.data[0],!1]:[null,!0],__vals2:1,tableVth(t){let n=t.data.map((t=>new e.Table(t)));return[pl(n),pl(n,!0)]},__tableVth:1,attrVal:(t,n)=>n.split(Qr).map((n=>function(t,n){let r=t.map((t=>e.attr(t,n)));return 1===r.length||1===new Set(r).size?r[0]||"":null}(t.data,n))),__attrVal:1,attrBool:(t,n)=>n.split(Qr).map((n=>function(t,n){let r=t.map((t=>e.attr(t,n)));return 1===r.length||1===new Set(r).size?[null!==r[0],!1]:[null,!0]}(t.data,n))),__attrBool:1};u(v,"p",ml,Object.keys(ml).filter((e=>"_"!==e[0])));
//! $ID: plugins.js 2021.09.23 Cooljed.Plugins $
const gl=c(Object.create(f),Object.create(d)),_l=new Map,wl=new WeakMap;function yl(n,r){return t.json(`${n}/${r}`).then((t=>function(t,n){if(n.style)return e.style({href:`${N}${t}/${n.style}`}).then((()=>n));return n}(n,t))).then((e=>function(e,n){if(!n.maps)return null;let r=new L(gl,e);return r.config(n.maps).then((()=>t.node(`${e}/${n.node}`))).then((e=>r.build(e,n.node))).then((()=>r))}(n,e)))}function vl(t,r=null){if(_l.has(t))return Promise.resolve(null);let l=`${b.plugRoot}/${t}`,o=e.Element("img",{src:`${N}${l}/${b.plugLogo}`}),i=e.wrap(o,e.Element("button",{title:r}));return yl(l,b.plugConf).then((e=>_l.set(t,i)&&n.set(t,e)&&wl.set(i,t)&&i))}
//! $ID: cmdline.js 2021.08.08 Cooljed.Libs $
const bl=/^\[([\d:,\s]*)\]$/,xl=/\s*:\s*/,El=/^\{(.*)\}$/,Tl=/^\/(.*)\/([imsugy]*)$/,Sl=/^(['"`])(.*)\1$/,Cl=new $("|",new k,new O("[","]"),new O("{","}"));let Nl=null,Al=null;class $l{constructor(e,t){this._set=e,this._ctx=t}exec(e,t){let n=[...Cl.reset().split(e.trim())],r=n.shift();return Dl(n,this._set.size>0?this._finds(r,t,[...this._set]):this._find(r,t,this._ctx))}_find(e,t,n){return I.find(e,t,!1,n)}_finds(e,t,n){return n.map((n=>I.find(e,t,!1,n))).flat()}}class kl{constructor(e){this._set=e}exec(t){return Dl([...Cl.reset().split(t.trim())],e(this._set))}execOne(t,n){return this._handle(t.trim())(e(n))}_handle(e){return bl.test(e)?this._number(e.match(bl)[1]):El.test(e)?this._filter(e.match(El)[1]):t=>t.filter(e)}_number(e){let t=e.split(xl);return t.length>1?this._range(t):(t=JSON.parse(`[${e}]`),e=>t.map((t=>e[t])).filter((e=>e)))}_range([e,t]){return e=Math.trunc(e)||0,t=t.trim()?Math.trunc(t):void 0,n=>n.slice(e,t)}_filter(e){if("."===e[0])return new Function("$$",`return $$${e}`);let t=new Function(`return (${e});`)();return e=>e.filter(t)}}class Ol{constructor(e){this._ctx=e,this._doc=e.ownerDocument}exec(e,t){let n=[];Tl.test(e)&&(e=this._regexp(e));for(const r of t)n.push(...this._ranges(r,e));return n}_ranges(e,t){let n=[],r=0,l=0;for(;[r,l]=this._search(e.textContent,t,r),!(r<0);)n.push(this._range(e,r,l)),r+=l;return n}_search(e,t,n){if("string"==typeof t)return[e.indexOf(t,n),t.length];let r=e.substring(n),l=r&&r.match(t);return l?[n+l.index,l[0].length]:[-1,0]}_range(e,t,n){let r=this._doc.createRange();return r.setStart(e,t),r.setEnd(e,t+n),r}_regexp(e){let[t,n]=e.match(Tl).slice(1);return n&&(n=n.split("").filter((e=>"g"!==e)).join("")),new RegExp(t,n)}}class Rl{constructor(){this._cmds=new Map([["help",this._help],["plug-ins",this._plugIns],["plug-del",this._plugDel],["theme",this._theme],["style",this._style],["config",this._config]])}exec(e){let[t,n]=this._cmdArgs(e),r=this._cmds.get(t);if(!t)return E.commandInvalid;try{return r(...n)||""}catch(e){return`[${e.name}] ${e.message}`}}_cmdArgs(e){for(const t of this._cmds.keys())if(e===t||e.startsWith(t+" "))return[t,this._args(e.substring(t.length+1))];return[]}_args(t){return e.split(t," ",1/0,!0).filter((e=>e)).map((e=>Sl.test(e)?e.match(Sl)[2]:e))}_help(t){e.trigger(Nl,"open"),e.trigger(Nl,"help",t)}_plugIns(t,n){e.trigger(Al,w.plugIns,vl(t,n))}_plugDel(t){e.trigger(Al,w.plugDel,function(e){let t=_l.get(e);return t&&(_l.delete(e),n.delete(e)),t||null}(t))}_theme(e){return e?(Hl(`#${b.styleTheme}`,{id:b.styleTheme,url:`${N}${b.themes}/${e}/style.css`}),`[${e}] theme installed.`):"请键入准确的主题ID，目前暂不支持清单罗列。"}_style(e,t){return e||t?(e&&Hl(`#${b.styleMain}`,{id:b.styleMain,url:`${N}${b.styles}/${e}/main.css`}),t&&Hl(`#${b.styleCodes}`,{id:b.styleCodes,url:`${N}${b.styles}/${t}/codes.css`}),`[${e} ${t}] style installed.`):"请键入准确的样式ID，目前暂不支持清单罗列。"}_config(e){return y[e]||E.configNothing}}class Il{constructor(e,t){this._set=e,this._ctx=t}exec(t,n){let r=new Function("$$","$","_",`return ${t};`),l=null;try{l=r(e(this._set),n,this._ctx)}catch(e){l=`[${e.name}]: ${e.message}`}return""+l}}class Ll{constructor(){this._buf=[]}add(e){this._buf[this._buf.length-1]!==e&&this._buf.push(e)}find(e){let t=this._buf.slice().reverse(),n=[],r=0;for(;r>=0;)r=this._indexOf(e,t,r),r>=0&&n.push(t[r++]);return n}size(){return this._buf.length}_indexOf(e,t,n=0){for(;n<t.length;n++)if(t[n].startsWith(e))return n;return-1}}class zl{constructor(e){this._buf=e,this._idx=0}next(){let e=this.size()-1;return this._idx<e?this._buf[++this._idx]:null}prev(){return this._idx>0?this._buf[--this._idx]:null}first(){return this._idx=0,this._buf[0]||null}last(){return this._idx=this._buf.length-1,this._buf[this._idx]||null}reset(){return this._idx=0,this}size(){return this._buf.length}}const Ul={[x.select]:new Ll,[x.filter]:new Ll,[x.search]:new Ll,[x.command]:new Ll,[x.calcuate]:new Ll};function Dl(e,t){return e.reduce(((e,t)=>(new kl).execOne(t,e)),t)}function Hl(t,n){let r=e.get(t);e.style(n,r&&r.nextElementSibling),r&&e.remove(r)}function Fl(t,n){Nl=t,Al=n,e.trigger(n,w.plugInit,b.plugList.reduce(((e,t)=>e.then((e=>vl(t[0],t[1]).then((t=>e.push(t)&&e))))),Promise.resolve([])))}function Ml(e){return Ul[e]}
//! $ID: edit.js 2019.09.07 Cooljed.Libs $
const Pl=e.Fx.History.Normalize,Bl=`${w.selectedClass} ${w.focusClass} ${w.hoverClass} ${w.pointClass}`,jl=`.${w.selectedClass}, .${w.focusClass}, .${w.hoverClass}, .${w.pointClass}`,Kl=Symbol(),Vl=/\s+/g,Wl=/\n\s*\n/,Gl=/(\s)\s*/g,Xl=/\r\n|\n|\r/,ql=/section|article/i,Jl=/\sclass="[\w\s]+"/,Yl={[Oe]:["dd",rt],[Ne]:["p",it],[xe]:["p",Ge],[xe]:["p",Xe],[xe]:["p",qe],[xe]:["p",lt],[xe]:["p",ot]},Ql=new Set([ke,Oe,Re,me,_e,ge,ye]),Zl={minied:"miniedIn",toup:"indentReduce",todown:"indentIncrease",delete:"deletes",property:"properties"},eo={children:Li,siblings:function(e){return Li([...Ri(e)])}},to=new Set(["a","ruby","bdo"]),no=`${r.on} ${r.by} ${r.to}`,ro=new Set([r.on,r.by,r.to,no]),lo=new bn(w.selectedClass),oo=new class{constructor(e){this._cls=e,this._its=null}set(e){let t=this._its;return t!==e&&this._set(e),t}get(){return this._its||null}is(e){return!!e&&e===this._its}cancel(){return this._its&&e.removeClass(this._its,this._cls),this._its=null}_set(t){if(null==t)return this.cancel();this._its&&e.removeClass(this._its,this._cls),this._its=e.addClass(t,this._cls)}}(w.focusClass),io=new class{constructor(t="_cursor_"){let n=t+(Date.now()%4294967295).toString(16);this._cel=e.attr(e.elem("i"),n,""),this._slr=`[${n}]`}cursor(t,n){let r=n.commonAncestorContainer,l=e.contains(t,r);return l&&(3===r.nodeType&&0===n.endOffset&&n.setEnd(n.endContainer,1),n.collapse(!1),n.insertNode(this._cel)),n.detach(),l&&t}active(t){let n=e.get(this._slr,t),r=document.createRange();return n?(r.selectNode(n),r.deleteContents(),t.normalize()):r.selectNodeContents(t),this._active(r,t)}active2(t,n=!1){let r=e.get(this._slr,t),l=document.createRange();return r&&(r.remove(),t.normalize()),l.selectNodeContents(t),l.collapse(n),this._active(l,t)}clean(t){let n=e.get(this._slr,t);return n&&(n.remove(),t.normalize()),n&&t}_active(e,t){let n=window.getSelection();return n.removeAllRanges(),n.addRange(e),e.detach(),t.focus(),t}},so=new e.Fx.History,ao=new En(`${w.nameEditor}_`),uo=new $(";",new k,new R);class co{constructor(e,...t){this._fun=e,this._vals=t,this.count=null,this.redo()}undo(){this.count>0&&so.back(this.count)}redo(){let e=so.size();this._fun(...this._vals),this.count=so.size()-e}changed(){return this.count>0}}class fo{constructor(e,...t){this._fun=e,this._args=t,this._data,this.count=null,this.redo()}undo(){this.count>0&&so.back(this.count)}redo(){let e=so.size();this._data=this._fun(...this._args),this.count=so.size()-e}changed(){return this.count>0}result(){return this._data}warn(e){if(void 0===e)return this._msg;this._msg=e}}class po{constructor(e,...t){this._fun=e,this._vals=t,this._old=[...lo],this.redo()}undo(){lo.clear().pushes(this._old),Ii(ko,w.evnFollow)}redo(){this._fun(...this._vals),Ii(ko,w.evnFollow)}}class ho{constructor(e=oo.get()){this._hot=e,this._old=zo(e)}undo(){zo(this._old)}redo(){zo(this._hot)}}class mo{constructor(e){e&&this.redo()}undo(){Ii(ko,w.evnFollow)}redo(){Ii(ko,w.evnFollow)}}class go{constructor(e,t){this._el=yr(t,...this._optData(t,e)),this._old=[...e.extractContents().childNodes],e.detach(),e.insertNode(this._el),this._tmp=null}undo(){let e=this._el.parentElement;this._el.replaceWith(...this._old),this._tmp=new Pl(e),e.normalize()}redo(){this._tmp.back(),this._old.slice(1).forEach((e=>e.remove())),this._old[0].replaceWith(this._el)}elem(){return this._el}completed(){return this._whole}_optData(e,t){let n=this[`_${e}`];return n?n(this,t.toString(),t):[null,t.cloneContents()]}_a(e,t,n){return e._whole=go.url.test(t.trim()),[e._whole&&{href:t},n.cloneContents()]}_ruby(e,t,n){let r=t.trim().match(go.ruby),l=r?r[2]:w.rtHolder,o=r?r[1]:n.cloneContents();return e._whole=r,[{rt:l},o]}}go.url=/^(?:http|https|ftp|email):\/\/\w[\w.-]+\/\S+$/i,go.ruby=RegExp(`^([\\S\\x20]+)\\${w.rpLeft}([\\w\\u00c0-\\u017e\\u3105-\\u312d ]+)\\${w.rpRight}$`,"i");class _o{constructor(t){this._el=e.attr(e.elem("mark",t.toString()),"role","tmp"),this._old=[...t.extractContents().childNodes],t.detach(),t.insertNode(this._el),this._tmp=null}undo(){let e=this._el.parentElement;this._el.replaceWith(...this._old),this._tmp=new Pl(e),e.normalize()}redo(){this._tmp.back(),this._old.slice(1).forEach((e=>e.remove())),this._old[0].replaceWith(this._el)}elem(){return this._el}}class wo{constructor(e,t){this._cp=this._clone(e,t),this._el=e,e.replaceWith(this._cp),this._cp.setAttribute("contenteditable",!0)}active(){io.active(this._cp)}activeEnd(){io.active2(this._cp,!1)}done(){return this._clean(this._cp),this._cp.normalize(),this._cp.removeAttribute("contenteditable"),this._cp}elem(){return this._cp}original(){return this._el}undo(){this._cp.replaceWith(this._el)}redo(){this._el.replaceWith(this._cp)}_clone(t,n){io.cursor(t,n);let r=e.clone(t,!0,!0,!0);return io.clean(t),r}_clean(t){let n=Zt(t);Zi(n===we||n===te?()=>e("br",t).replace("\n"):()=>e(">b, >i",t).unwrap())}}const yo=new class{only(e){if(1==lo.size&&lo.has(e))return!1;lo.clear(),lo.add(e)}turn(e){lo.has(e)?lo.delete(e):this.clean(e).add(e)}reverse(e){for(const t of e)lo.has(t)?lo.delete(t):this._parentAdd(t)}expand(e,t){return lo.has(t)?this.adds(e):this.removes(e)}adds(e){e.forEach((e=>lo.has(e)||this._parentAdd(e)))}removes(e){e.forEach((e=>lo.has(e)&&lo.delete(e)))}empty(){if(0==lo.size)return!1;lo.clear()}add(e){lo.has(e)||this.clean(e).add(e)}safeAdd(e){lo.has(e)||lo.add(e)}safeAdds(e){lo.pushes(e)}delete(e){return lo.has(e)&&lo.delete(e)}unshift(e){let t=[...lo];t.length&&lo.clear(),this.adds(e.concat(t))}cleanUp(e){let t=this._parentItem(e);return!!t&&(lo.delete(t),lo)}cleanDown(e){let t=this._contains(e);return!!t.length&&(t.forEach((e=>lo.delete(e))),lo)}clean(e){return this.cleanUp(e)||this.cleanDown(e)||lo}_parentAdd(e){this.cleanDown(e),lo.add(e)}_parentItem(t){for(const n of lo)if(e.contains(n,t,!0))return n;return null}_contains(t){let n=[];return lo.forEach((r=>e.contains(t,r,!0)&&n.push(r))),n}},vo=new class{toText(e){e.text(e.text())}unWrap(t){let n=new Set;t.forEach((e=>n.add(e.parentElement))),t.unwrap(),e(n).normalize()}newAfter(t,n){e.after(t,n)}newBefore(t,n){e.before(t,n)}newPrepend(t,n){e.prepend(t,n)}newAppend(t,n){e.append(t,n)}cloneAfter(t,n){t.forEach(((t,r)=>e.after(t,n[r])))}appends(t,n){t.forEach((t=>e.append(t,n)))}fills(t,n){t.forEach((t=>e.fill(t,n)))}replaces(t,n){t.forEach(((t,r)=>e.replace(t,n[r])))}replacex(t,n){e.replace(t[0],n),t.slice(1).forEach((t=>e.remove(t)))}insert(t,n,r){t?e.before(t,r):e.append(n,r)}alignInsert(t,n,r){t.forEach(((t,l)=>e[n](t,r[l])))}reverses(e){for(const t of e){let e=t.length-1;for(let n=0;n<parseInt(t.length/2);n++)In(t[n],t[e-n])}}merges(t,n,r){e.append(t,n),r.filter(Ci).remove()}movePrev(t,n){for(const r of t)0===n?e.before(On(r[0],1/0),r):r.forEach((t=>e.before(On(t,n),t)))}moveNext(t,n){for(const r of t)0===n?e.after(Rn(Yi(r),1/0),r):r.reverse().forEach((t=>e.after(Rn(t,n),t)))}sectionsUp(t){t.forEach((t=>function(t){let n=t.parentElement;if("s1"===e.attr(t,"role"))return es(E.sectionNotUp);e.before(n,function(t){return e.find("section",t).forEach((e=>wn(e,-1))),wn(t,-1)}(t)||t)}(t))),Uo()}sectionsDown(t){t.forEach((t=>{return n=t[0],r=t[1],function(t){e.find("section",t).forEach((e=>wn(e,1))),wn(t,1)}(n),void e.append(e.replace(n,r),n);var n,r})),Uo()}styles(t,n,r){for(const l of t)e.cssSets(l,n,r)}attrs(t,n,r){for(const l of t)e.attribute(l,n,r)}},bo=new Tn(y.history,so);let xo=null,Eo=null,To=null,So=null,Co=null,No=null,Ao=null,$o=null,ko=null,Oo=null;function Ro(...e){Io(),Qi(null),bo.push(...e.filter((e=>e)))}function Io(){e.trigger(xo,w.redoEvent,!1,!0)}function Lo(e,t){return void 0===t?e[Kl]:(e[Kl]=t,e)}function zo(t){try{return null==t?e.empty(To):(e.intoView(t,0),e.fill(To,function(t,n){return[t].concat(e.parentsUntil(t,(e=>e===n))).reverse().map((t=>Lo(e.elem("b",function(e){let t=e.tagName.toLowerCase();return e.hasAttribute("role")&&(t+=":"+e.getAttribute("role")),t}(t)),t)))}(t,xo))),oo.set(t)}finally{!function(t){e.trigger(Eo,w.covert,t&&on(t)&&Di(t)||"")}(t)}}function Uo(){let e=oo.get();lo.has(e)&&zo(e)}function Do(e,t){yo.cleanUp(t),yo.expand(e,t)}function Ho(e,t){e.forEach((e=>yo.cleanUp(e))),yo.expand(e,t)}function Fo(e,t){e.forEach((e=>yo.cleanUp(e))),yo[t](e)}function Mo(e,t,n){n&&yo.cleanUp(e),yo[t](e)}function Po(e,t){return[new po(Mo,e,t),new ho(e)]}function Bo(e,t){for(const n of e)yo.cleanUp(n),yo.adds(t(n))}function jo(e){yo.empty(),yo.safeAdds(e)}function Ko(e){yo.empty(),e.forEach((e=>yo.add(e)))}function Vo(e){yo.cleanUp(e),yo.reverse(e.parentElement.children)}function Wo(){return lo.size>0&&new po((()=>lo.clear()))}function Go(e){return(e=qi(e)).length>0&&new po((()=>lo.pushes(e)))}function Xo(t,n){let r=oo.get();return r&&t.length?t.some((t=>e.contains(t,r,!n)))&&new ho(null):null}function qo(t,n){if(0!==t.length)return n&&!t.every(Ci)?(Qi("has_cannot_del",wi(t)),null):new co((()=>e(t).remove()))}function Jo(t,n,r){return t.length>0&&new co(vo[r],e(t),n)}function Yo(t,n,r,l){if(lo.has(n))return Qi("cannot_selected",n);if(!$i(n))return Qi("cannot_append",n);if(!t.every(Ci))return Qi("has_cannot_del",wi(t));let o=Wo(),i=l&&new co((()=>e.empty(n))),s=ei(r,n,t.clone(!0,!0,!0));return[new ho,o,i,new co((()=>t.remove())),s.length&&new co(vo.insert,r,n,s),...Zo(n,s)]}function Qo(t,n,r,l){if(!$i(n))return Qi("cannot_append",n);let o=Wo(),i=l&&new co((()=>e.empty(n))),s=ei(r,n,t);return[new ho,o,i,s.length&&new co(vo.insert,r,n,s),...Zo(n,s)]}function Zo(e,t){return an(e)?[new po((()=>lo.add(e)))]:[Go(t),new ho(t[0])]}function ei(t,n,r){return Zi((()=>r.map((e=>wr(t,n,{},e))).flat().map((t=>t&&e.remove(t))).filter((e=>e))))}function ti(t,n,r){if(n=isNaN(n)?1:n||1/0,!t||n<0)return;let l=e.prevAll(t,((e,t)=>t<=n));return l.length&&r(l,t)}function ni(t,n,r){if(n=isNaN(n)?1:n||1/0,!t||n<0)return;let l=e.nextAll(t,((e,t)=>t<=n));return l.length&&r(l,t)}function ri(t,n,r){if(n=isNaN(n)?1:n,!t||n<=0)return;let l=e.closest(t,((e,t)=>t==n||e===xo));return l&&l!==xo&&r(l)}function li(t,n,r){if(n=n||0,!t||n<0)return;let l=e.children(t,n);return l&&r(l)}function oi(e,t){let n=gn(e,xo);return n&&t(n)}function ii(t,n){return t.size===n.length&&e.every(t,((e,t)=>n[t]===e))}function si(e,t,n){if(!e.length||e.some(ui))return;return new co(vo.styles,e,t,(e=>`${(parseFloat(e)||0)+n}px`))}function ai(e,t){return new co(vo.styles,e,t,"auto")}function ui(t){return 107===Zt(t)||"absolute"!==e.css(t,"position")}function ci(t){let n=new ho(null),r=null,l=new co((()=>e.normalize(t)));return lo.has(t)&&(r=new po(yo.delete,t)),Oo=new wo(t,window.getSelection().getRangeAt(0)),e.trigger(xo,w.medIn,null,!0),e.trigger(No,"hide"),e.trigger($o,w.insType,w.miniedTpl),[n,r,l,Oo,new ho(Oo.elem())]}function fi(t){let n=e.attr(e.elem(t.tagName),"role",e.attr(t,"role"));return[new co(vo.newAfter,t,n),...ci(n)]}function di(t,n){let r=Zt(n),l=Yl[r];return hi(t,S.Keys.miniedSameLine)?Ql.has(r)&&fi(n):!!hi(t,S.Keys.miniedLogicLine)&&(function(e,t){return e&&e[1]===Zt(t.parentElement)}(l,n)?function(t,n){let r=e.elem(n);return[new co(vo.newAfter,t,r),...ci(r)]}(n,l[0]):Ql.has(r)&&fi(n))}const pi={[w.levelName1]:[vo.newAfter,vo.newBefore],[w.levelName2]:[vo.newAppend,vo.newPrepend]};function hi(e,t){let n=t.split(Vl);return n.length===e.size&&n.every((t=>e.has(t.toLowerCase())))}function mi(e){let t=new Map;for(const n of e){let e=n.parentElement;(t.get(e)||t.set(e,[]).get(e)).push(n)}return[...t.values()]}function gi(t){let n=oo.get(),r=e.contains(t,n);try{return r&&oo.cancel(),rn(t)}finally{r&&oo.set(n)}}function _i(e,t){return t=isNaN(t)?1:t,new Array(t).fill().map((()=>rn(e)))}function wi(e){for(const t of e)if(!Ci(t))return t}function yi(e){for(const t of e)if(!dn(t))return t}function vi(e){for(const t of e)if(pn(t))return t}function bi(t,n,r){let l=n.cellIndex(t);return e.isArray(l)?function(e,[t,n],r){let l=new Set;for(let o=t;o<n;o++)e.column(o,r).forEach((e=>l.add(e)));return[...l]}(n,l,r):n.column(l,r)}function xi(t,n){if(!t)return;let r=t.parentElement;if(!e.contains(r,n,!0))return null;for(;n.parentElement!==r;)n=n.parentElement;return n}function Ei(e){return(e=e.parentElement)!==xo&&e}function Ti(e){let t=new Set,n=0;for(const[r,l]of e.entries()){let e=l.parentElement;if(n+=e.childElementCount,t.add(e).size===r)return es("repeat sibling:",l),!0}return n===e.size}function Si(e,t){return t=t||e[0].tagName,e.every((e=>e.tagName===t))}function Ci(e){let t=Zt(e);return At(t)||$t(t)||Ot(t)}function Ni(e){let t=Zt(e);return kt(t)||$t(t)&&!bt(t)}function Ai(e){return an(e.parentElement)&&an(e)}function $i(e){let t=Zt(e);return!bt(t)&&!Nt(t)}function ki(e,t){return $i({prepend:e,append:e,fill:e,before:e.parentElement,after:e.parentElement,replace:e.parentElement}[t])}function Oi(e){return e.reduce(((e,t)=>e.add(Zt(t))),new Set)}function Ri(e){let t=new Set;for(const n of e)n.parentElement&&t.add(n.parentElement);return t}function Ii(t,n,...r){setTimeout((()=>t.isConnected&&e.trigger(t,n,...r)),1)}function Li(t){return function(t){let n=t.shift();if(!n||"TABLE"===n.tagName&&t.length>0)return[];let r=[...nn(n)];return t.length>0&&(r=r.filter((e=>t.every((t=>tn(t,e)))))),e.map(r.filter((e=>!Tr.has(e))),(e=>xr[e]))}(t.filter((e=>!Nt(Zt(e)))))}function zi(t,n,r="text"){return t?e("tr",t).find(n)[r]():null}function Ui(e,t){return e&&kn(e).then((e=>e?qi(e).map((e=>yr(t,e))):[]))}function Di(e){let t=[...e.attributes].map((e=>`${e.name}="${e.value}"`)).join(" ");return t?`<${e.tagName} ${t}>`:`<${e.tagName}>`}function Hi(t){let n=e.removeClass(t.cloneNode(),Bl),r=RegExp(`</${n.tagName}>$`,"i");return n.outerHTML.replace(r,(e=>t.innerHTML+e))}function Fi(e,t,n,r){let l=[...e];return n&&(t.TEXT=l.map((e=>e.textContent))),r&&(t.HTML=l.map(Hi)),t}function Mi(e,t){let n,r=new Function("$$","$","_",e);try{n=r(t,Pi,xo)}catch(e){return{type:"error",data:e}}return void 0===n?null:{type:"value",data:n,code:e}}const Pi=new Proxy(e,{apply:(e,t,n)=>e(n[0],n[1]||xo)});function Bi(e,t){return t.some((t=>""!==e.style[t]))}function ji(e,t){let n=e[0].style[t];for(const r of e.slice(1))if(r.style[t]!==n)return null;return n}function Ki(t,n){let r=nn(t),l=[];for(const e of n)vn(e,r)||l.push(e);return l.length?l:function(t){for(const n of t){if(1!==n.nodeType)continue;let t=Ki(n,e.contents(n));if(t)return t}}(n)}function Vi(e){return 3===e.nodeType?e.textContent:e.cloneNode().outerHTML.replace(RegExp(`</${e.tagName}>$`,"i"),"")}function Wi(e,...t){for(const n of t)[n[e],n[e-1]]=[n[e-1],n[e]]}function Gi(e){return uo.reset(),[...uo.split(e)].join(" ").trim()}function Xi(e,t="-"){let n=e.length;for(;n--&&(!e[n]||e[n]===t););return n+1}function qi(t){return e.isArray(t)?t:[t]}function Ji(e){for(const t of e.values())return t}function Yi(e){return e[e.length-1]}function Qi(t,n=null){if(null===t)return e.trigger(So,"off");let[r,l]=T[t];e.trigger(Lo(So,n),"on"),e.trigger(e.get("a",So),"setv",[r,l,l])}function Zi(t){let n=e.config({varyevent:!1,bindevent:!1});try{return t()}finally{e.config(n)}}function es(e,t){window.console.error(e,t||"")}const ts={[x.select]:null,[x.filter]:null,[x.search]:null,[x.command]:null,[x.calcuate]:null},ns={[x.select]:function(e,t){return rs([],e.exec(t,oo.get()))},[x.filter]:function(e,t){return rs([],e.exec(t))},[x.search]:function(t,n){let r=t.exec(n,(l=lo,(l.size>0?[...l]:e.children(xo)).map((t=>e.textNodes(t,!0))).flat()));var l;if(!r.length)return`${E.searchNothing} ${n}`;let o=r.map((e=>new _o(e)));return rs(o,o.map((e=>e.elem())))},[x.command]:function(e,t){return e.exec(t)},[x.calcuate]:function(e,t){let n=e.exec.bind(e),r=new fo(n,t,oo.get());r.changed()&&(r.warn(E.undoWarn),Ro(r));return r.result()}};function rs(e,t){return e.concat(Wo(),Go(t),new ho(t[0]))}function ls(t){let n={},r=[];for(const l of t){let[t,o]=br(l);r.push(o),e.assign(n,t)}return[n,r]}function os(t,n){let r=function(e){let t=zt[e.toUpperCase()];return qn[t]?w.convBlocks:Jn[t]?w.convLines:Xn[t]?w.convInlines:null}(t);switch(r){case w.convInlines:return function(e,t){let[n,r]=ls(t),l=r.map((t=>yr(e,n,t)));return[new co(vo.replaces,t,l),l]}(t,n);case w.convLines:return function(t,n){let[r,l]=ls(n),o=l.map((n=>e.isArray(n)?n.map((e=>yr(t,r,e))):yr(t,r,n)));return[new co(vo.replaces,n,o),o.flat()]}(t,n);case w.convBlocks:return function(e,t){let[n,r]=ls(t),l=null;return vr(t[0])===w.convLines?(l=yr(e,n,r,!0),[new co(vo.replacex,t,l),[l]]):(l=r.map((t=>yr(e,n,t,!0))),[new co(vo.replaces,t,l),l])}(t,n)}throw new Error(`[${t}] convert is not supported.`)}const is={[ve]:{self:">h1, >hgroup",prev:null},500:{self:">h1, >hgroup",prev:null},[Ge]:{self:">header[role=abstract]",prev:[ve]},507:{self:">nav[role=toc]",prev:[Ge,ve]},512:{self:">article",prev:[507,Ge,ve]},508:{self:">nav[role=reference]",prev:[512,507,Ge,ve]},509:{self:">aside[role=seealso]",prev:[508,512,507,Ge,ve]},[qe]:{self:">footer",prev:[509,508,512,507,Ge,ve]}},ss={[ve]:{self:">h1",prev:null},[be]:{self:">h2",prev:null},[xe]:{self:">h3",prev:null},[Te]:{self:">h4",prev:null},[He]:{self:">h4",prev:null},[Ne]:{self:">summary",prev:null},[Ae]:{self:">figcaption",prev:null},[$e]:{self:">caption",prev:null},416:{self:">thead",prev:[$e]},417:{self:">tbody:last-of-type",prev:[416,$e]},418:{self:">tfoot",prev:[417,416,$e]},[Xe]:{self:">header",prev:[be]},[qe]:{self:">footer",prev:["LastChild"]},[j]:{self:">img",prev:["LastChild"]},LastChild:{self:">:last-child",prev:null}};function as(t,n,r){let l=r[Zt(n)],o=e.get(l.self,t);return o?new co((()=>e.replace(o,n))):(o=function(t,n,r){let l=null;if(!n)return l;for(const o of n)if(l=e.get(r[o].self,t),l)break;return l}(t,l.prev,r),new co(o?()=>e.after(o,n):()=>e.prepend(t,n)))}function us(e){return Si(e,"SECTION")&&e.some((e=>Zt(e)!==Be))}function cs(e){return Si(e,"SECTION")}function fs(e){let t=[...Oi(e)];return t.length>1||t[0]===ke&&"OL"!==e[0].parentElement.tagName?null:Er[t[0]]||null}const ds=[function(e){return an(e[0])},function(){return null!==Es.convtype()},us,cs,function(e){return e.every(Ci)},fs],ps={[Be]:_s,[je]:_s,[Ke]:_s,[Ve]:_s,[We]:_s,[Je]:_s,521:function(e){return ws(e,">caption, >thead, >tfoot")},[ze]:null,[Xe]:gs,[qe]:gs,[lt]:gs,[ot]:gs,[it]:function(e){return ws(e,">summary")}};function hs(e){let t=ps[e];return null===t?null:t||ms}function ms(t){return e.children(t)}function gs(e){return ws(e,">h3")}function _s(e){return ws(e,">h2")}function ws(t,n){let r=e.children(t);for(const l of e.find(n,t)){let e=r.indexOf(l);e>=0&&r.splice(e,1)}return r}function ys(t,n){let r=Zt(t);if(kt(r))return!Ct(r)&&n.every(an)&&e(n).contents().flat();let l=[...Oi(n)];return 521===r?1===l.length&&521===l[0]&&function(e,t){let n=hn(e).cols();return t.every((e=>n===hn(e).cols()))}(t,n)&&vs(n):function(e,t){let n=Vt[e];return void 0===n?!bt(e)&&!Nt(e)&&t.every((t=>t===e)):t.every((e=>n===Vt[e]))}(r,l)&&vs(n)}function vs(e){let t=[];for(const n of e){let e=hs(Zt(n));e&&t.push(...e(n))}return t}function bs(e,t){let n=Zt(e);return kt(n)?Ct(n)?e:function(e){for(const t of e)if(!an(t))return t}(t):521===n?function(e,t){let n=hn(e).cols();for(const e of t)if("TABLE"!==e.tagName||n!==hn(e).cols())return e;return null}(e,t):bt(n)||Nt(n)?e:yn(e,t)}const xs={focusPrevious(e){ti(oo.get(),e,(e=>zo(Yi(e))))},focusNext(e){ni(oo.get(),e,(e=>zo(Yi(e))))},focusParent(e){ri(oo.get(),e,(e=>zo(e)))},focusChild(e){li(oo.get(),e,(e=>zo(e)))},focusItemTop(){oi(oo.get(),(e=>zo(e)))},click(t,n){let r=oo.get(),l=t.data;if(hi(n,S.Keys.elemFocus))return zo(l);if(hi(n,S.Keys.acrossSelect)){let t=xi(r,l),n=t&&((o=r)===(i=t)?[]:[o,...e.next(o,i,!0)?e.nextUntil(o,i):e.prevUntil(o,i),i]);return t&&n.length&&Ro(new po(Do,n,r),new ho(t))}var o,i;if(hi(n,S.Keys.smartSelect)){let e=xi(r,l);return e&&Ro(...Po(e,"turn"))}if(hi(n,S.Keys.parentFocus)){let e=Ei(l);return e&&zo(e)}if(hi(n,S.Keys.parentSelect)){let e=Ei(l);return e&&Ro(...Po(e,"turn"))}if(hi(n,S.Keys.turnSelect))return Ro(...Po(l,"turn"));lo.has(l)&&r===l&&1===lo.size||Ro(...Po(l,"only"))},__click:1,pathTo(t,n){if(e.intoView(t.data,0),!hi(n,S.Keys.elemFocus))return hi(n,S.Keys.turnSelect)?Ro(...Po(t.data,"turn")):void(lo.has(t.data)||Ro(...Po(t.data,"add")));oo.set(t.data)},__pathTo:1,turn(){let e=oo.get();e&&Ro(...Po(e,"turn"))},reverse(){let e=oo.get();e&&Ro(new po(Vo,e))},siblings(){let t=oo.get();if(!t)return;let n=e.siblings(t);n.length&&Ro(new po(Do,n,t))},tagsame(){let t=oo.get();if(!t)return;let n=e.siblings(t,t.tagName);n.length&&Ro(new po(Do,n,t))},tagsame2(){let t=oo.get();if(!t)return;let n=e.find(`>* >${t.tagName}`,t.parentElement.parentElement);n.splice(n.indexOf(t),1),n.length&&Ro(new po(Ho,n,t))},tagsame2x(){let t=oo.get();if(!t)return;let n=t.parentElement,r=null;if("TR"===n.tagName){let e=n.parentElement;r=bi(t,hn(e.parentElement),e)}else r=e.find(">* >"+`${(l=t).tagName}:nth-child(${e.prevAll(l).length+1})`,n.parentElement);var l;r.splice(r.indexOf(t),1),r.length&&Ro(new po(Ho,r,t))},cleanSiblings(){let t=oo.get();if(!t||1===lo.size&&lo.has(t))return;let n=e.children(t.parentElement).filter((e=>lo.has(e)));Ro(new po(yo.removes,n),new po(Po,t,"add"))},cleanOthers(){let e=oo.get();!e||1===lo.size&&lo.has(e)||Ro(new po(yo.empty),new po(Po,e,"safeAdd"))},contentBoxes(){let e=oo.get();if(!e)return;let t=mn(e);t.some((e=>!lo.has(e)))&&Ro(new po(Fo,t,"adds"),new ho(t[0]))},contentBoxesStart(){let e=oo.get();if(!e)return;let t=mn(e);t.some((e=>!lo.has(e)))&&Ro(new po(Fo,t,"unshift"),new ho(t[0]))},previous(e){ti(oo.get(),e,((e,t)=>Ro(new po(Do,e,t),new ho(Yi(e)))))},next(e){ni(oo.get(),e,((e,t)=>Ro(new po(Do,e,t),new ho(Yi(e)))))},parent:e=>ri(oo.get(),e,(e=>lo.has(e)||Ro(...Po(e,"add")))),child:e=>li(oo.get(),e,(e=>lo.has(e)||Ro(new po(Mo,e,"safeAdd",!0),new ho(e)))),itemTop(){oi(oo.get(),(e=>lo.has(e)||Ro(...Po(e,"add"))))},onlyPrevious(e){ti(oo.get(),e,(e=>Ro(...Po(Yi(e),"only"))))},onlyNext(e){ni(oo.get(),e,(e=>Ro(...Po(Yi(e),"only"))))},onlyParent(e){ri(oo.get(),e,(e=>Ro(...Po(e,"only"))))},onlyChild(e){li(oo.get(),e,(e=>Ro(...Po(e,"only"))))},onlyItemTop(){oi(oo.get(),(e=>Ro(...Po(e,"only"))))},siblingsVF(){Ti(lo)||Ro(new po(Bo,lo,(t=>e.siblings(t))))},tagsameVF(){Ti(lo)||Ro(new po(Bo,lo,(t=>e.find(`>${t.tagName}`,t.parentElement))))},previousVF(t){Ti(lo)||(t=isNaN(t)?1:t,Ro(new po(Bo,lo,(n=>e.prevAll(n,((e,n)=>n<=t))))))},nextVF(t){Ti(lo)||(t=isNaN(t)?1:t,Ro(new po(Bo,lo,(n=>e.nextAll(n,((e,n)=>n<=t))))))},contentBoxesVF(){let e=[...lo].map((e=>mn(e))).flat();ii(lo,e)||Ro(new po(jo,e),new ho(e[0]))},childVF(t){t=t||0;let n=e.map(lo,(n=>e.children(n,t)));ii(lo,n)||Ro(new po(jo,n),new ho(n[0]))},parentVF(e){let t=new Set;for(const n of lo)ri(n,e,(e=>t.add(e)));t=[...t],ii(lo,t)||Ro(new po(Ko,t),new ho(t[0]))},itemTopVF(){let e=new Set;for(const t of lo)oi(t,(t=>e.add(t)));e=[...e],ii(lo,e)||Ro(new po(Ko,e),new ho(e[0]))},selectSort(){let t=e(lo).sort().item();t.length<2||Ro(new po(jo,t),new ho(t[0]))},selectReverse(){let t=e(lo).sort().item().reverse();t.length<2||Ro(new po(jo,t),new ho(t[0]))},toText(){let t=e(lo);if(0!==t.length&&function(e){for(const t of e)if(t.childElementCount>0)return!0;return!1}(t))return t.every(Ni)?void Ro(Xo(t),new co(vo.toText,t)):Qi("need_conelem",function(e){for(const t of e)if(!Ni(t))return t}(t))},__toText:null,unWrap(){let t=e(lo);if(0!==t.length)return t.every(Ai)?void Ro(Xo(t,!0),Wo(),new co(vo.unWrap,t)):Qi("both_conelem",function(e){for(const t of e)if(!Ai(t))return t}(t))},__unWrap:null,deletes(){let t=e(lo),n=qo(t,!0);return n&&Ro(Xo(t,!0),Wo(),n),!!n},deleteForce(){let t=e(lo),n=qo(t);n&&Ro(Xo(t,!0),Wo(),n)},deleteContents(){let t=e(lo).map((e=>mn(e))).flat(),n=function(t){if(0!==t.length)return new co((()=>e(t).empty()))}(t);n&&Ro(Wo(),Xo(t),n,Go(t))},elementCloneSelf(t){let n=e(lo);if(!n.length)return;if(n.some(pn))return Qi("only_child",vi(n));let r=n.map((e=>gi(e)));1===r.length&&(r=[_i(r[0],t)]),Ro(new ho,Xo(n,!0),Wo(),new co(vo.cloneAfter,n,r),Go(r.flat()))},elementCloneTeam(t){let n=e(lo);if(!n.length)return;if(n.some(pn))return Qi("only_child",vi(n));let r=function(e){let t=[e.shift()],n=[t];for(const r of e)r.previousElementSibling===Yi(t)?t.push(r):n.push(t=[r]);return n}(n.sort()),l=r.map((e=>Yi(e))),o=r.map((e=>e.map((e=>gi(e)))));1===o.length&&1===o[0].length&&(o[0]=_i(o[0][0],t)),Ro(new ho,Wo(),new co(vo.cloneAfter,l,o),Go(o.flat()))},elementFill(){let t=oo.get(),n=e(lo);if(!t||!n.length)return;let r=Yo(n,t,null,!0);r&&Ro(...r)},elementCloneFill(){let t=oo.get(),n=e(lo);if(!t||!n.length)return;if(1===lo.size&&lo.has(t))return;let r=Qo(n.clone(),t,null,!0);r&&Ro(...r)},elementAppend(){let t=oo.get(),n=e(lo);if(!t||!n.length)return;let r=Yo(n,t);r&&Ro(...r)},elementCloneAppend(){let t=oo.get(),n=e(lo);if(!t||!n.length)return;let r=Qo(n.clone(),t);r&&Ro(...r)},elementBefore(){let t=oo.get(),n=e(lo);if(!t||!n.length)return;let r=Yo(n,t.parentElement,t);r&&Ro(...r)},elementCloneBefore(){let t=oo.get(),n=e(lo);if(!t||!n.length)return;let r=Qo(n.clone(),t.parentElement,t);r&&Ro(...r)},elementAfter(){let t=oo.get(),n=e(lo);if(!t||!n.length)return;let r=Yo(n,t.parentElement,e.nextNode(t));r&&Ro(...r)},elementCloneAfter(){let t=oo.get(),n=e(lo);if(!t||!n.length)return;let r=Qo(n.clone(),t.parentElement,e.nextNode(t));r&&Ro(...r)},movePrevious(t){let n=e(lo).sort(),r=n[0];if(!((t=isNaN(t)?1:t)<0||!n.length||function(t){let n=e.prevNode(t,!1,!0);return!n||un(n)}(r)))return n.some(cn)?Qi("has_fixed2",function(e){for(const t of e)if(cn(t))return t}(n)):void Ro(new co(vo.movePrev,mi(n),t))},moveNext(t){let n=e(lo).sort(),r=Yi(n);if(!((t=isNaN(t)?1:t)<0||!n.length||function(t){let n=e.nextNode(t,!1,!0);return!n||cn(n)}(r)))return n.some(un)?Qi("has_fixed1",function(e){for(const t of e)if(un(t))return t}(n)):void Ro(new co(vo.moveNext,mi(n),t))},indentReduce(){let t=e(lo);if(t.length)return us(t)?void Ro(new co(vo.sectionsUp,t)):Qi("only_section",yi(t))},indentIncrease(){let t=e(lo);if(!t.length)return;if(!cs(t))return Qi("only_section",yi(t));let n=function(e){let t=[];for(const n of e){let e=Zt(n);t.push([n,yr(e,{h2:E.sectionH2})])}return!!t.length&&t}(t);Ro(new co(vo.sectionsDown,n))},reversePlaces(){let t=e(lo).sort(),n=mi(t);if(!(t.length<2||n.every((e=>e.length<2))))return t.some(fn)?Qi("has_fixed",function(e){for(const t of e)if(fn(t))return t}(t)):void Ro(new co(vo.reverses,n))},contentsMerge(){let t=e(lo),n=t.shift();if(!t.length)return;let r=ys(n,t);if(!r)return Qi("merge_types",bs(n,t));Ro(Xo(t,!0),Wo(),new co(vo.merges,n,r,t),...Po(n,"safeAdd"))},normalize(){let t=new co((()=>e.normalize(xo)));t.changed()&&Ro(t)},moveToLeft(){let e=[...lo],t=si(e,"left",-1);t&&Ro(t,ai(e,"right"),new mo(!0))},moveToLeftTen(){let e=[...lo],t=si(e,"left",-10);t&&Ro(t,ai(e,"right"),new mo(!0))},moveToRight(){let e=[...lo],t=si(e,"left",1);t&&Ro(t,ai(e,"right"),new mo(!0))},moveToRightTen(){let e=[...lo],t=si(e,"left",10);t&&Ro(t,ai(e,"right"),new mo(!0))},moveToUp(){let e=[...lo],t=si(e,"top",-1);t&&Ro(t,ai(e,"bottom"),new mo(!0))},moveToUpTen(){let e=[...lo],t=si(e,"top",-10);t&&Ro(t,ai(e,"bottom"),new mo(!0))},moveToDown(){let e=[...lo],t=si(e,"top",1);t&&Ro(t,ai(e,"bottom"),new mo(!0))},moveToDownTen(){let e=[...lo],t=si(e,"top",10);t&&Ro(t,ai(e,"bottom"),new mo(!0))},paste(e,t){let n=[...lo].map((e=>mn(e))),r=n.flat(),l=t?"appends":"fills";r.length&&Ro(Xo(r),...function(e,t,n){return 1===e.length?[Jo(e[0],t.join("\n"),n)]:(1===t.length&&(t=new Array(e.length).fill(t[0])),e.map(((e,r)=>Jo(e,t[r],n))))}(n,e.data,l))},__paste:1,setStyle(t,n,r){(function(t,n,r){return e.isArray(n)?t.some((e=>n.some((t=>e.style[t]!==r)))):t.some((e=>e.style[n]!==r))})(t.data,n,r)&&Ro(new co(vo.styles,t.data,n,r),new mo)},__setStyle:1,eraseStyle(e,t){let n=null;t=t.split(Vl);for(const r of e.data)if(Bi(r,t)){n=!0;break}n&&Ro(new co(vo.styles,e.data,t,null),new mo)},__eraseStyle:1,brushStyle(t){let n=t.data,r=e.attr(n,"style"),l=lo.size,o=null;!r||!l||1===l&&lo.has(n)||(lo.has(n)&&(o=new po(yo.delete,n)),Ro(o,new co(vo.attrs,[...lo],"style",r),new mo))},__brushStyle:1,clearStyle(t){let n=null;for(const r of t.data)if(null!==e.attr(r,"style")){n=!0;break}n&&Ro(new co(vo.styles,t.data,null),new mo)},__clearStyle:1,attrUpdate(e,t){1===lo.size&&Ro(new co(vo.attrs,[...lo],t,e.data),new mo)},__attrUpdate:1,deleteAttr(e){Ro(new co(vo.attrs,[...lo],e.data,null),new mo)},__deleteAttr:1,htmlUpdate(t){if(1!==lo.size||!t.data.length)return;let n=[...lo],r=function(t){let n=e.fragment(t);for(const t of e.find(jl,n))e.removeClass(t,Bl);return e.contents(n)}(t.data);Ro(Xo(n,!0),Wo(),new co((()=>e.replace(n[0],r))))},__htmlUpdate:1,runScript(t,n,r,l){let o=t.data.trim();if(!o)return null;if("editor"===n){let t=new fo(Mi,o,e(lo));return t.changed()&&(t.warn(E.undoWarn),Ro(t)),t.result()||Br(o)||null}return function(e){let t=An.pick();return new Promise(((n,r)=>{t.onmessage=e=>{t.onmessage=null,An.add(t),e.data.error?r(e.data.error):n(e.data.result)},t.postMessage(e)}))}(Fi(lo,{code:o},r,l)).then((e=>({type:"value",data:e,code:o}))).catch((e=>({type:"error",data:e,code:""})))},__runScript:1,insResult(t,n,r){let l=t.data.trim(),o=[...lo];if(!o.length||!r||!l)return;let i=function(e,t){for(const n of e)if(!ki(n,t))return n;return null}(o,r);if(i)return Qi("cannot_append",i);let s=function(t,n){switch(t){case"text":return e(e.Text(n,!0));case"html":return e(e.fragment(n).children)}throw new Error("can't to here.")}(n,l),a=Wo(),u=o.map((e=>function(e,t,n){return ei(...{prepend:[null,e],append:[null,e],fill:[null,e],before:[e,e.parentElement],after:[e,e.parentElement],replace:[e,e.parentElement]}[t],n)}(e,r,s.clone())));Ro(new ho,a,new co(vo.alignInsert,o,r,u))},__insResult:1,propUpdate(t,...n){let r=[...lo],l=(o=Zt(r[0]),el[o]||((t,n,r)=>e.attr(t,n,r)));var o;if(1===r.length)return Ro(new co(l,r[0],t.data,...function(e,...t){let n=tl[Zt(e)];return n?n(e,...t):function(e){return e.map((e=>""===e?null:e))}(t)}(r[0],...n)),new mo(!0));let i=function(e,...t){let n=Zt(e[0]),r=nl[n];return r?r(e,...t):dl(e,function(e){return e.map((e=>""===e||null===e?void 0:e))}(t))}(r,...n);Ro(...r.map(((e,n)=>new co(l,e,t.data,...i[n]))))},__propUpdate:1,cmdRun(t,n){let r=t.data,l=r.trim()&&ns[n](ts[n],r);return Ml(n).add(t.data),e.isArray(l)?(e.trigger(xo,"focus.content",null,!0),Ro(...l)||null):l},__cmdRun:1,pluginsRun(t){let r=(o=t.data,wl.get(o)||null),l=e.attr(t.data,"title")||"";var o;if(!r)throw new Error("not found the plugins.");return function(e,t){let n=new Worker(e);return new Promise(((e,r)=>{n.onmessage=t=>{n.terminate(),t.data.error?r(t.data.error):e(t.data)},n.postMessage(t)}))}(`${N}${b.plugRoot}/${r}/${b.plugMain}`,Fi(lo,{INFO:{}},!0,!0)).then((t=>function(t,r,l){let o=n.get(r);return l=t.title||l,t.node?[C.update(o.node(t.node),t.result),l]:[e.elem("textarea",JSON.stringify(t.result,null,4)),l]}(t,r,l)))},__pluginsRun:1,editUndo(){e.trigger(xo,w.undoEvent,Oo?(document.execCommand("undo"),document.queryCommandEnabled("undo")):(bo.undo(),bo.canUndo()),!0)},editRedo(){e.trigger(xo,w.redoEvent,Oo?(document.execCommand("redo"),document.queryCommandEnabled("redo")):(bo.redo(),bo.canRedo()),!0)},miniedIn(){let e=lo.first();if(e){if(!an(e))return zo(e),Qi("need_conelem",e);Ro(...ci(e)),Oo.active()}},miniedInEnd(){let e=lo.first();if(e){if(!an(e))return zo(e),Qi("need_conelem",e);Ro(...ci(e)),Oo.activeEnd()}},properties(){let t=e(lo),r=fs(t);if(!r)return Qi("not_property",t[0]);!function(t){n.get(l).get(w.modalProp).then((n=>e.trigger(Ao,"open",[t,n])))}(r)}},Es={undo(){xs.editUndo()},redo(){xs.editRedo()},sels:()=>e(lo),esize:()=>lo.size,sel0:()=>Ji(lo)||null,efocus:()=>oo.get(),tobj:()=>lo.size?hn(function(e){switch(e.tagName){case"TR":return e.parentElement.parentElement;case"TBODY":case"THEAD":case"TFOOT":case"CAPTION":return e.parentElement;case"TH":case"TD":return e.parentElement.parentElement.parentElement;case"TABLE":return e}throw new Error("not in table element.")}(lo.first())):null,trbox(){let e=lo.first();return"TR"===e.tagName?e.parentElement:e},tsecbox(){let e=lo.first();return"TABLE"===e.tagName?e:e.parentElement},codebox(){let e=lo.first();if(!e)return null;switch(Zt(e)){case 526:return e.firstElementChild;case te:case Ze:return e;case Ue:return e.parentElement}throw new Error("bad type of element.")},attrns:e=>[...e.data.attributes].map((e=>e.name)),__attrns:1,obtname(t){let n=t.data,r=e=>ro.has(e)?no:e.replace(Vl,"");return e.isArray(n)?[...new Set(n.map(r))]:r(n)},__obtname:1,obtsplit:e=>(uo.reset(),e.data.map((e=>e?[...uo.split(e)].map((e=>e.trim())):[]))),__obtsplit:1,obtval:e=>function([e,t,n]){return t.length=Xi(t),n.length=Xi(n),e.length=Math.max(Xi(e),t.length,n.length),[e,t,n]}(e.data.map((e=>e.map(Gi).map((e=>e||"-"))))).map((e=>e.join(";\n")||null)),__obtval:1,source:e=>Lo(e.data),__source:1,rngok(e){let t=e.data.commonAncestorContainer;e.data.detach(),3===t.nodeType&&(t=t.parentElement);let n=Zt(t);return kt(n)&&n!==te},__rngok:1,menupos(t,n,[r,l]){let o=e.outerWidth(t.data),i=e.offset(n),s=e.innerWidth(n),a=l-i.top+e.scrollTop(n)+y.popupGapTop;return r+o<s+i.left?[r-i.left+"px",`${a}px`]:[s-o-y.popupGapRight+"px",`${a}px`]},__menupos:1,submenu(t){let n=e.parent(t.data),r=e.outerWidth(n)-1+"px",l=e.children(t.data,-1),o=parseFloat(e.css(n,"right"));return e.outerWidth(l)>o?{left:"auto",right:r}:{left:r,right:"auto"}},__submenu:1,convtype(){let e=new Set;for(const t of lo)e.add(vr(t));if(e.size>1)return null;let t=Ji(e);return t===w.convLines?w.convBlocks:t},__convtype:null,roleinfo(t,n){let r=e.attr(t.data,"role");return r?`${n}:${r}`:n},__roleinfo:1,elemSelf(e){let t=e.data;return t?Di(t).replace(Jl,""):null},__elemSelf:1,cmenable(t){let n=[...lo];return 0===n.length?[]:e.map(ds,((e,r)=>e(n)?t.data[r]:null))},__cmenable:1,inslist(e,t){if(!e.data.length)return null;let r=n.get(l),o=eo[t](e.data);return o.length?o.map((e=>r.node(e))):null},__inslist:1,ismixed:e=>(e.data===w.levelName1?[...Ri(lo)]:[...lo]).some((e=>ql.test(e.tagName)&&3===It(e))),__ismixed:1,pretreat2(e,t,n){let r=e.data;return r=n?r.trim().split(Wl):[r],t?r.map((e=>e.trim().replace(Gl,"$1"))):r},__pretreat2:1,pretreat1(t,n){let r=t.data;return e.isArray(r)?n?r.map((e=>e.replace(Gl,"$1"))):r:n?r.trim().replace(Gl,"$1"):r},__pretreat1:1,splitx:(e,t)=>e.data.trim().split(t?Wl:Xl),__splitx:1,k3edit(t,n,r,l,o){let i=Bn(r,!0,t.data),s=l&&+e.val(l);switch(n){case"Enter":return`\n${a=i,a.substring(0,Mn(a,1/0))||" "}`;case"Tab":return function(e,t){return t>0?" ".repeat(t-Pn(e)%t):"\t"}(i,s)}var a;return s>0&&!r.toString()&&i.endsWith(" ".repeat(s))&&(o&&(s=i.length),r.setStart(r.endContainer,r.endOffset-s),r.setEnd(r.endContainer,r.endOffset)),null},__k3edit:1,indentcut(e,t){if(t)return e.data;let n=e.data.split(Xl).filter((e=>!!e)),r=function(e){let t=1/0;for(const n of e)if(t=Mn(n,t),!t)return 0;return t}(n);return r?n.map((e=>e.substring(r))).join("\n"):e.data},__indentcut:1,hlcode:(e,t,n)=>jn(e.data.split(Xl),n,t),__hlcode:1,codels:e=>Yr(null,e.data,Jr),__codels:1,codeblo:(e,{lang:t})=>Yr(t,e.data,qr),__codeblo:1,codehtml:e=>Yr(null,e.data,qr).map((e=>e.innerHTML)).join(""),__codehtml:1,image3:(t,n)=>"svg"===n?e.svg({html:t.data}):kn(t.data).then((e=>yr(F,function(e){let[t,n]=e;return"string"!=typeof t&&([n,t]=[t,n]),Object.assign({src:t},n)}(e)))),__image3:1,mediasubs(e,t){let n=Ui(e.data.trim(),P);return void 0===t?n:Promise.all([n,Ui(t.trim(),M)])},__mediasubs:1,picsubs:e=>Ui(e.data.trim(),B),__picsubs:1,cbstate(e,t,n){if(!e.data.length)return null;let r=e.data[0].style[t]===n;for(const l of e.data.slice(1)){if(l.style[t]===n!==r)return[!1,!0]}return[r,!1]},__cbstate:1,styVal:(t,n)=>t.data.length?e.isArray(n)?n.map((e=>ji(t.data,e))):ji(t.data,n):null,__styVal:1,unitVal(e){let t=e.data[0].value,n=e.data[1].value;return isNaN(parseFloat(t)-t)?t:t+n},__unitVal:1,styName:(e,t)=>e.data.length?t.split(Vl).filter((t=>function(e,t){return e.every((e=>""!==e.style[t]))}(e.data,t))):null,__styName:1,styKey:(e,t)=>e.data.length?t.split(Vl).filter((t=>function(e,t){return t+=":",e.every((e=>e.style.cssText.includes(t)))}(e.data,t))):null,__styKey:1,cleanHTML:e=>Hi(e.data),__cleanHTML:1,cmdclear(){this.cmdNavTemp=null},ecancel(){oo.get()&&Ro(new ho(null),new po(yo.empty))},errmsg(e,t){hi(t,S.Keys.elemFocus)&&zo(e.data)},__errmsg:1,chapter(t){let n=e.get(t.data.map((e=>`>section:nth-of-type(${+e})`)).join(" ")+" >h2",e.get("article",xo));n&&e.intoView(n,1,1)},__chapter:1,save:t=>(e(jl,t.data).removeClass(Bl),ao.set(w.storeMain,e.html(t.data)),E.localStoreDone),__save:1,blankline(e,t,n){if(!t)return;let r=Bn(n,!0,e.data);r.length>1||" "!==r[0]||(n.setStart(n.endContainer,n.endOffset-1),n.setEnd(n.endContainer,n.endOffset))},__blankline:1,toclist:t=>ir(e.find(">section",t.data)),__toclist:1,medpass(t,n){let r=Oo.elem();var l;if(l="H2"===r.tagName&&r,Oo.done(),Oo=null,Io(),l&&e.trigger(Co,w.medOk,l),e.trigger(xo,w.medOk,null,!0),e.trigger(No,"show"),e.trigger($o,w.insType,w.normalTpl),Ii(ko,w.evnFollow),"Tab"===t.data)return xs.miniedIn();let o=di(n,r);o&&(Ro(...o),Oo.active())},__medpass:1,medcancel(){bo.pop(),Io(),Oo=null,e.trigger(No,"show"),e.trigger($o,w.insType,w.normalTpl)},__medcancel:null,rngelem(t,n){let r=t.data.commonAncestorContainer;3===r.nodeType&&(r=r.parentElement);let l=Wo(),o=new co((()=>e.normalize(r))),i=new go(t.data,n),s=i.elem();Ro(l,o,i,new po(Mo,s,"safeAdd"),new ho(s)),function(e,t){return to.has(e)&&!t.completed()}(n,i)&&xs.properties()},__rngelem:1,cmenudo(e){let t=Zl[e.data];t&&xs[t]()},__cmenudo:1,convert(e){if(!lo.size)return;let t=[...lo],n=Xo(t,!0),r=Wo(),[l,o]=os(e.data,t);Ro(n,r,l,Go(o)),to.has(e.data)&&xs.properties()},__convert:1,croptr(t,n){if(n<=0)return;let r=t.data,l=n-r.rows.length;l&&function(t,n,r){if(n<0)return t.removes(n,null,r);t.inserts(n,null,r).map((e=>[...e.children])).flat().forEach((t=>e.attr(t,"contenteditable",!0)))}(e.table(r.parentElement),l,r)},__croptr:1,colcrop(t,n){if(n<=0)return;let r=e.table(t.data),l=n-r.cols()+1;l&&function(t,n){if(n<0)for(;n++<0;)t.removeColumn(-1);else(function(e,t){let n=[];for(;t-- >0;)n.push(e.insertColumn(e.newColumn()));return n})(t,n).flat().forEach((t=>e.attr(t,"contenteditable",!0)))}(r,l)},__colcrop:1,inserts(t,n,r){let l=[...lo],o=function(t,n){if(n<2)return[t];if(t.length>1)return t;let r=t[0];for(let l=0;l<n-1;l++)t.push(e.clone(r));return t}(e(t.data),l.length),i=Wo(),s=function(e,t,n,r){return e.map(((e,l)=>null!=t[l]&&new co(pi[r][+n],e,t[l])))}(l,o,n,r),a=o.flat().filter((e=>1===e.nodeType&&!on(e)));Ro(i,...s,Go(a),a[0]&&new ho(a[0]))},__inserts:1,topinsert(e,t){let n=lo.first(),r=t===w.levelName1?n.parentElement:n;Ro(Wo(),as(r,e.data,is),...Po(e.data,"safeAdd"))},__topinsert:1,fixinsert(t,n){let r=n===w.levelName1?[...Ri(lo)]:[...lo],l=function(t,n){if(t=qi(t),n<2||t.length>1)return t;let r=t[0];for(let l=0;l<n-1;l++)t.push(e.clone(r));return t}(t.data,r.length);Ro(Xo(r),Wo(),...function(e,t){let n=[];return e.forEach(((e,r)=>null!=t[r]&&n.push(as(e,t[r],ss)))),n}(r,l),Go(l),new ho(l[0]))},__fixinsert:1,instbody(t,n,r){let l=t.data,o=lo.first(),i=r===w.levelName1?o.parentElement:o,s=hn(i),a=Xo([i]),u=Wo(),c=null;n?("TBODY"!==o.tagName&&(o=s.body(!0)),c=new co(vo.newAppend,o,e.children(l)),l=null):("TBODY"!==o.tagName&&(o=e.get("tbody:last-of-type",i)),c=new co(vo.newAfter,o,l)),Ro(a,u,c,...Po(l||o,"safeAdd"))},__instbody:1,table(e,t,[n,r,l,o]){let i=e.data,s=l?"":":not(:first-child)",a=l?"th,td":"td",u=zi(r&&i.tHead,`th${s}`),c=zi(i.tBodies[0],a),f=zi(o&&i.tFoot,a);return yr("table",{cols:c[0].length-!!l,border:n,caption:t,th0:l=!!l,head:u,foot:f},c,!0)},__table:1,codelang(t,n,r){let l=t.data;if(n===e.attr(r,"-lang"))return l;for(const t of l)e.attr(t,"-lang")||e.attr(t,"-lang",n);return l},__codelang:1,checkhtml(t,n){let r=e.fragment(n),l=Ki(t.data.parentElement,e.contents(r));return l?l.map(Vi):null},__checkhtml:1,attrlist(t,n){let r=new Set(n);for(const n of t.data){let t=e.prop(n,"value");r.has(t)?r.delete(t):e.remove(n)}return[...r]},__attrlist:1,obtline(t,n,r,l){let o=e.siblingNth(t.data);return o<n.length&&n.splice(o,0,""),o<r.length&&r.splice(o,0,""),o<l.length&&l.splice(o,0,""),e.prop(e.clone(t.data),"text",null)},__obtline:1,obtdel(t,n,r,l){let o=e.siblingNth(t.data)-1;return n.splice(o,1),r.splice(o,1),l.splice(o,1),t.data},__obtdel:1,obtswap(t,n,[r,l,o]){let i=t.data;return"ArrowUp"===n?function(t,n,r,l){let o=e.prev(t);return o?(Wi(e.siblingNth(o),n,r,l),[o,"after"]):null}(i,r,l,o):function(t,n,r,l){let o=e.next(t);return o?(Wi(e.siblingNth(t),n,r,l),[o,"before"]):null}(i,r,l,o)},__obtswap:1,cmdlast(t,n,r){let l=n.selectionStart,o=Ml(t.data).find(n.value.substring(0,l));this.cmdNavTemp=new zl(o);let i=r?this.cmdNavTemp.last():this.cmdNavTemp.first();i&&e.val(n,i).setSelectionRange(l,i.length)},__cmdlast:1,cmdnext(t){let n=t.data,r=n.selectionStart,l=this.cmdNavTemp&&this.cmdNavTemp.next();l&&e.val(n,l).setSelectionRange(r,l.length)},__cmdnext:1,cmdprev(t){let n=t.data,r=n.selectionStart,l=this.cmdNavTemp&&this.cmdNavTemp.prev();l&&e.val(n,l).setSelectionRange(r,l.length)},__cmdprev:1,cmdNavTemp:null};a(_,"Ed",xs,["click","pathTo","toText","unWrap","setStyle","eraseStyle","brushStyle","clearStyle","attrUpdate","deleteAttr","htmlUpdate","runScript","insResult","propUpdate","cmdRun","pluginsRun","deletes","paste"]),a(_,"Kit",Es,["ecancel","errmsg","chapter","save","blankline","toclist","medpass","medcancel","rngelem","cmenudo","convert","croptr","colcrop","inserts","topinsert","fixinsert","instbody","table","codelang","checkhtml","attrlist","obtline","obtdel","obtswap","cmdlast","cmdnext","cmdprev"]),u(v,null,Es,["sels","esize","sel0","efocus","elemSelf","tobj","trbox","tsecbox","codebox","attrns","obtname","obtsplit","obtval","source","rngok","menupos","submenu","convtype","roleinfo","cmenable","inslist","ismixed","pretreat2","pretreat1","splitx","k3edit","indentcut","hlcode","codels","codeblo","codehtml","image3","mediasubs","picsubs","cbstate","styVal","unitVal","styName","styKey","cleanHTML","cmdclear"]),window.ESet=lo;
//! $ID: api.js 2021.10.21 Cooljed.Base $
const Ts={init(t,n,r,l,o){e.get(t),e.get(n),e.get(r),e.get(l),e.get(o)},heading(e){},subtitle(e){},abstract(e){},content(e){},seealso(e){},reference(e){},theme(e,t){},style(e,t){},codes(e,t){}};
//! $ID: main.js 2019.11.16 Cooljed.User $
window.GHK=(new h).config(S.Global),window.SHK=(new h).config(S.Slave),window.DHK=(new h).config(S.Modal),window.CHK=new m(xs).config(S.Content),window.Sys=w,window.Kit=Es,window.KM=S.Keys,window.edInit=function(t,r,o,i,s,a,u,c,f){xo=e.get(t),Eo=e.get(r),ko=e.get(o),To=e.get(i),So=e.get(s),Co=e.get(a),No=e.get(u),Ao=e.get(c),$o=e.get(f),Object.assign(ts,{[x.select]:new $l(lo,xo),[x.filter]:new kl(lo),[x.search]:new Ol(xo),[x.command]:new Rl,[x.calcuate]:new Il(lo,xo)}),Fl(e.get("#x-help"),n.get(l).node(w.modalPlug)),e.on(xo,"attrdone styledone nodesdone emptied detach normalize propdone",null,so)},window.Api=Ts,window.ESC=new xn,e.config({varyevent:!0}),p.Init(v,_),p.build(document,o.tplmap).then((()=>e.trigger(document.body,"finish"))).then((()=>Ts.init("#outline","#editor","#content","#help","#beeptip"))).then((()=>w.readyCall())).catch((e=>w.failCall(e))),i&&(window.On=v,window.By=_,window.Tpls=n.get(l));
