# $.attribute( el, names, value ): Value | Object | this

获取或修改 `el` 元素的特性（Attribute）值。`value` 未定义且 `names` 为字符串（支持空格分隔的多个名称）时为取值，否则为设置操作。

支持两个特别的特性名：`html` 和 `text` 用于表达元素内的源码（`innerHTML`）和文本（`textContent`）。

> **注：**<br>
> 与 jQuery 的区别：如果元素没有指定的特性值返回 `null`（同 `.getAttribute()`），而 jQuery.attr() 返回 `undefined`。


## 参数

### el: Element

操作的目标元素。


### names: String | Object | Map

特性名称（序列）或 **名/值对** 配置对象。字符串名称支持空格分隔的多个名称序列，支持 `data-` 系的简写形式（如：`-xx` 表示 `data-xx`）。

- 取值时：为字符串，单个名称或空格分隔的多个名称序列。单个名称时返回单个值，多个名称时返回一个**名/值对**对象。
- 设置时：字符串名称（序列）或 `名/值对` 配置对象（`Object | Map`），名值对中的值支持下面 `value` 参数的约定。


### value: Value | [Value] | Function | null

将要设置的特性值（或值集），支持常见的各种标量类型，也可以是返回标量值的取值函数。取值函数接口：`function(el, name): Value`。

如果是一个值数组，数组成员会与 `names` 的成员一一对应（分别设置相应特性）。如果不是值集，则该值设置到多个目标特性上。如果传递 `null` 值，目标特性会被删除。


### 返回值

取值时返回一个值（单个特性时）或一个名值对 `Object`（多个特性时）。设置时返回调用者自身（this）。


## 轻量版 $.attr( el, name, value ): Value | this

参数 `name` 仅支持单个名称，且不支持对象类型用于设置，参数 `value` 不支持值数组一一对应设置，其它与 `$.attribute` 接口相同。


## 示例

```html
<label>
    <input id="chk1" type="checkbox" checked="checked">Click me
</label>
```


### 单元素版

```js
let el = $.get('#chk1');
// <input id="chk1" type="checkbox" checked="checked">

$.attr(el, 'checked');
// 取值："checked"

$.attr(el, 'checked', null);
// <input id="chk1" type="checkbox">

$.attr(el, 'checked', 'hai');
// <input id="chk1" type="checkbox" checked="checked">
// 设置：
// 非 false|null 值被视为真，设置为标准的 checked 值。

$.attr(el, 'checked', '');
// 设置：同上。


$.attribute(el, 'id checked');
// 取多个值：
// {
//     id: "chk1",
//     checked: "checked"
// }


$.attribute(el, {
    value: 'hello',
    checked: null
});
// 设置多个值：
// <input id="chk1" type="checkbox" value="hello">


$.attribute(el, '-pb value', 'double');
// <input id="chk1" type="checkbox" value="double" data-pb="double">
// 设置：
// 多个特性设置为同一个值，支持data-系简写名称。


$.attribute(el, '-pb', ['hello', 'test']);
// <input id="chk1" type="checkbox" value="double" data-pb="hello">
// 设置：
// 值为数组，取成员赋值，多余的成员被忽略。

$.attr(el, '-pb', ['hello', 'test']));
// <input id="chk1" type="checkbox" value="double" data-pb="hello,test">
// 设置：
// 数组被转换为字符串后使用（默认逗号连接）。
```


### 集合版

**取值时：**
- `names` 支持数组，分别与集合成员一一对应取值。无对应项的元素简单忽略。

**设置时：**
- `names` 支持数组与元素集成员一一对应，但 `names` 成员仅支持键值对对象或Map实例。
- `value` 支持数组，优先与元素集成员一一对应，若值本身需要数组（`names` 为空格分隔的多名称序列）则作为子数组存在。
- 无对应项的元素或值简单忽略。

```html
<fieldset id="fset">
    <label><input type="checkbox" value="chrome" checked>Chrome</label>
    <label><input type="checkbox" value="edge">Edge</label>
    <label><input type="checkbox" value="firefox">Firefox</label>
</fieldset>
```

```js
let els = $('#fset input');
// Collector [
//     <input type="checkbox" value="chrome">,
//     <input type="checkbox" value="edge">,
//     <input type="checkbox" value="firefox">
// ]
```


#### 取值时

```js
els.attr('value');
// [ "chrome", "edge", "firefox" ]

els.attribute('checked value');
// [
//     { checked: "checked", value: "chrome" },
//     { checked: null, value: "edge" },
//     { checked: null, value: "firefox" },
// ]

els.attr(['checked', 'value']);
// [ "checked", "edge" ]
// 注：
// 数组成员一一对应，没有对应的简单忽略，因此只返回2个成员的值。


// 复杂的混合取值

els.attribute(['checked value', 'value', 'checked']);
// [
//     { checked: "checked", value: "chrome" },
//     "edge",
//     "checked",
// ]
// 注：数组成员一一对应，每个成员的取值名称或数量都不一样。

els.attr(['checked value', 'value', 'checked']);
// [
//     null,
//     "edge",
//     "checked",
// ]
// 注：轻量版特性名不支持多名称，因此 "checked value" 被整体对待，故值为null。
```


#### 设置时

如果 `names` 为空格分隔的多个特性名，`value` 数组优先对应集合元素，然后才是 `value` 数组的**子数组**对应到目标元素的多个特性。

```js
els.attr('checked', true);
// Collector [
//     <input type="checkbox" value="chrome" checked="checked">,
//     <input type="checkbox" value="edge" checked="checked">,
//     <input type="checkbox" value="firefox" checked="checked">
// ]
// 非数组形式，统一设置为目标值。


els.attribute('checked', [true, null]);
// Collector [
//     <input type="checkbox" value="chrome" checked="checked">,
//     <input type="checkbox" value="edge">,
//     <input type="checkbox" value="firefox" checked="checked">
// ]
// 修改了前两个元素的特性值，最后一个被忽略。


//
// 名称实参支持数组，数组成员与元素成员一一对应。值实参被忽略。
// 这样的设计是有意的，否则可能出现同一个调用中同时存在设置和取值操作。
//

els.attribute([
    { checked: null, value: 'Chromium' },
    { checked: true, value: 'Internet Explorer' }
]);
// Collector [
//     <input type="checkbox" value="Chromium">,
//     <input type="checkbox" value="Internet Explorer" checked="checked">,
//     <input type="checkbox" value="firefox" checked="checked">
// ]
// 配置对象数组成员与元素成员一一对应，没有配置对应的成员被忽略。

els.attr(['checked', 'value'], [true, false]);
// [ "checked", "edge" ]
// 第二个实参被忽略，因此这里实际上是取值而非设置操作。


els.attribute('value -val', ['hello', 'the', 'world']);
// Collector [
//     <input type="checkbox" value="hello" data-val="hello">,
//     <input type="checkbox" value="the" data-val="the">,
//     <input type="checkbox" value="world" data-val="world">
// ]
// 值数组成员优先对应元素集成员，各元素多个特性被赋值为相同的成员值。


els.attribute('value -val', [['AA', 'BB'], ['CC'], 'world']);
// Collector [
//     <input type="checkbox" value="AA" data-val="BB">,
//     <input type="checkbox" value="CC" data-val="the">,
//     <input type="checkbox" value="world" data-val="world">
// ]
// 元素集成员优先与值成员一一对应，之后单个元素的多个特性对应值的子数组成员。
```
