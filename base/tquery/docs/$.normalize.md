# $.normalize( el, depth? ): Number | Element

对元素 `el` 的内容执行规范化（normalize），合并相邻的文本节点。这是元素原生同名接口的简单封装，但包含一个用户通告参数 `depth`，用于指明 `normalize` 操作会影响到的子元素深度。

> **注：**<br>
> DOM原生的 `normalize` 调用会处理目标元素的所有子孙节点，用户没有办法控制节点改变的细节，该操作会修改DOM节点树。<br>
> `depth` 是一个优化设计，由用户主动向可能注册的事件处理器告知，如果您不理解它，简单忽略即可。<br>


## 参数

### el: Element

内容被规范化（`normalize`）的目标元素。


### depth: Number

告知 `normalize` 操作影响的子孙元素的深度。它是累加性的，值 `1` 表示影响到直接子元素，`2` 表示影响到孙元素，值 `0` 则表示影响所有子孙元素。

这是一个粗粒度的信息通告。

> **注：**<br>
> 如果需要拦截处理节点的修改情况，用户应当采用最近原则，即目标元素应当为被合并文本节点的父元素，而不是更上层。


### 返回值

被规范化操作的目标元素自身（`el`）。


## 示例

```html
<p id="test">
    <em>Hello</em> The <strong>World</strong>!
</p>
```


### 单元素版

```js
let p = $.get('#test'),   // <p>...</p>
    em = $.get('em', p);  // <em>Hello</em>

$.unwrap(em);
// <p id="test">
//     {Hello}
//     { The }<strong>World</strong>!
// </p>
// 注：
// {Hello} 和 { The } 是两个不同的文本节点。
// 这里的括号和换行只是一种视觉友好（便于区分）。

$.normalize(p);
// <p id="test">
//     Hello The <strong>World</strong>!
// </p>
// 注：现在 {Hello The } 是一个文本节点。
```


### 集合版

单元素版的简单重复调用：对集合内的每一个元素调用规范化方法。返回集合自身。


```js
let p = $.get('#test');  // <p>...</p>

$('>*', p).unwrap();
// <p id="test">
//     Hello
//      The
//     World
//     !
// </p>
// 注：段落里共4个离散的文本节点。

tmp = $(p).normalize(1);
// <p id="test">
//     Hello The World!
// </p>
// 注：现在段落里只有一个文本节点。

console.info(tmp);  // 1


// 无通告参数，返回集合本身。
tmp = $(p).normalize();

console.info(tmp);  // Collector[<p>]
```
