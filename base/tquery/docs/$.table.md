# $.table( rows, cols, caption, th0, doc? ): Table

创建一个包含指定行列数单元格的空表格（单元格无内容），或解析一个规范的表格元素（无单元格合并或拆分）。返回一个 `Table` 实例。

`Table` 接口仅提供极简单的表格操作，除了表标题的设置和删除，主要是对表主体部分（`<thead>`、`<tbody>`、`<tfoot>`）的表格行执行添加、删除、获取等。所有的操作忽略列数，也即表格的列数是不变的，也不能修改，这极大简化了表格接口的复杂性。而且也不涉及单元格的内容操作，它们可由外部的 `.text()` 或 `.html()` 等接口实现。

> **注：**<br>
> 表格的完整编辑逻辑十分复杂，需要一个单独的库或插件来实现。


## 参数

### rows: Number | Element

将要创建的表格的行数，或待解析封装的已经存在的表格元素。


### cols: Number

将要创建的表格的列数。注意：表格一旦创建，列数就不可修改（`Table` 不提供相关接口）。


### caption: String

表格的标题（`<caption>`）元素的内容，会以文本方式插入。


### th0: Boolean

表格是否包含一个列表头，即首列是否为 `<th>` 单元格。


### doc: Document

新建表格元素所属的文档对象，可选。


### 返回值

一个 `Table` 类的实例。


## 示例

```js
let tbl = $.table(2, 3, "表格的标题", true);
// <table>
//     <caption>表格的标题</caption>
//     <tbody>
//         <tr>
//             <th></th>
//             <td></td>
//             <td></td>
//         </tr>
//         <tr>
//             <th></th>
//             <td></td>
//             <td></td>
//         </tr>
//     </tbody>
// </table>
```

向单元格中插入内容需要另外的操作，它们不在 `Table` 接口中提供。

```js
let ths = tbl.$().find( 'th' );
// Collector [
//     <th>, <th>
// ]
// 注：.$() 方法返回内部<table>元素的Collector封装。

ths.text( ['第一行', '第二行'] );
// <tr>
//     <th>第一行</th>
//     <td></td>
//     <td></td>
// </tr>
//     <th>第二行</th>
//     <td></td>
//     <td></td>
// </tr>


let tds = $.find( 'td', tbl.elem() );
// [
//     <td>, <td>, <td>, <td>
// ]
// 注：
// 另一种检索方式，返回一个简单数组。
// .elem()方法返回内部原生的表格元素。

$(tds).text( ['单元格11', '单元格12', '单元格21', '单元格22'] );
// <tr>
//     <th>第一行</th>
//     <td>单元格11</td>
//     <td>单元格12</td>
// </tr>
// <tr>
//     <th>第二行</th>
//     <td>单元格21</td>
//     <td>单元格22</td>
// </tr>
// 注：
// .text()接口的值可采用数组形式，与集合内成员按顺序一一对应。
```


## Table 接口

### Table( rows, cols, th0, doc? ): Table

构造函数，创建一个指定行列数的表格元素，返回一个 `Table` 实例。内部的 `<table>` 元素包含一个默认的 `<tbody>` 子结构，不含 `<thead>` 或 `<tfoot>`，因此注意行计数应去除表头/表脚的部分。


#### 参数

- `rows: Number` 表格的行数。
- `cols: Number` 表格的列数。
- `th0: Boolean` 首列是否为 `<th>` 单元格。
- `doc: Document` 所属文档对象，可选。

```js
let tbl = new Table(2, 3);
// <table>
//     <tbody>
//         <tr>
//             <td></td>
//             <td></td>
//             <td></td>
//         </tr>
//         <tr>
//             <td></td>
//             <td></td>
//             <td></td>
//         </tr>
//     </tbody>
// </table>
```


#### 返回值

一个 `Table` 类的实例。包含了下面十分简单的处理接口。


### .caption( text ): Element | null

设置表标题 `<caption>` 元素内容，不存在时则新建一个 `<caption>` 元素。


#### 参数

- `text: String | null` 表标题的内容。无参数调用返回表标题元素（不存在时为 `null`），传递实参 `null` 删除表标题。


#### 返回值

修改、新建或删除的表标题元素（`<caption>`）。


### .body( idx, rows, body ): [Element] | Collector

在 `body` 内添加表格行，新插入的表格行包含固定数量（初始列数）的空单元格。`body` 为 `<tbody>` 元素，可选，默认为 `<table>` 内首个 `<tbody>`。

无参数调用返回表格内 `<tbody>` 元素的集合（已转换为普通数组）。


#### 参数

- `idx: Number` 新行插入的位置。`-1` 表示插入到 `body` 内末尾。
- `rows: Number` 新插入的行数。
- `body: Element` 插入到的目标容器，可选，默认为表格内首个 `<tbody>`。


#### 返回值

表格内的 `<tbody>` 元素集（数组）或新添加的 `<tr>` 元素集的 `Collector` 封装。


### .newBody(): Element

创建一个新的 `<tbody>` 元素插入到所有 `<tbody>` 元素之后并返回该元素。返回值需配合 `.body()` 接口使用。

> **注：**<br>
> 多个 `<tbody>` 可模拟表格的分区效果，并可能提高性能。


### .delBody( idx ): Element

删除 `idx` 位置的 `<tbody>` 元素。`idx` 指 `<tbody>` 在 `table:tBodies` 中的位置。

> **注：**<br>
> 一个表格中通常只有一个 `<tbody>`，本接口仅在表格中包含多个 `<tbody>` 时才有用。


#### 参数

- `idx: Number` 目标元素的位置下标（从 `0` 开始）。


#### 返回值

被删除的 `<tbody>` 元素。


### .head( idx, rows? ): Element | Collector

在 `<thead>` 内添加表格行，如果不存在 `<thead>` 会自动新建一个。全部为 `<th>` 空单元格，会保持列数合法。无参数调用返回 `<thead>` 元素（不存在时返回 `null`）。

> **注：**<br>
> 通常情况下，表头内只有一行，但这不是必须的。


#### 参数

- `idx: Number` 插入位置，`-1` 表示末尾。传递 `null` 时会删除表头元素。
- `rows: Number` 新插入的行数，默认值 `1`，可选。


#### 返回值

插入新行时返回新行元素集的 `Collector` 封装。获取或删除表头时，返回当前存在或删除的 `<thead>` 元素。


### .foot( idx, rows? ): Element | Collector

在 `<tfoot>` 内添加表格行，如果不存在 `<tfoot>` 会自动新建一个，每行包含合法数量的空单元格。无参数调用返回 `<tfoot>` 元素（不存在时返回 `null`）。


#### 参数

- `idx: Number` 插入位置，`-1` 表示末尾。传递 `null` 时会删除表脚元素。
- `rows: Number` 新插入的行数，默认值 `1`，可选。


#### 返回值

插入新行时返回新行元素集的 `Collector` 封装。获取或删除表脚时，返回当前存在或删除的 `<tfoot>` 元素。


### .removes( idx, size ): Collector

删除目标位置及之后多个表格行，行计数针对整个表格（包含 `<thead>`、`<tbody>`、`<tfoot>` 三个部分）。


#### 参数

- `idx: Number` 起始位置（从 `0` 开始），支持负值从末尾算起。
- `size: Number` 准备删除的行数，超出剩余行数时取剩余行数。`undefined` 表示起始位置之后全部的行。


#### 返回值

删除的行元素集的 `Collector` 封装，无效的位置指定返回一个空集。


### .remove( idx ): Element

删除目标位置的表格行 `<tr>` 元素。


#### 参数

- `idx: Number` 目标位置（从 `0` 开始），支持负值从末尾算起。


#### 返回值

删除的目标行 `<tr>` 元素，无效的位置指定返回 `null`。


### .gets( idx, size ): Collector

获取目标位置及之后的行元素集，表格行计数针对整个表格（包含 `<thead>`、`<tbody>`、`<tfoot>` 三个部分）。


#### 参数

- `idx: Number` 起始位置（从 `0` 开始），支持负值从末尾算起。
- `size: Number` 想要获取的行数，`undefined` 表示目标位置之后的全部行。


#### 返回值

目标行元素集的 `Collector` 封装，无效的位置指定返回一个空集。


### .get( idx ): Element

获取目标位置的行元素，表格行计数针对整个表格（同上）。


#### 参数

- `idx: Number` 目标位置（从 `0` 开始），支持负值从末尾算起。


#### 返回值

目标位置的行元素，无效的位置指定返回 `null`。


### .rows(): Number

返回表格当前的行数，计数针对整个表格（`<thead>`、`<tbody>`、`<tfoot>`）。


### .cols(): Number

返回表格的列数，这是一个固定值，即初始指定（或解析）的那个值。


### .vth(): Boolean

返回表格是否包含首列表头（首列为 `<th>`）。


### .$(): Collector

返回一个对原始 `<table>` 元素的 `Collector` 封装实例。


### .elem(): Element

返回原始的 `<table>` 表格元素。


## 示例

```js
let tbl = $.table(2, 3, '', true);
// <table>
//     <tbody>
//         <tr>
//             <th></th>
//             <td></td>
//             <td></td>
//         </tr>
//         <tr>
//             <th></th>
//             <td></td>
//             <td></td>
//         </tr>
//     </tbody>
// </table>


tbl.head();  // null

let trs = tbl.head(0);
// Collector [
//     <tr>
//         <th></th>
//         <th></th>
//         <th></th>
//     </tr>
// ]
// 注：集合仅包含一个表格行成员（<tr>）。

tbl.head();
// <thead>
//     <tr>
//         <th></th><th></th><th></th>
//     </tr>
// </thed>
// 注：返回表头<thead>元素。


let ths = trs.children()
// Collector [
//     <th>,
//     <th>,
//     <th>,
// ]

tbl.gets(0, 1).children();
// 同上。

$( tbl.get(0) ).children();
// 同上。

$( $.find('th', tbl.head()) ).children();
// 同上。


ths.text( ['TH', 'TD1', 'TD2'] );
// <thead>
//     <tr>
//         <th>TH</th>
//         <th>TD1</th>
//         <th>TD2</th>
//     </tr>
// </thead>


tbl.foot(0).children().text( 'FOOT' );
// <tfoot>
//     <tr>
//         <th>FOOT</th>
//         <td>FOOT</td>
//         <td>FOOT</td>
//     </tr>
// </tfoot>
// 注：.text()单个值时对全部的成员作相同填充。
```
